"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[37434],{346035:(e,t,o)=>{var l,i;o.r(t),o.d(t,{default:()=>n});let s=(i=[l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},l],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[l,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},l,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});s.hash="6e4bec581cece19361386d6124ddde90";let n=s},772667:(e,t,o)=>{o.d(t,{Z:()=>n});var l=o(883119),i=o(785893);let s=/#[\p{L}\p{N}_]\S*/gu;function n({isHashtagInDescriptionDisplayEnabled:e,text:t}){return t.split(new RegExp(/(#\S*)/)).map((t,o)=>{let n=`${o}-${t}`;return(e?t.match(s):t.includes("#"))?(0,i.jsx)(l.xv,{color:"link",inline:!0,size:"300",children:(0,i.jsx)(l.rU,{display:"inline",href:`/search/pins/?q=${encodeURIComponent(t.replace("#",""))}`,underline:"none",children:t})},n):(0,i.jsx)("span",{children:t},n)})}},650384:(e,t,o)=>{o.d(t,{Z:()=>h});var l=o(667294),i=o(883119),s=o(772667),n=o(214877),a=o(340523),r=o(785893);let c=e=>e.replace(/\s+/g," "),d=e=>null!=e&&e>-1,_=(e,t)=>{let o=t.substr(0,e);return(e??0)-(o.length-c(o).length)},m=({color:e,mention:t,tagObjectId:o,tagType:l,textSize:s})=>{let{logContextEvent:a}=(0,n.v)();return(0,r.jsx)(i.rU,{display:"inlineBlock",href:`/${t.substr(1)}`,onClick:({event:e})=>{e.stopPropagation(),a({event_type:101,element:11915,aux_data:{tag_id:o,tag_type:l}})},underline:"none",children:(0,r.jsx)(i.xv,{color:e,inline:!0,overflow:"normal",size:s,weight:"bold",children:t})},o)},h=({description:e,mentionLinkColor:t,shouldAdjustOffset:o,shouldMakeHashtagLinksFromText:n,textSize:c,userMentionTags:h})=>{let{checkExperiment:u}=(0,a.F)(),g=u("web_hashtags_in_description_display").anyEnabled;if(0===h.length)return(0,r.jsx)(l.Fragment,{children:e});let p=0,f=[],x=[...h].map(t=>o?{...t,offset:_(t.offset??0,e)}:t).sort((e,t)=>(e.offset??0)-(t.offset??0)).filter(e=>d(e.offset)&&d(e.length));return x.forEach(o=>{let l=o.offset??0,i=o.length??0,s=e.substr(p,l-p),n=e.substr(l,i);f.push(s),f.push((0,r.jsx)(m,{color:t,mention:n,tagObjectId:o.objectId,tagType:o.tagType,textSize:c})),p=l+i}),f.push(e.substr(p)),(n?f.flatMap(e=>"string"!=typeof e?e:(0,s.Z)({isHashtagInDescriptionDisplayEnabled:g,text:e})):f).reduce((e,t)=>(0,r.jsxs)(i.xv,{inline:!0,size:c,children:[e,t]}),null)}},439917:(e,t,o)=>{o.d(t,{N:()=>c,d:()=>r});var l=o(667294),i=o(797781),s=o(342513),n=o(785893);let{Provider:a,useHook:r}=(0,s.Z)("Flag"),c=({children:e})=>{let[t,o]=(0,l.useState)(),[s,r]=(0,l.useState)(i.Zw.REPORT),[c,d]=(0,l.useState)(i.qb.STARTED),[_,m]=(0,l.useState)(),[h,u]=(0,l.useState)(),g=(0,l.useMemo)(()=>({flagReason:h,flow:s,status:c,selectedReason:_,modalTitle:t,setFlagReason:u,setFlow:r,setModalTitle:o,setStatus:d,setSelectedReason:m}),[t,s,c,_,h]);return(0,n.jsx)(a,{value:g,children:e})}},742103:(e,t,o)=>{o.d(t,{Z:()=>S});var l=o(667294),i=o(702664),s=o(883119),n=o(216167);async function a({userId:e,blockSource:t,blockContext:o,logContextEvent:l}){let i=n.Z.create("UserBlockResource",{blocked_user_id:e,block_source:t,block_context:o});await i.callCreate(),l({event_type:54,object_id_str:e})}var r=o(439917),c=o(797781),d=o(717203),_=o(140017),m=o(339001),h=o(702497),u=o(785893);let g=h.K_Y+"?source=block_dialogue";function p(e){return e.map(({full_name:e})=>e)}let f=function({users:e,onClose:t,onSubmit:o}){let l=(0,_.ZP)(),i=(0,u.jsx)("strong",{children:(0,d.Z)(p(e),l)},"userlist");return(0,u.jsxs)("form",{method:"post",children:[(0,u.jsxs)(s.xu,{padding:8,children:[(0,u.jsx)(s.xv,{children:(0,m.nk)(l._('If you block {{ users }}, you won\u2019t be able to follow  each other or interact with each other\u2019s Pins.', 'description of blocking users', 'description of blocking users'),{users:i})}),(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsx)(s.xv,{children:(0,u.jsx)(s.rU,{display:"inlineBlock",href:g,underline:"hover",children:l._('Learn more', 'link to learn more about blocking', 'link to learn more about blocking')})})]}),(0,u.jsx)(s.xu,{padding:2,children:(0,u.jsxs)(s.kC,{alignItems:"stretch",gap:{row:1,column:0},justifyContent:"end",children:[(0,u.jsx)(s.zx,{fullWidth:!0,onClick:t,text:l._('Cancel', 'UserBlock.Cancel', 'cancel form')}),(0,u.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:()=>{o()},text:l._('Block', 'UserBlock.Submit', 'submit form to block users'),type:"submit"})]})})]})};var x=o(587703),y=o(149722);let b=({deleteAndCloseConversation:e,flagReason:t,flagType:o,onClose:i,selectedReason:n,status:g,users:b,blockContext:P})=>{let A=(0,_.ZP)(),v=(0,x.Z)(),[k,z]=(0,l.useState)({}),{setModalTitle:w,setStatus:j}=(0,r.d)(),I=(0,y.Z)(),{id:T}=I.isAuth?I:{},C=b.filter(({id:e})=>k[e]),E=C.length>0,S=()=>{let e;[c.qb.SUBMITTED,c.qb.PROCESSING].includes(g)?e=A.ngettext('Block this person?', 'Block these people?', C.length, 'BlockAndUnfollow', 'Confirmation text when blocking users (plural)'):o===c.Vm.CONVERSATION&&(e=g===c.qb.COMPLETED?(0,m.nk)(A._('You\u2019ve blocked {{usernames}}', 'BlockAndUnfollow', 'title of modal after user has been blocked'),{usernames:(0,d.Z)(p(C),A).join("")}).join(""):A._('Thanks for your report', 'BlockAndUnfollow', 'title at end of report flow')),w(e)};(0,l.useEffect)(()=>{S()},[g]),(0,l.useEffect)(()=>{j(E?c.qb.SELECTED:c.qb.STARTED)},[k]);let L=b.filter(({id:e})=>e!==T),R=[c.qb.STARTED,c.qb.COMPLETED].includes(g);return(0,u.jsx)("form",{method:"post",children:[c.qb.SUBMITTED,c.qb.PROCESSING].includes(g)?(0,u.jsx)(f,{onClose:()=>{j(c.qb.SELECTED)},onSubmit:()=>(j(c.qb.PROCESSING),Promise.all(Object.keys(k).filter(e=>k[e]).map(e=>a({userId:e,blockSource:"message_report",blockContext:P,logContextEvent:v}))).finally(()=>{j(c.qb.COMPLETED)})),users:C}):(0,u.jsxs)(s.xu,{padding:8,children:[(0,u.jsx)(s.xu,{children:g!==c.qb.COMPLETED?(()=>{let e;"harassingOther"===n?e=(0,m.nk)(A._('We remove content that identifies and attacks private people because we consider it to be bullying. We also don\u2019t allow content that reveal someone\u2019s personally identifiable information.  Learn more about our  {{ communityGuidelines }}.', 'confirmation message after reporting harassment', 'confirmation message after reporting harassment'),{communityGuidelines:(0,u.jsx)(s.rU,{display:"inlineBlock",href:h.MsG,underline:"hover",children:A._('Community Guidelines', 'link to community guidelines for harassment', 'link to community guidelines for harassment')},"policyLink")}):"harassingPublicFigure"===n?e=A._('Please note that we won\u2019t necessarily take down stuff that attacks public figures.', 'message shown after reporting harrassment', 'message shown after reporting harrassment'):"harassingFriend"===n?e=A._('Before we can review this Pin, we need to hear from the person who\u2019s being harassed. Please have your friend report this Pin to us.', 'message shown after reporting harrassment', 'message shown after reporting harrassment'):["spam","policies","hurtfulContent"].includes(t)&&(e=A._('We\u2019ll take a look at this Pin and delete it if it goes against our policies.', 'confirmation message after reporting a pin', 'confirmation message after reporting a pin'));let o=A.ngettext('You can also block this person.', 'You can also block these people.', L.length, 'description to block people', 'description to block people');return(0,u.jsxs)(l.Fragment,{children:[e&&(0,u.jsx)(s.xu,{marginBottom:8,children:(0,u.jsx)(s.xv,{children:e})}),(0,u.jsx)(s.xu,{marginBottom:8,children:(0,u.jsx)(s.xv,{children:o})}),(0,u.jsx)(s.xu,{marginBottom:8,children:L.map(({id:e,full_name:t})=>(0,u.jsx)(s.XZ,{checked:!!k[e],helperText:A._('You won\u2019t be able to send each other messages or interact with each other\u2019s Pins.', 'BlockAndUnfollow', 'explanation of blocking a user'),id:"blockPinner"+e,label:(0,m.nk)(A._('Block {{ pinnerName }}', 'BlockAndUnfollow', 'form option to block a pinner'),{pinnerName:t}).join(""),onChange:({checked:t})=>{z({...k,[e]:t})}},e))})]})})():E&&(0,u.jsx)(s.xu,{marginBottom:8,children:(0,u.jsx)(s.xv,{children:A._('You won\u2019t be able to follow each other or interact with each other\u2019s pins.', 'BlockAndUnfollow', 'message describing what blocking means')},"blockingConfirmation")})}),(0,u.jsxs)(s.xu,{children:[g!==c.qb.COMPLETED&&(0,u.jsx)(s.xu,{marginBottom:8,children:(0,u.jsx)(s.xv,{size:"100",children:(0,m.nk)(A._('Learn more about {{ linkToTopic }}', 'BlockAndUnfollow', 'footer link to learn more about a topic'),{linkToTopic:(0,u.jsx)(s.rU,{display:"inlineBlock",href:h.K_Y,underline:"hover",children:A._('blocking', 'BlockAndUnfollow', 'footer link to learn more about blocking')},"policyLink")})})}),(0,u.jsx)(s.xu,{children:(0,u.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:R?()=>{i(),g===c.qb.COMPLETED&&e?.()}:()=>{z(k),j(c.qb.SUBMITTED)},text:R?A._('Done', 'Block.Complete', 'confirm reporting flow is done & close modal'):A._('Block', 'BlockAndUnfollow', 'submit users to block')})})]})]})})};function P({flagOptions:e,flow:t,handleClose:o,handleNext:l,selectedReason:i,showPrimaryAction:n,submitButton:a}){let r=(0,_.ZP)();if(t===c.Zw.REPORT){if(c.qb.PROCESSING===status||e.getFlagOption(i)?.isTerminalReason)return a;if(n)return(0,u.jsx)(s.zx,{color:"red",disabled:void 0===i,fullWidth:!0,onClick:l,text:r._('Next', 'go to the next view in the report flow', 'go to the next view in the report flow')})}else if(t===c.Zw.END)return(0,u.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:o,text:r._('Got it', 'confirm reporting flow is done & close modal', 'confirm reporting flow is done & close modal')});return null}function A({flow:e,flagReason:t}){let o=(0,_.ZP)();if(e===c.Zw.REPORT){if("attacks"===t)return(0,u.jsx)(s.xv,{size:"100",children:(0,m.nk)(o._('Learn more about our {{ linkToTopic }}', 'footer link to learn more about community guidelines', 'footer link to learn more about community guidelines'),{linkToTopic:(0,u.jsx)(s.rU,{href:h.MsG,target:"blank",children:(0,u.jsx)(s.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:o._('Community Guidelines', 'name of footer link to community guidelines', 'name of footer link to community guidelines')})},"policyLink")})});if("policies"===t)return(0,u.jsxs)("p",{children:[(0,u.jsx)(s.xv,{size:"100",children:(0,m.nk)(o._('Learn about {{ linkToTopic }}', 'footer link to learn more about a topic', 'footer link to learn more about a topic'),{linkToTopic:(0,u.jsx)(s.rU,{href:h.MsG+"#sub-section-adult-content",target:"blank",children:(0,u.jsx)(s.xv,{color:"error",inline:!0,size:"100",children:o._('our nudity policies', 'name of footer link to policy', 'name of footer link to policy')})},"policyLink")})}),(0,u.jsx)(s.xv,{size:"100",children:(0,m.nk)(o._('Learn about {{ linkToTopic }}', 'footer link to learn more about a topic', 'footer link to learn more about a topic'),{linkToTopic:(0,u.jsx)(s.rU,{href:h.MsG+"#sub-section-dangerous-goods-and-activities",target:"blank",children:(0,u.jsx)(s.xv,{color:"error",inline:!0,size:"100",children:o._('our policies on hurtful content', 'name of footer link to policy', 'name of footer link to policy')})},"policyLink")})}),(0,u.jsx)(s.xv,{size:"100",children:(0,m.nk)(o._('Learn about {{ linkToTopic }}', 'footer link to learn more about a topic', 'footer link to learn more about a topic'),{linkToTopic:(0,u.jsx)(s.rU,{href:h.MsG+"#sub-section-violence",target:"blank",children:(0,u.jsx)(s.xv,{color:"error",inline:!0,size:"100",children:o._('our policies on gore', 'name of footer link to policy', 'name of footer link to policy')})},"policyLink")})})]});if("spam"===t||void 0===t)return(0,u.jsx)(s.xv,{size:"100",children:(0,m.nk)(o._('Learn about {{ linkToTopic }}', 'footer link to learn more about a topic', 'footer link to learn more about a topic'),{linkToTopic:(0,u.jsx)(s.rU,{href:h.MsG,target:"blank",children:(0,u.jsx)(s.xv,{color:"error",inline:!0,size:"100",weight:"bold",children:"spam"===t?o._('our spam policies', 'name of footer link to policy', 'name of footer link to policy'):o._('our policies', 'name of footer link to policy', 'name of footer link to policy')})},"policyLink")})})}return null}function v({arrayOfData:e,handleSelectReason:t,selectedReason:o}){let l=(0,_.ZP)();return(0,u.jsx)(s.xu,{padding:2,children:(0,u.jsx)(s.FX,{id:"flag-option-radio-group",legend:l._('Flag legends', 'flag_legend', 'Flag legends'),legendDisplay:"hidden",children:e.map((e,l)=>{let{condition:i}=e;return void 0===i||i?function(e,t,o,l){let{text:i,value:n,category:a}=e;return(0,u.jsx)(s.xu,{paddingY:2,children:(0,u.jsx)(s.FX.RadioButton,{checked:o===n,id:n,label:i,name:"flagReason",onChange:({checked:e})=>t(e,n,a),value:n})},l)}(e,t,o,l):null})})})}class k{constructor(e){this.config=e,this.configMap=function(e){let t={};for(let o in e){let l=e[o];l.forEach(e=>{let{value:l}=e;if(Object.prototype.hasOwnProperty.call(t,l))throw Error("Duplicate key in FlagOptions config: "+l);t[l]={...e,parentOption:o}})}return t}(e)}getFlagOption(e){return e?this.configMap[e]:null}renderFlagLabels(e){let{flagReason:t,onSelectReason:o,selectedReason:l}=e;return(0,u.jsx)(v,{arrayOfData:this.config[t],handleSelectReason:o,selectedReason:l})}}var z=o(930837);function w(e,t,o){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:String(l))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class j extends l.Component{constructor(...e){super(...e),w(this,"flagOptions",new k(this.props.flagOptionsConfig)),w(this,"renderContent",()=>{let{content:e,flow:t,onSelectReason:o,selectedReason:l}=this.props;return e||(t===c.Zw.REPORT?this.flagOptions.renderFlagLabels({flagReason:this.props.flagReason||"__default",onSelectReason:o,selectedReason:l}):t===c.Zw.END?(0,u.jsx)(s.xv,{children:this.props.i18n._('We\u2019ll use your feedback to make your Pinterest experience better.', 'final message in reporting flow', 'final message in reporting flow')}):void 0)})}componentDidUpdate(e){let{flow:t,onCompletedReport:o,onCompletedBlock:l}=e;if(this.props.flow!==t)switch(t){case c.Zw.REPORT:o&&o();break;case c.Zw.BLOCK:l&&l()}}render(){let{accessibilityModalLabel:e,deleteAndCloseConversation:t,flagType:o,flow:l,status:i,modalTitle:n,onClose:a,selectedReason:r,submitButton:d,flagReason:_,showPrimaryAction:m,users:h,blockContext:g}=this.props;return(0,u.jsx)(z.ZP,{accessibilityModalLabel:e,footer:l!==c.Zw.BLOCK?(0,u.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[(0,u.jsx)(s.xu,{flex:"grow",children:(0,u.jsx)(A,{flagReason:_,flow:l})}),(0,u.jsx)(s.xu,{padding:1,children:l===c.Zw.REPORT?(0,u.jsx)(s.zx,{fullWidth:!0,onClick:void 0===_?this.props.onClose:()=>{this.props.onRevert?.()},text:void 0===_?this.props.i18n._('Cancel', 'cancel form', 'cancel form'):this.props.i18n._('Back', 'previous step in a form', 'previous step in a form')}):null}),(0,u.jsx)(s.xu,{padding:1,children:(0,u.jsx)(P,{flagOptions:this.flagOptions,flow:l,handleClose:this.props.onClose,handleNext:()=>{this.props.onNext?.()},selectedReason:r,showPrimaryAction:!!m,submitButton:d})})]}):void 0,heading:n,onDismiss:a,size:"md",children:(0,u.jsx)(s.xu,{children:l===c.Zw.BLOCK?(0,u.jsx)(b,{blockContext:g,deleteAndCloseConversation:t,flagReason:_,flagType:o,onClose:a,selectedReason:r,status:i,users:h}):this.renderContent()})})}}function I(e){let t=(0,_.ZP)();return(0,u.jsx)(j,{...e,i18n:t})}var T=o(88682),C=o(930822);let E="policies";function S({aggregatedPinDataId:e,didItDataId:t,onClose:o,pinId:n,username:a,users:d}){let m=(0,_.ZP)(),[g,p]=(0,l.useState)([]),[f,x]=(0,l.useState)(),[y,b]=(0,l.useState)(),P=(0,i.useDispatch)(),A=(e,t,o,l,i)=>P((0,C.Th)(e,t,o,l,i)),{flow:v,modalTitle:k,selectedReason:z,setFlow:w,setModalTitle:j,setSelectedReason:S,setStatus:L,status:R}=(0,r.d)(),D=()=>{if(v===c.Zw.REPORT)switch(y){case"attacks":return m._('What\'s going on?', 'title for report content flow', 'title for report content flow');case E:return m._('What\'s wrong with this Try?', 'title for report content flow', 'title for report content flow');case"IP":return m._('Intellectual Property', 'title for report content flow for IP complaints', 'title for report content flow for IP complaints');default:return m._('What\'s wrong with this Try?', 'title for the report content flow', 'title for the report content flow')}else if(v===c.Zw.END&&g.includes("notUseful"))return m._('Thanks for letting us know!', 'title at end of report flow when content is not useful', 'title at end of report flow when content is not useful');return""};(0,l.useEffect)(()=>{j(D())},[g,v,y]);let O=(0,u.jsx)(s.zx,{color:"red",fullWidth:!0,onClick:()=>{if(L(c.qb.PROCESSING),"ignoreThisPin"===z)w(c.Zw.BLOCK),L(c.qb.STARTED);else{let o=[...g,z];p(o),A(e,o,t,f,a),g.includes("notUseful")?w(c.Zw.END):w(c.Zw.BLOCK),L(c.qb.STARTED)}},text:m._('Report content', 'button to report content', 'button to report content')});return(0,u.jsx)(I,{accessibilityModalLabel:m._('Report conversation', 'Pin.DidIt.Report', 'Accessibility label for report pin did it'),blockContext:e??"",content:"IP"===y?(0,u.jsx)(s.xu,{justifyContent:"center",mdDisplay:"flex",children:(0,u.jsxs)(s.xu,{mdColumn:9,children:[(0,u.jsx)(s.xu,{marginStart:2,padding:2,children:(0,u.jsx)(s.xv,{align:"center",color:"default",weight:"bold",children:m._('If you\u2019ve found content that you believe violates your intellectual property, you can fill out our copyright complaint form.', 'explanation of IP complaint process', 'explanation of IP complaint process')})}),(0,u.jsx)(s.xu,{padding:2,children:(0,u.jsx)(s.ZP,{color:"red",href:(0,T.Z)(h.GEi,{pin_id:n,user_did_it_id:t}),target:"blank",text:m._('File a report', 'link to DMCA form', 'link to DMCA form')})})]})}):null,flagOptionsConfig:{__default:[{text:m._('It isn\'t useful or relevant', 'tried-it reporting flow', 'tried-it reporting flow'),value:"ignoreThisPin",isTerminalReason:!0,category:"ignoreThisPin"},{text:m._('It shouldn\'t be on Pinterest', 'tried-it reporting flow', 'tried-it reporting flow'),value:E,isTerminalReason:!1},{text:m._('It\'s spam', 'tried-it reporting flow', 'tried-it reporting flow'),value:"spam",isTerminalReason:!0,category:"spam"},{text:m._('It\'s my intellectual property', 'tried-it reporting flow', 'tried-it reporting flow'),isTerminalReason:!1,value:"IP"}],ignoreThisPin:[],policies:[{text:m._('It\'s sexually explicit', 'tried-it reporting flow', 'tried-it reporting flow'),value:"nudity",isTerminalReason:!0,category:"nudity"},{text:m._('It\'s self-harm', 'an option on tried-it reporting flow', 'an option on tried-it reporting flow'),value:"self-harm",isTerminalReason:!0,category:"self-harm"},{text:m._('It\'s hate speech', 'tried-it reporting flow', 'tried-it reporting flow'),value:"hate-speech",isTerminalReason:!0,category:"hate-speech"},{text:m._('It\'s harassment or bullying', 'tried-it reporting flow', 'tried-it reporting flow'),value:"attacks",isTerminalReason:!1,category:"attacks"},{text:m._('It\'s graphic violence', 'tried-it reporting flow', 'tried-it reporting flow'),value:"gore",isTerminalReason:!0,category:"graphic-violence"}],attacks:[{text:m._('It\'s a photo of me or my child', 'tried-it reporting flow', 'tried-it reporting flow'),value:"harassingMeOrMyChild",isTerminalReason:!0,category:"attacks"},{text:m._('It identifies and attacks me or someone I know', 'tried-it reporting flow', 'tried-it reporting flow'),value:"harassingMeOrAFriend",isTerminalReason:!0,category:"attacks"},{text:m._('Something else', 'tried-it reporting flow', 'tried-it reporting flow'),value:"harassingOther",isTerminalReason:!0,category:"attacks"}],IP:[],spam:[]},flagReason:y,flagType:c.Vm.DID_IT,flow:v,modalTitle:k,onClose:o(!0),onNext:()=>{b(z),p([...g,z]),S()},onRevert:()=>{let e=g[g.length-1],t=g.slice(0,-1);S(e),b(t[t.length-1]),p(t),x(),L(void 0===e?c.qb.STARTED:c.qb.SELECTED)},onSelectReason:(e,t,o)=>{e&&(S(t),L(c.qb.SELECTED),x(o))},selectedReason:z,showPrimaryAction:"IP"!==y,status:R,submitButton:O,users:d})}},797781:(e,t,o)=>{o.d(t,{Vm:()=>s,Zw:()=>l,qb:()=>i});let l={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},i={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},s={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},258656:(e,t,o)=>{o.d(t,{Z:()=>a});var l=o(883119),i=o(205841),s=o(140017),n=o(785893);let a=({isQuestion:e,name:t,size:o,src:a})=>{let r=(0,s.ZP)();return(0,n.jsxs)(l.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,n.jsx)(i.qE,{name:t,size:o,src:a}),e&&(0,n.jsxs)(l.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,n.jsx)(l.xu,{position:"absolute",children:(0,n.jsx)(l.JO,{accessibilityLabel:r._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"dark",icon:"speech"})}),(0,n.jsx)(l.xu,{position:"absolute",children:(0,n.jsx)(l.JO,{accessibilityLabel:r._('Q and A comment', 'comment.userAvatar.creator.q&aIndicator', 'question mark icon indicator background that comment is Q&A'),color:"light",icon:"question-mark",size:8})})]})]})}},139922:(e,t,o)=>{o.d(t,{Z:()=>ei});var l=o(883119),i=o(667294),s=o(702664),n=o(473727),a=o(161881),r=o(439917),c=o(742103),d=o(258656),_=o(140017),m=o(785893);let h=({color:e,isMarkedHelpful:t})=>{let o=(0,_.ZP)();return(0,m.jsx)(l.JO,{accessibilityLabel:o._('Helpful', 'comment.button.helpful', 'mark or unmark comment as helpful'),color:t?"brandPrimary":e,icon:"thumbs-up",inline:!0,size:12})};var u=o(144138),g=o(903591),p=o(214877),f=o(454514),x=o(340523),y=o(13848),b=o(149722),P=o(785059),A=o(35222),v=o(199677),k=o(415199),z=o(930822),w=o(291867),j=o(937310),I=o(825784);let T=({aggregatedPinDataId:e,anchor:t,closeupAttributionId:o,comment:n,dismiss:a,isOpen:r,isReply:c,onEdit:d,onShowBlockUserModal:h,parentId:T,pinnerId:C,pinId:E})=>{let S=(0,_.ZP)(),L=(0,s.useDispatch)(),{logContextEvent:R}=(0,p.v)(),{showToast:D}=(0,y.F9)(),{checkExperiment:O}=(0,x.F)(),{anyEnabled:M}=O("web_m10n_business_access_orbac_ga"),{toggleAggregatedCommentHighlight:B}=(0,k.nf)(),Z=(0,u.Z)(),[N,U]=(0,i.useState)(!1);(0,i.useEffect)(()=>{U(r)},[r,U]);let F=(0,b.Z)(),G=(0,P.Z)(),H=(0,A.Z)(),{reportComment:W}=(0,I.f)(),q=o??"",K=n.user.id,$=F.isAuth&&q===F.id,V="userdiditdata"===n.type,Y=(0,v.q6)(F,C??"",M?G:{}),J=(0,v.D3)(F,K,M?G:{}),Q=(0,v.D3)(F,q,M?G:{}),X=F.isAuth&&(n.tagged_users||[]).filter(({id:e})=>e===F.id).length>0,ee=async e=>{try{await B({aggregatedCommentId:n.id,pinId:E,isHighlighted:e}),R({event_type:101,component:13712,element:e?12475:12474,view_type:220,aux_data:{creator_id:K}}),D(({hideToast:t})=>(0,m.jsx)(f.ZP,{onHide:t,primaryAction:{accessibilityLabel:S._('Undo comment highlight or comment highlight removal', 'unifiedComment.unifiedCommentContainer.commentHighlightToast.a11yUndoButton', 'Undo comment highlight or comment highlight removal'),label:S._('Undo', 'unifiedComment.unifiedCommentContainer.commentHighlightToast.undoButton', 'Undo comment highlight or comment highlight removal'),size:"lg",onClick:()=>{B({aggregatedCommentId:n.id,pinId:E,isHighlighted:!e})}},text:e?S._('Highlight removed', 'unifiedComment.unifiedCommentContainer.popover.commentHighlightRemovalToast', 'Toast that tells user that they have successfully removed a comment highlight.'):S._('Comment highlighted', 'unifiedComment.unifiedCommentContainer.popover.commentHighlightToast', 'Toast that tells user that they have successfully highlighted a comment.')}))}catch(e){e.message&&D(({hideToast:t})=>(0,m.jsx)(f.ZP,{onHide:t,text:e.message,type:"error"}))}},et=e=>()=>void ee(e),eo=e=>()=>{e(),a(!0)};if(!r)return null;let el={highlight:S._('Highlight', 'Highlight a community post or comment', 'Highlight a community post or comment'),removeHighlight:S._('Remove highlight', 'Remove highlight for a community post or comment', 'Remove highlight for a community post or comment'),edit:S._('Edit', 'Edit a community post or comment', 'Edit a community post or comment'),delete:S._('Delete', 'Delete a community post or comment', 'Delete a community post or comment'),reportContent:S._('Report this content', 'Report a community post or comment', 'Report a community post or comment'),removeMention:S._('Remove @mention', 'closeup.activityItem.removeMention', 'Button that allows user to remove their @mention in a comment on a pin'),reportForNetzDG:S._('Report comment for NetzDG', 'commentOverflowMenu.option.reportForNetzDG', 'Report comment - NetzDG'),blockUser:S._('Block user', 'closeup.activityItem.blockUser', 'Block comment author')},ei=new l.Ry(1);return N&&(0,m.jsx)(l.xu,{onFocus:e=>e.stopPropagation(),children:(0,m.jsx)(l.Lt,{anchor:t,disableMobileUI:!0,id:"comment-overflow-popover",idealDirection:"down",isWithinFixedContainer:!1,onDismiss:()=>a(!1),zIndex:ei,children:F.isAuth?(0,m.jsxs)(i.Fragment,{children:[!c&&$&&!n.highlighted_by_pin_owner&&!V&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-highlight",onSelect:eo(et(!1)),option:{label:el.highlight,value:el.highlight}}),!c&&$&&n.highlighted_by_pin_owner&&!V&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-remove-highlight",onSelect:eo(et(!0)),option:{label:el.removeHighlight,value:el.removeHighlight}}),J&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-edit",onSelect:eo(d),option:{label:el.edit,value:el.edit}}),(J||Q)&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-delete",onSelect:eo(()=>{"aggregatedcomment"===n.type?Z({aggregatedCommentId:n.id,aggregatedPinId:e??"",feedType:c?"aggregatedComments":j.Z.UNIFIED_COMMENTS,orbacSubjectId:H,parentId:T,type:c?g.Rv.REPLY_TO_AGGREGATED:g.Rv.TOP,updateParentCommentCount:!0,pinId:E}):L((0,z.lg)({aggregatedPinDataId:e??"",feedType:j.Z.UNIFIED_COMMENTS,id:n.id,isOwnedByMe:!0,pinId:E??"",username:n.user.username,updateParentDidItCount:!0}))}),option:{label:el.delete,value:el.delete}}),!J&&!Y&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-report",onSelect:eo(()=>{W(n.id,T,n.type)}),option:{label:el.reportContent,value:el.reportContent}}),X&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-remove-mention",onSelect:eo(()=>{L((0,w.Q)(n.id)),D(({hideToast:e})=>(0,m.jsx)(f.ZP,{onHide:e,text:S._('@mention removed!', 'unifiedComment.unifiedCommentContainer.mentionRemovalToast', 'Toast that tells user that they have successfully removed the @mention of them in the comment')}))}),option:{label:el.removeMention,value:el.removeMention}}),!J&&(0,m.jsx)(l.Lt.Item,{dataTestId:"dropdown-item-block-user",onSelect:eo(()=>{U(!1),h(),R({component:14349,event_type:9406})}),option:{label:el.blockUser,value:el.blockUser}})]}):(0,m.jsx)(l.Lt.Link,{dataTestId:"dropdown-item-report-for-netzdg",href:"https://policy.pinterest.com/de/netzdg/",option:{label:el.reportForNetzDG,value:el.reportForNetzDG}})})})};var C=o(600636),E=o(133758),S=o(604625);let L={containerStyle:{boxShadow:"0 0px 8px rgba(0, 0, 0, 0.1)"},helpfulStyle:{backgroundImage:`url(${C})`},lovedStyle:{backgroundImage:`url(${E})`}},R=({setHelpful:e,setLoved:t})=>{let o=(0,_.ZP)(),s=(0,i.useRef)(null),n=(0,i.useRef)(null),[a,r]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),h=e=>()=>{r(e)},u=e=>()=>{d(e)};return(0,m.jsxs)(l.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:L.containerStyle},"data-test-id":"comment-reaction-tray-background",display:"flex",height:25,justifyContent:"center",padding:1,position:"relative",rounding:"pill",width:43,children:[(0,m.jsxs)(l.iP,{fullHeight:!0,onMouseDown:t,onMouseEnter:u(!0),onMouseLeave:u(!1),children:[(0,m.jsx)(l.xu,{ref:n,bottom:!0,height:14,marginBottom:3,position:"absolute",width:14}),(0,m.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:L.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:18,marginBottom:c?3:1,position:"absolute",width:18})]}),(0,m.jsxs)(l.iP,{fullHeight:!0,onMouseDown:e,onMouseEnter:h(!0),onMouseLeave:h(!1),children:[(0,m.jsx)(l.xu,{ref:s,bottom:!0,height:14,marginBottom:3,position:"absolute",width:14}),(0,m.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:L.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:18,marginBottom:a?3:1,position:"absolute",width:18})]}),(c||a)&&(0,m.jsx)(l.mh,{zIndex:S.lI,children:(0,m.jsx)(l.J2,{anchor:c?n.current:s.current,idealDirection:"up",onDismiss:()=>{},positionRelativeToAnchor:!1,size:"flexible",children:(0,m.jsx)(l.xu,{alignItems:"center",color:"selected",display:"flex",paddingX:1,paddingY:1,children:(0,m.jsx)(l.xv,{color:"inverse",overflow:"noWrap",size:"100",weight:"bold",children:c?o._('Love', 'comment.button.loved', 'loved reaction'):o._('Helpful', 'comment.button.helpful', 'helpful reaction')})})})})]})};var D=o(311716),O=o(559113),M=o(205841);let B={helpfulStyle:{backgroundImage:`url(${D})`},lovedStyle:{backgroundImage:`url(${O})`}},Z=({response:e})=>{let t=14===e.reaction_type,o=1===e.reaction_type,i=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,m.jsxs)(l.kC,{alignItems:"center",children:[(0,m.jsx)(l.Tg,{href:`/${e.user.username}/`,children:(0,m.jsxs)(l.kC,{alignItems:"center",children:[(0,m.jsx)(l.xu,{maxWidth:40,children:(0,m.jsx)(M.qE,{accessibilityLabel:"",name:i,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,m.jsx)(l.xu,{marginStart:2,maxWidth:80,children:(0,m.jsx)(l.xv,{color:"inverse",size:"100",weight:"bold",children:i})})]})}),(0,m.jsxs)(l.xu,{alignContent:"end",display:"flex",padding:2,children:[o&&(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:B.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),t&&(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:B.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var N=o(995917);let U=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],F=({commentId:e,isMarkedHelpfulByMe:t,isLovedByMe:o,isTry:s})=>{let n=(0,b.Z)(),a=(0,N.Z)({name:"ApiResource",options:{url:s?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:U}}),r=a.data?.filter(e=>e.user.id!==n.id);if((o||t)&&r){let t={id:e,reaction_type:o?1:14,user:{first_name:n.isAuth?n.firstName:"",full_name:n.isAuth?n.fullName:"",id:n.isAuth?n.id:"",image_medium_url:n.isAuth?n.imageMediumUrl:"",is_private_profile:!!n.isAuth&&!!n.isPrivateProfile,username:n.isAuth?n.username:""}};r=[t,...r]}let c=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let{current:e}=c,t=()=>{a.isFetching||(a.isAtEnd?e?.removeEventListener("scroll",t):a.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[a]),(0,m.jsx)(l.xu,{ref:c,color:"selected",maxHeight:140,overflow:"scroll",rounding:2,width:180,children:r?.map(e=>m.jsx(l.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:m.jsx(Z,{response:e})},e.id))})},G=({commentId:e,dismissReactionList:t,helpfulCount:o,isMarkedHelpfulByMe:s,isLovedByMe:n,isReactionListOpen:a,isTry:r,lovedCount:c,onReactionCountHover:d,onToggleHelpful:h,onToggleLove:u})=>{let g=(0,_.ZP)(),p=(0,i.useRef)(),[f,x]=(0,i.useState)(!1),y=!1,b=(c||0)+(o||0);s&&n&&(b-=1);let P=e=>()=>{x(e)},A=()=>{y=!0,d()},v=()=>{y=!1,setTimeout(()=>{y||t()},1e3)},k=(0,m.jsx)(l.xu,{"data-test-id":"comment-reaction-container-entry-point",children:f?(0,m.jsx)(l.iP,{onMouseDown:P(!1),onMouseLeave:P(!1),children:(0,m.jsx)(R,{setHelpful:h(!0),setLoved:u(!0)})}):(0,m.jsx)(l.iP,{onMouseEnter:P(!0),children:(0,m.jsx)(l.JO,{accessibilityLabel:g._('React', 'comment.actionbar.react', 'accessibility label entry point to react to a comment'),color:"subtle",icon:"heart-outline",size:16})})});return(0,m.jsxs)(l.kC,{alignItems:"center",gap:{row:1,column:0},children:[s||n?(0,m.jsx)(l.iP,{onMouseDown:()=>{h(!1)(),u(!1)()},children:(0,m.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${n?O:D})`}},"data-test-id":n?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:16,width:16})}):k,b>0&&(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(l.iP,{onMouseEnter:A,onMouseLeave:v,children:(0,m.jsx)(l.xu,{ref:p,"data-test-id":"comment-reaction-container-reaction-count",children:(0,m.jsx)(l.xv,{color:"subtle",inline:!0,size:"200",weight:"bold",children:b})})}),a&&(0,m.jsx)(l.mh,{zIndex:S.lI,children:(0,m.jsx)(l.J2,{anchor:p.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,children:(0,m.jsx)(l.iP,{onMouseEnter:A,onMouseLeave:v,children:(0,m.jsx)(F,{commentId:e,isLovedByMe:n,isMarkedHelpfulByMe:s,isTry:r})})})})]})]})};var H=o(53264),W=o(339001);function q(e){let{featuredCommentId:t,parentId:o,parentType:n,isDesktop:a,isLoading:r,isReadOnly:c,openOverflowMenu:d,replyingToCommentId:h,toggleHelpful:u,toggleLike:g,toggleReplyComposer:p,isORBACProfileManager:f,isVideo:x,storyPinDataId:y,pinId:b,closeupAttributionId:P,aggregatedPinDataId:A,closeupAttributionUsername:v,pinnerId:z,reactionListCommentId:w,showReactionListForComment:I,viewParameter:T}=e,C=(0,_.ZP)(),E=(0,k.lV)(),S=(0,s.useSelector)(({feeds:e})=>{let t=e[`${j.Z.AGGREGATED_COMMENT_REPLIES}:${o}`]||[],l=e[`${j.Z.AGGREGATED_COMMENTS}:${o}`]||[],i=t.concat(l);return i.reduceRight((e,{id:t})=>{let o=E[t];return o?[...e,o]:e},[])}),[L,R]=(0,i.useState)(1),D=L===S.length;return(0,m.jsxs)(i.Fragment,{children:[S.length>1&&(0,m.jsx)(l.iP,{onTap:()=>{R(D?0:S.length)},children:(0,m.jsxs)(l.xu,{marginBottom:4,children:[(0,m.jsx)(l.xu,{display:"inlineBlock",marginEnd:2,children:(0,m.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:"⎯⎯"})}),(0,m.jsx)(l.xv,{color:"subtle",inline:!0,size:"100",weight:"bold",children:D?C._('Hide replies', 'comment.button.hideReplies', 'hide comment replies'):(0,W.nk)(C.ngettext('View {{ commentCount }} reply', 'View {{ commentCount }} replies', S.length, 'comment.button.showReplies', 'show comment replies'),{commentCount:S.length})})]})}),(0,m.jsx)(ei,{aggregatedPinDataId:A,closeupAttributionId:P,closeupAttributionUsername:v,comments:S.slice(0,L),commentsDisabled:!1,featuredCommentId:t,gapSize:2,isDesktop:a,isLoading:r,isORBACProfileManager:f,isReadOnly:c,isVideo:x,openOverflowMenu:d,parentId:o,parentType:n,pinId:b,pinnerId:z,reactionListCommentId:w,replyingToCommentId:h,showReactionListForComment:I,storyPinDataId:y,toggleHelpful:u,toggleLike:g,toggleReplyComposer:p,userAvatarSize:"sm",viewParameter:T})]})}var K=o(961907),$=o(757017),V=o(96452),Y=o(5859),J=o(227258),Q=o(413110),X=o(189),ee=o(193247),et=o(386129);function eo(e){let t;let{aggregatedPinDataId:o,closeupAttributionId:u,closeupAttributionUsername:A,comment:w,featuredCommentId:j,isDesktop:I,isReadOnly:C,isVideo:E,openOverflowMenu:S,toggleReplyComposer:L,parentId:R,parentType:D=Q.o.pin,pinId:O,storyPinDataId:M,replyingToCommentId:B,showReactionListForComment:Z,toggleHelpful:N,toggleLike:U,userAvatarSize:F,isORBACProfileManager:eo,pinnerId:el,reactionListCommentId:ei,viewParameter:es}=e,{user:{id:en,first_name:ea,id:er,image_medium_url:ec,username:ed},id:e_,image_signatures:em,is_translatable:eh,comment_count:eu,helpful_count:eg,tags:ep=[]}=w,[ef,ex]=(0,i.useState)(!1),ey=ef&&w.translatedText||w.text,eb=!eh||""===w.translatedText,eP=!1,eA=0,ev=!1,ek=!!w.marked_helpful_by_me,ez=[w.user],ew="",ej=new Date;"aggregatedcomment"===w.type?(eP=w.highlighted_by_pin_owner,eA=w.reaction_counts[1],ev=w.reaction_by_me>0,ez.push(...w.tagged_users),ew=`${ed} ${ey??""}`,ej=new Date(w.created_at)):(eA=w.like_count,ev=w.liked_by_me,t=(w.images[0]||{})["150x150"],ew=`${ed} ${w.details}`,ej=new Date(w.done_at));let eI=(0,_.ZP)(),eT=(0,b.Z)(),{logContextEvent:eC}=(0,p.v)(),{country:eE,isBot:eS}=(0,Y.B)(),{checkExperiment:eL}=(0,x.F)(),{showToast:eR}=(0,y.F9)(),eD=(0,s.useDispatch)(),eO=(0,i.useRef)(),{anyEnabled:eM}=eL("web_m10n_business_access_orbac_ga"),eB=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"].includes(eE),eZ=1===w.comment_tag,eN=(0,P.Z)(),eU=eM?(0,v.lJ)(eT,eN):"",{nativeEngagementsHiddenForUser:eF}=(0,X.G)(),{aggregatedCommentsHiddenForUser:eG,translateAggregatedComment:eH,updateAggregatedComment:eW}=(0,k.nf)(),eq=(0,a.Z)(),eK="userdiditdata"===w.type,e$=(0,$.Z)(),eV=eh&&eL("dweb_comment_translations").anyEnabled,eY=eK&&eL("dweb_photo_commenting").anyEnabled,eJ=!C&&!eo&&eK,eQ=eJ&&I,eX=eJ&&!I&&eL("mweb_photo_comment_reactions").anyEnabled,e0=[{offset:0,length:ed.length,color:"darkGray"},...ep.map(e=>({...e,offset:(e.offset||0)+ed.length+1,color:"shopping"}))],e1={SHOW_TRANSLATION:eI._('Show translation', 'comment.translateButton.showTranslation', 'text for translation button when translation is available'),TRANSLATING:eI._('Translating...', 'comment.translateButton.translating', 'text for translation button while translating'),SHOW_ORIGINAL:eI._('Show original', 'comment.translateButton.showOriginal', 'text for translation button after translating')},e3=(0,i.useRef)(e1.SHOW_TRANSLATION),[e9,e7]=(0,i.useState)(!1),[e2,e6]=(0,i.useState)(!1),[e4,e8]=(0,i.useState)(!1),[e5,te]=(0,i.useState)(!1),[tt,to]=(0,i.useState)(!1),[tl,ti]=(0,i.useState)(!1),[ts,tn]=(0,i.useState)(g.A9.NONE),ta=e=>()=>{e6(e)};(0,i.useEffect)(()=>{eV&&eC({event_type:10416,view_type:3,view_parameter:es,component:"pin"===D?13696:13697})},[eC,D,eV,es]),(0,i.useEffect)(()=>{eu>0&&!eS&&eD((0,J.U)("aggregatedcomment"===w.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:e_,redux_normalize_feed:!0}}))},[w.type,e_]);let tr=D.toLowerCase()===Q.o.aggregatedComment.toLowerCase()||D.toLowerCase()===Q.n.didIt.toLowerCase(),tc=Object.values(Q.n).includes(D.toLowerCase()),td=w.user.first_name||"",t_=async({contentMarkdown:e,force:t,tags:o})=>{let l,i;te(!0);let s=w.id;if(tr&&(l=D.toLowerCase()===Q.n.didIt,s=R,i=w.id),s)try{await eq({force:t,fromUnifiedComment:!0,objectType:eK||l?Q.o.didIt:Q.o.aggregatedComment,objectId:s,orbacSubjectId:eU,tags:o,text:e,replyToCommentId:i})}catch(e){if([V.ky,V.LJ].includes(e.code)&&I)return tn(e.code===V.ky?g.A9.WARNING:g.A9.BLOCK),te(!1),!1}return L&&L(void 0),te(!1),!0},tm=async({contentMarkdown:e,force:t,tags:o})=>{e8(!0);try{eY?await eD((0,z.IU)({id:w.id,details:e,pinId:O??"",image_signatures:em??[]})):await eW({commentId:w.id,force:t,orbacSubjectId:eU,tags:o,text:e})}catch(e){if([V.ky,V.LJ].includes(e.code)&&I)return tn(e.code===V.ky?g.A9.WARNING:g.A9.BLOCK),e8(!1),!1}return e6(!1),e8(!1),!0},th=e=>()=>{e7(e),ti(e),e||eC({component:14349,event_type:9408})},tu=()=>{tn(g.A9.NONE)},tg=()=>{ef||w.translatedText||eH(w.id),ef||e3.current!==e1.SHOW_TRANSLATION?ef&&e3.current===e1.SHOW_ORIGINAL&&eC({event_type:10418,view_type:3,view_parameter:es,component:"pin"===D?13696:13697}):eC({event_type:10417,view_type:3,view_parameter:es,component:"pin"===D?13696:13697}),ex(!ef)};(0,i.useEffect)(()=>{ef&&eb&&(ex(!ef),eR(({hideToast:e})=>(0,m.jsx)(f.ZP,{onHide:e,text:eI._('Error - couldn\'t translate', 'comment.couldNotTranslate.toast', 'error toast that shows after unsuccessful translation'),type:"error"})))},[ef,eb]),ef?e3.current=w.translatedText?e1.SHOW_ORIGINAL:e1.TRANSLATING:e3.current=e1.SHOW_TRANSLATION;let tp=t&&(0,m.jsx)(l.xu,{marginBottom:I?4:2,marginTop:1,children:(0,m.jsx)(l.zd,{height:150,rounding:2,wash:!0,width:150,children:(0,m.jsx)(l.Ee,{alt:t.url??"",color:"#efefef",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url??""},t.url)})}),tf=I?128:110,tx=w.media?.sticker?.image_url&&eL(I?"ce_dweb_comment_sticker_in_feed":"ce_mweb_comment_sticker_in_feed").anyEnabled&&(0,m.jsx)(l.xu,{height:tf,marginBottom:I?1:0,marginTop:1,width:tf,children:(0,m.jsx)(l.Ee,{alt:w.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:w.media?.sticker?.image_url??""})});return(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(l.$j,{accessibilityLabel:"Loading comment",show:e4}),!e2&&!e4&&(0,m.jsxs)(l.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,m.jsx)(l.xu,{marginEnd:2,children:(0,m.jsx)(n.rU,{to:`/${ed}/`,children:(0,m.jsx)(d.Z,{isQuestion:eZ,name:ea||ed||"",size:F,src:ec??""})})}),(0,m.jsxs)(l.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,m.jsxs)(l.kC,{justifyContent:"between",children:[(0,m.jsx)(l.kC.Item,{minWidth:0,children:(0,m.jsxs)(l.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[!I&&tp,(0,m.jsx)(K.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:ez,tags:e0,text:ew}),I&&tp,tx,eV&&(0,m.jsx)(l.xu,{marginBottom:2,marginTop:2,children:(0,m.jsx)(l.iP,{onTap:()=>tg(),children:(0,m.jsx)(l.xv,{color:"subtle",size:"300",weight:"bold",children:e3.current})})})]})}),j===e_&&(0,m.jsx)(l.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),eP&&(0,m.jsx)(l.xu,{marginBottom:3,marginTop:4,children:(0,m.jsx)(l.xv,{size:"100",children:(0,W.nk)(eI._('Highlighted by @{{ closeupAttributionUsername }}', 'comment.highlighted.label', 'label on comment that has been highlighted by the Pin creator'),{closeupAttributionUsername:A})})}),(!C||eB)&&(0,m.jsxs)(l.xu,{alignItems:"center",display:"flex",height:I?25:"100%",justifyContent:"between",position:"relative",children:[(0,m.jsxs)(l.kC,{alignItems:"center",gap:{row:5,column:0},children:[!C&&(0,m.jsx)(l.xu,{"data-test-id":"comments-time-passed",children:(0,m.jsx)(l.xv,{color:"subtle",size:"200",children:e$(ej,!0)})}),!C&&(!eo||eM)&&(0,m.jsx)(l.xu,{"data-test-id":"comment-reply-button-container",children:(0,m.jsx)(l.iP,{onTap:()=>{L&&L(w,R,D)},children:(0,m.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:eI._('Reply', 'comment.button.reply', 'entry point to reply to comment')})})}),!C&&!eo&&(!eK||eQ||eX)&&(I?(0,m.jsx)(G,{commentId:e_,dismissReactionList:()=>{Z(void 0)},helpfulCount:eg,isLovedByMe:ev,isMarkedHelpfulByMe:ek,isReactionListOpen:ei===e_,isTry:eK,lovedCount:eA,onReactionCountHover:()=>{Z(e_),eC({event_type:9906,component:"pin"===D?13696:13697,view_type:3,view_parameter:es})},onToggleHelpful:e=>()=>{ek!==e&&N(e_,!e,eK)()},onToggleLove:e=>()=>{ev!==e&&U(e_,!e,eK)()}}):(0,m.jsxs)(l.xu,{alignItems:"center","data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,m.jsx)(l.hU,{accessibilityLabel:eI._('Like', 'comment.button.like', 'like or unlike comment'),icon:"heart",iconColor:ev?"red":"gray",onClick:U(e_,ev,eK),size:"xs"}),eA>0&&(0,m.jsx)(l.xu,{"data-test-id":"love-count-container",children:(0,m.jsx)(l.xv,{color:"subtle",size:"100",weight:"bold",children:eA})})]})),!(eT.id===er&&eZ)&&(!eo||eM)&&(0,m.jsx)(l.xu,{ref:eO,"data-test-id":"comment-more-options",children:(0,m.jsx)(l.hU,{accessibilityLabel:eI._('More', 'comment.button.more', 'see more options for comment'),icon:"ellipsis",iconColor:"gray",onClick:()=>{I?e7(!e9):S&&S(w)},size:"xs"})})]}),!C&&!eo&&!I&&(!eK||eX)&&(0,m.jsx)(l.xu,{marginStart:6,children:(0,m.jsx)(l.iP,{fullWidth:!1,onTap:N(e_,ek,eK),children:(0,m.jsxs)(l.kC,{alignItems:"center",dataTestId:"helpful-reaction",gap:{row:1,column:0},height:"100%",children:[(0,m.jsx)(h,{color:"subtle",isMarkedHelpful:ek}),(0,m.jsx)(l.xv,{color:"subtle",size:"200",weight:"bold",children:eI._('Helpful', 'comment.button.helpful', 'mark or unmark comment as helpful')}),eg>0&&(0,m.jsx)(l.xu,{"data-test-id":"helpful-count-container",children:(0,m.jsx)(l.xv,{color:"subtle",size:"100",weight:"bold",children:eg})})]})})})]})]})]}),I&&(0,m.jsxs)(i.Fragment,{children:[e2&&(0,m.jsx)(l.xu,{marginTop:3,children:(0,m.jsx)(H.Z,{commentWarningModalState:ts,dismissCommentWarningModal:tu,initialTags:w.tags,initialText:"aggregatedcomment"===w.type?w.text:w.details,isReplyEditor:tc,objectType:Q.o.aggregatedComment,onAddItem:tm,onCancelItem:ta(!1),postedPhoto:t,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:es})}),B===e_&&(0,m.jsx)(l.xu,{marginStart:tr?0:12,marginTop:3,children:(0,m.jsx)(H.Z,{commentWarningModalState:ts,dismissCommentWarningModal:tu,initialTags:tr?[{offset:0,object_id:en,length:td.length,tag_type:1}]:[],initialText:tr?`${td} `:"",isReplyEditor:tc,objectType:Q.o.aggregatedComment,onAddItem:t_,onCancelItem:()=>{L&&L()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:es})})]}),(eu>0||e5)&&(0,m.jsx)(l.xu,{marginStart:12,marginTop:4,children:(0,m.jsx)(q,{aggregatedPinDataId:o,closeupAttributionId:u,closeupAttributionUsername:A,featuredCommentId:j,isDesktop:I,isLoading:e5,isORBACProfileManager:eo,isReadOnly:C,isVideo:E,openOverflowMenu:S,parentId:e_,parentType:w.type,pinId:O,pinnerId:el,reactionListCommentId:ei,replyingToCommentId:B,showReactionListForComment:Z,storyPinDataId:M,toggleHelpful:N,toggleLike:U,toggleReplyComposer:L,viewParameter:es})}),I&&(!C||eB)&&(0,m.jsx)(T,{aggregatedPinDataId:o,anchor:eO.current,closeupAttributionId:u,comment:w,dismiss:e=>{e7(!1),e||eC({component:14349,event_type:10128})},isOpen:e9,isReply:tr,onEdit:ta(!0),onShowBlockUserModal:th(!0),parentId:R,pinId:O,pinnerId:el}),tt&&(0,m.jsx)(r.N,{children:(0,m.jsx)(c.Z,{aggregatedPinDataId:o,didItDataId:e_,onClose:e=>()=>{to(!e)},pinId:O??"",username:ed,users:[w.user]})}),tl&&(0,m.jsx)(ee.Z,{firstName:ea??"",onBlockUser:()=>{eD((0,et.Ge)({id:en,orbacSubjectId:eU,blockSource:"comment",blockContext:e_,logContextEvent:eC})),eG(en),eF(en),eC({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eT.isAuth?eT.id:null}}),eC({component:14349,event_type:9407}),ti(!1),eR(({hideToast:e})=>(0,m.jsx)(f.ZP,{onHide:e,text:(0,W.nk)(eI._('You\'ve blocked {{ username }}', 'comment.blockAuthor.toast', 'confirmation toast that shows after user blocks comment author'),{username:ed}).join("")}))},onClearModal:th(!1)})]})}var el=o(666472);function ei(e){let t;let{aggregatedPinDataId:o,comments:i,commentsDisabled:s,featuredCommentId:n,gapSize:a=6,isDesktop:r,isLoaded:c=!1,isLoading:d=!1,isReadOnly:h,openOverflowMenu:u,toggleReplyComposer:p,parentId:f,parentType:y,replyingToCommentId:b,toggleHelpful:P,toggleLike:A,userAvatarSize:v,isORBACProfileManager:k,isVideo:z,storyPinDataId:w,pinId:j,closeupAttributionId:I,closeupAttributionUsername:T,pinnerId:C,showReactionListForComment:E,reactionListCommentId:S,viewParameter:L}=e,R=(0,_.ZP)(),{checkExperiment:D}=(0,x.F)(),O=D("ce_dweb_comment_feed_redesign").anyEnabled,M=r&&O?(0,g.mz)(R):R._('No comments yet! Add one to start the conversation.', 'commentThread.emptyState.message', 'comment thread empty state message');return(t=w?"story":z?"video":"pin",s)?(0,m.jsx)(l.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",width:"100%",children:(0,m.jsx)(l.xv,{align:r?"start":"center",color:"subtle",children:R._('Comments are turned off for this Pin', 'commentThread.disabledState.message', 'Comments are turned off or disabled for this pin')})}):i.length>0?(0,m.jsxs)(l.kC,{dataTestId:"aggregated-comment-list",direction:"column",gap:{row:0,column:a},maxHeight:"100%",width:"100%",children:[i.map((e,i)=>(0,m.jsx)(el.F,{componentType:"pin"===y?13696:13697,impressionAuxFields:{commentId:e.id,pinId:j,pinOwnerUserId:I,pinType:t,parentId:f,parentType:y,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:i,viewType:r?3:98,children:({impressionTrackerRef:t})=>(0,m.jsx)(l.xu,{ref:t,"data-test-id":"commentThread-comment",children:(0,m.jsx)(eo,{aggregatedPinDataId:o,closeupAttributionId:I,closeupAttributionUsername:T,comment:e,featuredCommentId:n,isDesktop:r,isORBACProfileManager:k,isReadOnly:h,isVideo:z,openOverflowMenu:u,parentId:f,parentType:y,pinId:j,pinnerId:C,reactionListCommentId:S,replyingToCommentId:b,showReactionListForComment:E,storyPinDataId:w,toggleHelpful:P,toggleLike:A,toggleReplyComposer:p,userAvatarSize:v,viewParameter:L})})},e.id)),(0,m.jsx)(l.$j,{accessibilityLabel:R._('Comments loading', ' - ', ' -- '),show:d})]}):(0,m.jsxs)(l.xu,{alignSelf:"center",width:"100%",children:[(0,m.jsx)(l.$j,{accessibilityLabel:R._('Comments loading', ' - ', ' -- '),show:d}),c&&(0,m.jsx)(l.xv,{align:r?"start":"center",color:"subtle",children:M})]})}},53264:(e,t,o)=>{o.d(t,{Z:()=>a});var l=o(667294),i=o(14583),s=o(785893);let n=(0,l.lazy)(()=>Promise.all([o.e(63349),o.e(97239)]).then(o.bind(o,589773)));function a(e){return(0,s.jsx)(i.Z,{fallback:null,children:(0,s.jsx)(n,{...e})})}},717203:(e,t,o)=>{o.d(t,{Z:()=>h,w:()=>u});var l=o(339001);let i=e=>e._('{{ first }}', 'Generic message that lists 1 item', 'Generic message that lists 1 item (ex: Stevie)'),s=e=>e._('{{ first }} and {{ second }}', 'Generic message that lists 2 items', 'Generic message that lists 2 items (ex: Stevie and Michael)'),n=e=>e._('{{ first }}, {{ second }} and {{ third }}', 'Generic message that lists 3 items', 'Generic message that lists 3 items (ex: Stevie, Michael and Cyndi)'),a=e=>e._('{{ first }}, {{ second }}, {{ third }} and {{ fourth }}', 'Generic message that lists 4 items', 'Generic message that lists 4 items (ex: Stevie, Michael, Cyndi and Bob)'),r=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }} and {{ fifth }}', 'Generic message that lists 5 items', 'Generic message that lists 5 items (ex: Stevie, Michael, Cyndi, Bob and Bruce)'),c=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ sixth }}', 'Generic message that lists 6 items', 'Generic message that lists 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and Lionel)'),d=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ seventh }}', 'Generic message that lists 7 items', 'Generic message that lists 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and Tina)'),_=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }} and {{ remaining }} others', 'Generic message that lists more than 6 items', 'Generic message that lists more than 6 items (ex: Stevie, Michael, Cyndi, Bob, Bruce and 2 others)'),m=e=>e._('{{ first }}, {{ second }}, {{ third }}, {{ fourth }}, {{ fifth }}, {{ sixth }} and {{ remaining }} others', 'Generic message that lists more than 7 items', 'Generic message that lists more than 7 items (ex: Stevie, Michael, Cyndi, Bob, Bruce, Lionel and 2 others)');function h(e,t){let o={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],remaining:e.length-5};switch(e.length){case 0:return[];case 1:return(0,l.nk)(i(t),o);case 2:return(0,l.nk)(s(t),o);case 3:return(0,l.nk)(n(t),o);case 4:return(0,l.nk)(a(t),o);case 5:return(0,l.nk)(r(t),o);case 6:return(0,l.nk)(c(t),o);default:return(0,l.nk)(_(t),o)}}function u(e,t){let o={first:e[0],second:e[1],third:e[2],fourth:e[3],fifth:e[4],sixth:e[5],seventh:e[6],remaining:e.length-6};switch(e.length){case 0:return[];case 1:return(0,l.nk)(i(t),o);case 2:return(0,l.nk)(s(t),o);case 3:return(0,l.nk)(n(t),o);case 4:return(0,l.nk)(a(t),o);case 5:return(0,l.nk)(r(t),o);case 6:return(0,l.nk)(c(t),o);case 7:return(0,l.nk)(d(t),o);default:return(0,l.nk)(m(t),o)}}},190971:(e,t,o)=>{o.d(t,{c:()=>_});var l=o(667294),i=o(616550),s=o(179370),n=o(96157),a=o(624797),r=o(554786);let c=(e,t)=>((0,n.XU)(e)&&e.state?.from&&(e=e.state.from),(0,n.HV)(e))?t?1000503:1000558:(0,n.En)(e)?t?1000506:1000559:(0,n.L6)(e)?t?1000141:1000494:void 0,d=(e,t)=>{if(t){if((0,n.HV)(e))return 1000541;if((0,n.En)(e))return 1000542;if((0,n.L6)(e))return 1000140}else if((0,n.HV)(e))return 1000544;else if((0,n.En)(e))return 1000543;else if((0,n.L6)(e))return 1000540},_=()=>{let{mountPlacement:e,registerdAfterActionPlacements:t}=(0,s.M)(),o=(0,r.HG)(),_=(0,i.TH)(),m=(0,l.useCallback)((l,i,s)=>{let r;switch(l){case"Save":r=c(_,o);break;case"Download":(0,n.L6)(_)&&(r=o?1000499:1000500);break;case"Clickthrough":r=d(_,o)}null!=r&&((0,n.En)(_)&&(i={...i,search_query:(0,a.mB)(_.search)}),null!=r&&(t[r]||(0,n.XU)(_))&&e(r,i,s))},[t,e,_,o]);return m}},35222:(e,t,o)=>{o.d(t,{Z:()=>n});var l=o(149722),i=o(785059),s=o(199677);let n=()=>{let e=(0,l.Z)(),t=(0,i.Z)(),o=(0,s.lJ)(e,t);return o}},861748:(e,t,o)=>{o.d(t,{Z:()=>w,w:()=>A});var l,i=o(667294),s=o(702664);o(167912);var n=o(616550),a=o(442279),r=o(883119),c=o(139922),d=o(333739),_=o(995917),m=o(554786),h=o(494125),u=o(149722),g=o(415199),p=o(413110),f=o(110155),x=o(930822),y=o(937310),b=o(386008),P=o(785893);let A=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:o,isDesktop:l,isReversed:i=!1,noCache:s=!1})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:o,page_size:l?10:25,redux_normalize_feed:!0,is_reversed:i},noCache:s}),v=(0,a.P1)((e,t,o)=>o,({feeds:e},t)=>e[`${y.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,t,o,l)=>l,(e,t,o,l)=>t?.map(({id:t,type:i})=>{let s="aggregatedcomment"===i.toLowerCase()?e[t]:o[t];if(!s)return;let n="string"==typeof s.user?l[s.user]??{}:s.user??{};return{...s,user:n??{}}}).filter(e=>e)||[]),k=void 0!==l?l:l=o(346035),z=({aggregatedPinDataId:e,closeupAttributionId:t,closeupAttributionUsername:o,commentsDisabled:l,hasComments:a,isReadOnly:d,pinId:y,isVideo:k,pinnerId:z,scrollContainer:w,setIsComposingNewComment:j=()=>{},storyPinDataId:I,viewParameter:T,toggleComposerForReply:C,openMwebOverflowMenu:E})=>{let{comment_id:S}=(0,n.UO)(),L=(0,s.useDispatch)(),R=(0,m.HG)(),D=(0,u.Z)(),O=(0,i.useRef)(a),M=(0,_.Z)(O.current&&e?A({aggregatedPinDataId:e,featuredCommentIds:S?[S]:[],isDesktop:R}):null),{removeUnauthCommentPinId:B,unauthCommentPinId:Z}=(0,f.C)(),N=(0,g.lV)(),{toggleAggregatedCommentHelpful:U,toggleAggregatedCommentLike:F}=(0,g.nf)(),G=(0,b.kW)(),H=(0,s.useSelector)(t=>v(t,e,N,G)),[W,q]=(0,i.useState)(void 0),K=()=>{j(!0)};return(0,h.Z)(()=>{!R&&D.isAuth&&Z&&y&&Z===y&&(K(),B())}),(0,i.useEffect)(()=>{let e=()=>{let t=!!w&&w.scrollTop+w.clientHeight+10>=w.scrollHeight;M&&!M.isFetching&&(M.isAtEnd?w?.removeEventListener("scroll",e):t&&M.fetchMore())};return w?.addEventListener("scroll",e),()=>{w?.removeEventListener("scroll",e)}},[M,w]),(0,P.jsx)(i.Fragment,{children:(0,P.jsx)(r.xu,{display:"flex",marginTop:R?6:0,width:"100%",children:(0,P.jsx)(c.Z,{aggregatedPinDataId:e,closeupAttributionId:t,closeupAttributionUsername:o,comments:H,commentsDisabled:l,isDesktop:R,isLoaded:M&&M.isLoaded||!a,isReadOnly:d,isVideo:k,openOverflowMenu:E,parentId:e??"",parentType:p.o.pin,pinId:y,pinnerId:z,reactionListCommentId:W,showReactionListForComment:q,storyPinDataId:I,toggleHelpful:(e,t,o)=>()=>{o?L((0,x.YH)({didItDataId:e,isMarkedHelpfulByMe:t})):U({aggregatedCommentId:e,isMarkedHelpfulByMe:t})},toggleLike:(e,t,o)=>()=>{o?L((0,x.wH)({didItDataId:e,isLikedByMe:t})):F({aggregatedCommentId:e,isLikedByMe:t})},toggleReplyComposer:C,userAvatarSize:"sm",viewParameter:T})})})};function w({pinKey:e,...t}){let{data:o}=(0,d.sr)(k,e,{type:"pin",useLegacyAdapter:e=>({aggregatedPinData:e.aggregated_pin_data&&{commentCount:e.aggregated_pin_data.comment_count,didItData:e.aggregated_pin_data.did_it_data&&{imagesCount:e.aggregated_pin_data.did_it_data.images_count},entityId:e.aggregated_pin_data.id??""},closeupAttribution:e.closeup_attribution&&{entityId:e.closeup_attribution.id??"",username:e.closeup_attribution.username},commentsDisabled:e.comments_disabled,doneByMe:e.done_by_me,entityId:e.id,pinner:e.pinner&&{entityId:e.pinner.id},storyPinData:e.story_pin_data&&{entityId:e.story_pin_data.id??""},videos:e.videos&&{videoList:e.videos.video_list&&{__typename:"VideoList"}}})}),l=(o?.aggregatedPinData?.commentCount||0)+(o?.aggregatedPinData?.didItData?.imagesCount||0);return(0,P.jsx)(z,{aggregatedPinDataId:o?.aggregatedPinData?.entityId,closeupAttributionId:o?.closeupAttribution?.entityId,closeupAttributionUsername:o?.closeupAttribution?.username,commentsDisabled:o?.commentsDisabled,disablePhotoCommentSelection:!!o?.doneByMe,hasComments:l>0&&!o?.commentsDisabled,isVideo:!!o?.videos?.videoList,pinId:o?.entityId,pinnerId:o?.pinner?.entityId,storyPinDataId:o?.storyPinData?.entityId,...t})}},110155:(e,t,o)=>{o.d(t,{C:()=>a,p:()=>r});var l=o(667294),i=o(342513),s=o(785893);let{Provider:n,useHook:a}=(0,i.Z)("Session");function r({children:e}){let[t,o]=(0,l.useState)(void 0),i=(0,l.useCallback)(()=>o(void 0),[]),a=(0,l.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:o,removeUnauthCommentPinId:i}),[t,i]);return(0,s.jsx)(n,{value:a,children:e})}},291867:(e,t,o)=>{o.d(t,{Q:()=>s,a:()=>i});var l=o(107366);function i(e,t){return async o=>{let{resource_response:i}=await (0,l.Z)({url:`/v3/storypins/${e}/mentions/`,method:"DELETE"});return o({type:"DELETE_PIN_MENTION",payload:{pinId:e,userId:t}}),i}}function s(e){return async t=>{let{resource_response:o}=await (0,l.Z)({url:`/v3/aggregated_comments/${e}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),{data:i}=o;return t({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:i.id,tagged_users:i.tagged_users}}),o}}},311716:e=>{e.exports="https://s.pinimg.com/webapp/commentHelpful-99007872.svg"},600636:e=>{e.exports="https://s.pinimg.com/webapp/commentHelpfulOutline-7f59f782.svg"},559113:e=>{e.exports="https://s.pinimg.com/webapp/commentLoved-7942dc4f.svg"},133758:e=>{e.exports="https://s.pinimg.com/webapp/commentLovedOutline-97205606.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/37434-f58370f888c02e9e.mjs.map