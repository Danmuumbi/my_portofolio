(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[14865,37348],{496998:(e,t,a)=>{"use strict";a.d(t,{wO:()=>D,S0:()=>A,iR:()=>G,OF:()=>K});var i=a(542473),n=a.n(i),l=a(667294),r=Math.sqrt(50),s=Math.sqrt(10),o=Math.sqrt(2);function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach(function(t){var i;i=a[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function c(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function p(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,a){return t&&p(e.prototype,t),a&&p(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,i=m(e);if(t){var n=m(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return y(e)}(this,a)}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a,i,n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var l=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return l}}(e,t)||b(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}var w="react-compound-slider:";function k(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,a){return t.val>a.val?e?-1:1:a.val>t.val?e?1:-1:0}}function P(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=e.findIndex(function(e){return e.key===t});if(-1!==n){var l=e[n],r=l.key;return l.val===a?e:[].concat(x(e.slice(0,n)),[{key:r,val:a}],x(e.slice(n+1))).sort(k(i))}return e}function F(e,t){if(!e)return[0,0];var a=e.getBoundingClientRect();return[t?a.top:a.left,t?a.bottom:a.right]}function T(e){var t=e.type,a=e.touches;return!a||a.length>1||"touchend"===(void 0===t?"":t).toLowerCase()&&a.length>0}function j(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=0;return{handles:e.map(function(e){var t=a.getValue(e);return e!==t&&(l+=1,n()(!i,"".concat(w," Invalid value encountered. Changing ").concat(e," to ").concat(t,"."))),t}).map(function(e,t){return{key:"$$-".concat(t),val:e}}).sort(k(t)),changes:l}}function C(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.forEach(function(t){return t&&t(e)})}}var E=function(){return{value:0,percent:0}},A=function(e){h(a,e);var t=f(a);function a(){var e;c(this,a);for(var i=arguments.length,n=Array(i),l=0;l<i;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getRailProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.props,i=a.emitMouse,n=a.emitTouch;return d(d({},t),{},{onMouseDown:C(t&&t.onMouseDown,i),onTouchStart:C(t&&t.onTouchStart,n)})},e}return g(a,[{key:"render",value:function(){var e=this.getRailProps,t=this.props,a=t.getEventData,i=t.activeHandleID,n=(0,t.children)({getEventData:a||E,activeHandleID:void 0===i?"":i,getRailProps:e});return n&&l.Children.only(n)}}]),a}(l.Component),D=function(e){h(a,e);var t=f(a);function a(){var e;c(this,a);for(var i=arguments.length,n=Array(i),l=0;l<i;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).autofocus=function(e){e.target instanceof HTMLElement&&e.target.focus()},e.getHandleProps=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.props,n=i.emitKeyboard,l=i.emitMouse,r=i.emitTouch;return d(d({},a),{},{onKeyDown:C(a&&a.onKeyDown,function(e){return n&&n(e,t)}),onMouseDown:C(a&&a.onMouseDown,e.autofocus,function(e){return l&&l(e,t)}),onTouchStart:C(a&&a.onTouchStart,function(e){return r&&r(e,t)})})},e}return g(a,[{key:"render",value:function(){var e=this.getHandleProps,t=this.props,a=t.activeHandleID,i=t.children,n=t.handles,r=i({handles:void 0===n?[]:n,activeHandleID:void 0===a?"":a,getHandleProps:e});return r&&l.Children.only(r)}}]),a}(l.Component),Z=function(){function e(){c(this,e),this.interpolator=void 0,this.domain=[0,1],this.range=[0,1],this.domain=[0,1],this.range=[0,1],this.interpolator=null}return g(e,[{key:"createInterpolator",value:function(e,t){var a=this,i=e[0],n=e[1],l=t[0],r=t[1];return n<i?function(e){return a.interpolateValue(r,l)(a.deinterpolateValue(n,i)(e))}:function(e){return a.interpolateValue(l,r)(a.deinterpolateValue(i,n)(e))}}},{key:"interpolateValue",value:function(e,t){return t-=e=+e,function(a){return e+t*a}}},{key:"deinterpolateValue",value:function(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:function(){return t}}},{key:"rescale",value:function(){return this.interpolator=null,this}},{key:"getValue",value:function(e){var t=this.domain,a=this.range;return(this.interpolator||(this.interpolator=this.createInterpolator(t,a)))(+e)}},{key:"setDomain",value:function(e){return this.domain=[e[0],e[1]],this.rescale(),this}},{key:"getDomain",value:function(){return this.domain}},{key:"setRange",value:function(e){return this.range=[e[0],e[1]],this}},{key:"getRange",value:function(){return this.range}},{key:"getTicks",value:function(e){var t=this.domain;return function(e,t,a){var i,n,l,u,d,c,p,g=-1;if(a=+a,(e=+e)==(t=+t)&&a>0)return[e];if((u=t<e)&&(d=e,e=t,t=d),0==(n=Math.floor(Math.log(i=(t-e)/Math.max(0,a))/Math.LN10),l=i/Math.pow(10,n),p=n>=0?(l>=r?10:l>=s?5:l>=o?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(l>=r?10:l>=s?5:l>=o?2:1))||!isFinite(p))return[];if(p>0){let a=Math.round(e/p),i=Math.round(t/p);for(a*p<e&&++a,i*p>t&&--i,c=Array(d=i-a+1);++g<d;)c[g]=(a+g)*p}else{let a=Math.round(e*(p=-p)),i=Math.round(t*p);for(a/p<e&&++a,i/p>t&&--i,c=Array(d=i-a+1);++g<d;)c[g]=(a+g)/p}return u&&c.reverse(),c}(t[0],t[t.length-1],e||10)}}]),e}(),L=function(){return{value:0,percent:0}},R=function(e){h(a,e);var t=f(a);function a(){return c(this,a),t.apply(this,arguments)}return g(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.values,i=e.scale,n=void 0===i?new Z:i,r=e.count,s=e.getEventData,o=e.activeHandleID,u=t({getEventData:void 0===s?L:s,activeHandleID:void 0===o?"":o,ticks:(a||n.getTicks(void 0===r?10:r)).map(function(e){return{id:"$$-".concat(e),value:e,percent:n.getValue(e)}})});return u&&l.Children.only(u)}}]),a}(l.Component),O=function(){return{value:0,percent:0}},K=function(e){h(a,e);var t=f(a);function a(){var e;c(this,a);for(var i=arguments.length,n=Array(i),l=0;l<i;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).getTrackProps=function(t){var a=e.props,i=a.emitMouse,n=a.emitTouch;return d(d({},t||{}),{},{onMouseDown:C(t&&t.onMouseDown,i),onTouchStart:C(t&&t.onTouchStart,n)})},e}return g(a,[{key:"render",value:function(){for(var e=this.getTrackProps,t=this.props,a=t.children,i=t.left,n=void 0===i||i,r=t.right,s=void 0===r||r,o=t.scale,u=void 0===o?new Z:o,d=t.handles,c=void 0===d?[]:d,p=t.getEventData,g=t.activeHandleID,h=u.getDomain(),m=[],_=0;_<c.length+1;_++){var y=c[_-1],f=c[_];0===_&&!0===n?y={id:"$",value:h[0],percent:0}:_===c.length&&!0===s&&(f={id:"$",value:h[1],percent:100}),y&&f&&m.push({id:"".concat(y.id,"-").concat(f.id),source:y,target:f})}var v=a({getEventData:void 0===p?O:p,activeHandleID:void 0===g?"":g,tracks:m,getTrackProps:e});return v&&l.Children.only(v)}}]),a}(l.Component);function M(e,t,a){return Math.min(Math.max(e,t),a)}var N=g(function e(){var t=this;c(this,e),this.step=1,this.domain=[0,1],this.range=[0,1],this.setDomain=function(e){return t.domain=[e[0],e[1]],t},this.setRange=function(e){return t.range=[e[0],e[1]],t},this.setStep=function(e){return t.step=e,t},this.getValue=function(e){var a=v(t.domain,2),i=a[0],n=a[1],l=v(t.range,2),r=l[0],s=l[1],o=t.step,u=o*Math.round((M(e,i,n)-i)/(n-i)*(s-r)/o)+r;return M(u,r<s?r:s,s>r?s:r)}}),z="undefined"!=typeof window&&"undefined"!=typeof document,H=function(){},U=function(e){if(!(0,l.isValidElement)(e))return!1;var t=e.type,a=t?t.name:"";return a===D.name||a===A.name||a===R.name||a===K.name},V=function(e,t,a,i){var n=i?e-t:e+t;return i?Math.max(a[0],n):Math.min(a[1],n)},$=function(e,t,a,i){var n=i?e+t:e-t;return i?Math.min(a[1],n):Math.max(a[0],n)},B=[0,100],G=function(e){h(a,e);var t=f(a);function a(){var e;c(this,a);for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))).state={step:.1,values:[],domain:B,handles:[],reversed:!1,activeHandleID:"",valueToPerc:null,valueToStep:null,pixelToStep:null},e.slider=l.createRef(),e.onKeyDown=function(t,a){var i=["ArrowRight","ArrowUp"],n=["ArrowDown","ArrowLeft"],l=y(e),r=l.state.handles,s=l.props,o=s.step,u=void 0===o?.1:o,d=s.reversed,c=void 0!==d&&d,p=s.vertical,g=s.domain,h=void 0===g?[0,100]:g,m=t.key||"".concat(t.keyCode);if(i.concat(n).includes(m)){if(void 0!==p&&p){var _=[n,i];i=_[0],n=_[1]}t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var f=r.find(function(e){return e.key===a});if(f){var v=f.val,x=v;i.includes(m)?x=V(v,u,h,c):n.includes(m)&&(x=$(v,u,h,c));var b=r.map(function(e){return e.key===a?{key:e.key,val:x}:e});e.submitUpdate(b,!0)}}},e.onMouseDown=function(t,a){e.onStart(t,a,!1)},e.onTouchStart=function(t,a){T(t)||e.onStart(t,a,!0)},e.getEventData=function(t,a){var i,n=y(e),l=n.state,r=l.pixelToStep,s=l.valueToPerc,o=n.props.vertical;return r.setDomain(F(e.slider.current,o)),a&&t instanceof TouchEvent?i=r.getValue(j(o,t)):t instanceof MouseEvent&&(i=r.getValue(o?t.clientY:t.pageX)),{value:i,percent:s.getValue(i)}},e.onMouseMove=function(t){var a=y(e),i=a.state,n=i.handles,l=i.pixelToStep,r=i.activeHandleID,s=void 0===r?"":r,o=a.props,u=o.vertical,d=o.reversed,c=void 0!==d&&d;l.setDomain(F(e.slider.current,u));var p=P(n,s,l.getValue(u?t.clientY:t.pageX),c);e.submitUpdate(p)},e.onTouchMove=function(t){var a=y(e),i=a.state,n=i.handles,l=i.pixelToStep,r=i.activeHandleID,s=a.props,o=s.vertical,u=s.reversed;if(!(null===l||T(t))){l.setDomain(F(e.slider.current,o));var d=P(n,r,l.getValue(j(o,t)),u);e.submitUpdate(d)}},e.onMouseUp=function(){var t=y(e),a=t.state,i=a.handles,n=void 0===i?[]:i,l=a.activeHandleID,r=t.props,s=r.onChange,o=void 0===s?H:s,u=r.onSlideEnd,d=void 0===u?H:u;o(n.map(function(e){return e.val})),d(n.map(function(e){return e.val}),{activeHandleID:l}),e.setState({activeHandleID:""}),z&&(document.removeEventListener("mousemove",e.onMouseMove),document.removeEventListener("mouseup",e.onMouseUp))},e.onTouchEnd=function(){var t=y(e),a=t.state,i=a.handles,n=a.activeHandleID,l=t.props,r=l.onChange,s=void 0===r?H:r,o=l.onSlideEnd,u=void 0===o?H:o;s(i.map(function(e){return e.val})),u(i.map(function(e){return e.val}),{activeHandleID:n}),e.setState({activeHandleID:""}),z&&(document.removeEventListener("touchmove",e.onTouchMove),document.removeEventListener("touchend",e.onTouchEnd))},e}return g(a,[{key:"componentDidMount",value:function(){var e=this.state.pixelToStep,t=this.props.vertical;e.setDomain(F(this.slider.current,t))}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"removeListeners",value:function(){z&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"onStart",value:function(e,t,a){var i=this.state.handles,n=this.props.onSlideStart,l=void 0===n?H:n;!a&&e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),i.find(function(e){return e.key===t})?(this.setState({activeHandleID:t}),l(i.map(function(e){return e.val}),{activeHandleID:t}),a?this.addTouchEvents():this.addMouseEvents()):(this.setState({activeHandleID:""}),this.handleRailAndTrackClicks(e,a))}},{key:"handleRailAndTrackClicks",value:function(e,t){var a,i=this,n=this.state,l=n.handles,r=n.pixelToStep,s=this.props,o=s.vertical,u=s.reversed,d=void 0!==u&&u,c=this.slider;r.setDomain(F(c.current,o)),a=t?r.getValue(j(o,e)):r.getValue(o?e.clientY:e.pageX);for(var p="",g=1/0,h=0;h<l.length;h++){var m=l[h],_=m.key,y=Math.abs(m.val-a);y<g&&(p=_,g=y)}var f=P(l,p,a,d);this.setState({activeHandleID:p},function(){i.submitUpdate(f,!0),t?i.addTouchEvents():i.addMouseEvents()})}},{key:"addMouseEvents",value:function(){z&&(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}},{key:"addTouchEvents",value:function(){z&&(document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd))}},{key:"submitUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.props,i=a.mode,l=void 0===i?1:i,r=a.step,s=void 0===r?.1:r,o=a.onUpdate,u=void 0===o?H:o,d=a.onChange,c=void 0===d?H:d,p=a.reversed,g=void 0!==p&&p,h=this.state.valueToStep.getValue;this.setState(function(a){var i=a.handles,r=[];if("function"==typeof l)r=l(i,e,s,g,h),n()(Array.isArray(r),"Custom mode function did not return an array.");else switch(l){case 1:r=e;break;case 2:r=function(e,t){for(var a=0;a<e.length;a++)if(e[a].key!==t[a].key||t[a+1]&&t[a].val===t[a+1].val)return e;return t}(i,e);break;case 3:r=function e(t,a,i,n,l){for(var r=-1,s=!0,o=0;o<t.length;o++){var u=t[o],d=a[o];if(!d||d.key!==u.key)return t;d.val!==u.val&&(r=o,s=d.val-u.val>0)}if(-1===r)return t;for(var c=s?i:-i,p=0;p<a.length;p++){var g=a[p],h=a[p+1];if(h&&g.val===h.val){if(p===r){var m=h.val+c;if(l(m)!==m)return t;var _=P(a,h.key,h.val+c,n),y=e(a,_,i,n,l);if(y===a)return t;return y}var f=g.val+c;if(l(f)!==f)return t;var v=P(a,g.key,g.val+c,n),x=e(a,v,i,n,l);if(x===a)return t;return x}}return a}(i,e,s,g,h);break;default:r=e,n()(!1,"".concat(w," Invalid mode value."))}return u(r.map(function(e){return e.val})),t&&c(r.map(function(e){return e.val})),{handles:r}})}},{key:"render",value:function(){var e=this,t=this.state,a=t.handles,i=t.valueToPerc,n=t.activeHandleID,r=this.props,s=r.className,o=r.rootStyle,u=void 0===o?{}:o,c=r.rootProps,p=void 0===c?{}:c,g=r.component,h=void 0===g?"div":g,m=r.disabled,_=void 0!==m&&m,y=r.flatten,f=a.map(function(e){var t=e.key,a=e.val;return{id:t,value:a,percent:i.getValue(a)}}),v=l.Children.map(this.props.children,function(t){return!0===U(t)?l.cloneElement(t,{scale:i,handles:f,activeHandleID:n,getEventData:e.getEventData,emitKeyboard:_?H:e.onKeyDown,emitMouse:_?H:e.onMouseDown,emitTouch:_?H:e.onTouchStart}):t});return void 0!==y&&y?l.createElement(l.Fragment,null,l.createElement(h,d(d({},p),{},{style:u,className:s,ref:this.slider})),v):l.createElement(l.Fragment,null,l.createElement(h,d(d({},p),{},{style:u,className:s,ref:this.slider}),v))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a,i,l=e.step,r=void 0===l?.1:l,s=e.values,o=e.domain,u=void 0===o?B:o,d=e.reversed,c=void 0!==d&&d,p=e.onUpdate,g=void 0===p?H:p,h=e.onChange,m=void 0===h?H:h,_=e.warnOnChanges,y=void 0!==_&&_,f=t.valueToPerc,b=t.valueToStep,S=t.pixelToStep,k={};if(f&&b&&S||(f=new Z,b=new N,S=new N,k.valueToPerc=f,k.valueToStep=b,k.pixelToStep=S),t.domain===B||null===t.step||null===t.domain||null===t.reversed||r!==t.step||u[0]!==t.domain[0]||u[1]!==t.domain[1]||c!==t.reversed){var P=v(u,2),F=P[0],T=P[1];b.setStep(r).setRange([F,T]).setDomain([F,T]),!0===c?(f.setDomain([F,T]).setRange([100,0]),S.setStep(r).setRange([T,F])):(f.setDomain([F,T]).setRange([0,100]),S.setStep(r).setRange([F,T])),n()(T>F,"".concat(w," Max must be greater than min (even if reversed). Max is ").concat(T,". Min is ").concat(F,"."));var j=I(s||t.values,c,b,y),C=j.handles;(j.changes||void 0===s||s===t.values)&&(g(C.map(function(e){return e.val})),m(C.map(function(e){return e.val}))),k.step=r,k.values=s,k.domain=u===B?x(u):u,k.handles=C,k.reversed=c}else{if(!((a=s)===(i=t.values)||a.length===i.length&&a.reduce(function(e,t,a){return e&&i[a]===t},!0))){var E=I(s,c,b,y),A=E.handles;E.changes&&(g(A.map(function(e){return e.val})),m(A.map(function(e){return e.val}))),k.values=s,k.handles=A}}return Object.keys(k).length?k:null}}]),a}(l.PureComponent)},542473:e=>{"use strict";e.exports=function(){}},453364:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="610a35d46510240eb58e262c1909310c";let l=n},516658:(e,t,a)=>{"use strict";var i,n,l;a.r(t),a.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[l={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},l,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};r.hash="833cd5d58bc1ac105444aa923e882675";let s=r},394671:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightCropperContainer_pin",selections:[{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"}],type:"Pin",abstractKey:null};i.hash="0076d9d7f3a603762037e2b4fc289da9";let n=i},574223:(e,t,a)=>{"use strict";var i,n,l,r,s,o,u,d,c,p,g,h,m,_,y,f,v,x,b,S,w,k,P;a.r(t),a.d(t,{default:()=>T});let F=(i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],n=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},d={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},g={alias:"imageOrig",args:c=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},m={alias:"image736x",args:h=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"736x")'},y={alias:"image564x",args:_=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"564x")'},v={alias:"image474x",args:f=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"474x")'},b={alias:"image236x",args:x=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:p,storageKey:'images(spec:"236x")'},k={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:w=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:"additionalImageOrig",args:c,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S=[s,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:p,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:_,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:h,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:f,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:x,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:S,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[s,{alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"FlashlightPagePinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[l,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[r,s,o,u,d,g,m,y,v,b,k,P={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:w,storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"FlashlightPagePinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[r,s,o,u,d,g,m,y,v,b,k,P,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"2fbe7c612e0b9e55147a27059ea1cb52fb3420abce761a50d75549302dd620bd",metadata:{},name:"FlashlightPagePinQuery",operationKind:"query",text:null}});F.hash="3e072d3a492316c79a629968e8cd0a07";let T=F;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(F.default||F)},523395:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightPageWithData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useGetViewLog_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeedContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchProductFeedResourceContainer_pin"}],type:"Pin",abstractKey:null};i.hash="441dd25711a3b802422e6452b81c5c64";let n=i},163431:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightResultGrid_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null}],type:"Pin",abstractKey:null};i.hash="0e18466f59f891e9ea12d1c056d9f627";let n=i},853512:(e,t,a)=>{"use strict";var i,n,l,r,s,o,u,d,c,p,g,h,m,_,y,f,v,x,b,S,w,k,P,F;a.r(t),a.d(t,{default:()=>j});let T=(i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],n=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},d={alias:"imageOrig",args:o=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},p={alias:"image736x",args:c=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"736x")'},h={alias:"image564x",args:g=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"564x")'},_={alias:"image474x",args:m=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"474x")'},f={alias:"image236x",args:y=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"236x")'},v={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},x={alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[s,{alias:"imageOrig",args:o,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"orig")'},{alias:"image736x",args:c,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"736x")'},{alias:"image564x",args:g,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"564x")'},{alias:"image474x",args:m,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"474x")'},{alias:"image236x",args:y,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"236x")'}],storageKey:null},w={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:S=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:"additionalImageOrig",args:o,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b=[s,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:u,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:g,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:c,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:y,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:b,storageKey:'additionalImagesPerSpec(spec:"236x")'}],storageKey:null}],storageKey:null},k={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:S,storageKey:null},P={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},v,{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,d,p,h,_,f,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[v,x],storageKey:null},w,k,P],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,d,p,h,_,f,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[v,x,F={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},w,k,P,F],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"67eedd3e1834ee184411ff81c5eeea7cf9dc9ec53a5e099459966ce5369828ee",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});T.hash="1647166e8b02809a5f8ccfca2dc5019a";let j=T;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(T.default||T)},990563:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"UnifiedPinRep_pin"}],type:"Pin",abstractKey:null};i.hash="97621a830643ac50c2f15e7aa19a3b57";let n=i},567637:(e,t,a)=>{"use strict";var i;a.r(t),a.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RecipeMetadata_recipe",selections:[{alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"bestRating",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"reviewCount",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:i=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"prep",plural:!1,selections:i,storageKey:null}],storageKey:null}],type:"RecipeMetadata",abstractKey:null};n.hash="12f77507a9fdec344b44b7e659fa5ac1";let l=n},75306:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};i.hash="d3343cbed0df46adae9a256f0fc6f167";let n=i},170945:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPageWithData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useGetViewLog_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};i.hash="d15a6bdb0adf321a0753760cfe8cf4df";let n=i},728975:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeedContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};i.hash="fbc4e97721a1857d547952c6cf5a892d";let n=i},237583:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};i.hash="395dd0c72ba79e629fa9cf482a4b73d6";let n=i},23136:(e,t,a)=>{"use strict";var i,n,l,r,s,o,u,d,c,p,g,h,m,_,y,f,v,x,b,S,w,k,P,F,T,j,I,C,E,A,D,Z,L,R,O,K,M,N,z,H,U,V,$,B,G,W,Y,q,X,J,Q,ee,et,ea;a.r(t),a.d(t,{default:()=>en});let ei=(i=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],n=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},v={alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[y={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},x={alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},P=[b={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null}],F=[l,b,S,w,k],T={alias:null,args:null,kind:"ScalarField",name:"imageThumbnailUrl",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},Z={alias:"imageOrig",args:I=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:D=[C={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},f,E={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null}],storageKey:'images(spec:"orig")'},R={alias:"image564x",args:L=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:D,storageKey:'images(spec:"564x")'},K={alias:"image736x",args:O=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:D,storageKey:'images(spec:"736x")'},N={alias:"image474x",args:M=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:D,storageKey:'images(spec:"474x")'},H={alias:"image236x",args:z=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:D,storageKey:'images(spec:"236x")'},U={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},V={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"inStock",storageKey:null}],storageKey:null},B={alias:"additionalImageOrig",args:I,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:$=[r,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:[A,f,C],storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},X={alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null},J={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[s,d,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[y,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[y,E],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[y,V,B,G={alias:"additionalImage564x",args:L,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:$,storageKey:'additionalImagesPerSpec(spec:"564x")'},W={alias:"additionalImage736x",args:O,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:$,storageKey:'additionalImagesPerSpec(spec:"736x")'},Y={alias:"additionalImage474x",args:M,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:$,storageKey:'additionalImagesPerSpec(spec:"474x")'},q={alias:"additionalImage236x",args:z,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:$,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[r,X],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},Q={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[y,V,B,G,W,Y,q,{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[X,r],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},et=[b,S,w,k,ee={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],ea=[l,b,S,w,k,ee],{fragment:{argumentDefinitions:i,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,o,u,d,c,p,g,h,m,_,v,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[x],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:P,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:F,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:F,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:F,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[l,T,y,j,f],storageKey:null},Z,R,K,N,H,U,J,Q],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:i,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,r,s,o,u,d,c,p,g,h,m,_,v,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[x,ee],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:et,storageKey:null},ee],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:et,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:ea,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[l,T,y,j,f,ee],storageKey:null},Z,R,K,N,H,U,J,Q,ee],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"5f09d38fcc19ea4defe9a2ced0ea73c23f12ec0bc0e6d4bd4f24974e35d6e8ea",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});ei.hash="41066749b18be6f77425904cd44e3d69";let en=ei;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(ei.default||ei)},982385:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchProductFeedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};i.hash="b69967adff40ae068eb5d3aad8f106f3";let n=i},290602:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualLiveSearchResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"FlashlightResultGrid_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};i.hash="29776fcfda2d77c90636b38f9c9095f8";let n=i},91856:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"useGetViewLog_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightResultGrid_pin"}],type:"Pin",abstractKey:null};i.hash="ecc8a2a34b852db42ada7b81f966ef5a";let n=i},620254:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchPageWithPinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchProductFeedResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualLiveSearchResourceContainer_pin"},{args:null,kind:"FragmentSpread",name:"VisualSearchUnifiedResourceContainer_pin"}],type:"Pin",abstractKey:null};i.hash="559409b5cdf594ceadec1100a8e980f8";let n=i},593390:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VisualSearchUnifiedResourceContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"VisualSearchContainer_pin"}],type:"Pin",abstractKey:null};i.hash="7074039637fc6e2b8dd0bdad128d63c8";let n=i},73129:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetInitialCropArea_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};i.hash="120ad104e33b94ab10be1098dc10d74b";let n=i},684824:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetViewLog_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};i.hash="4d2dba5ab4f3957f62edf10d66e5a060";let n=i},706737:(e,t,a)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/visual-search"]=function(){return a(19845).Z}},369971:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var i=a(667294),n=a(883119),l=a(838011),r=a(214877),s=a(549629),o=a(205841),u=a(140017),d=a(572345),c=a(561916),p=a(785893);function g({component:e,cropSource:t,fadeBottomEdge:a,filterOptions:l,filterType:s,handleFilterChange:g,maxContentHeight:h,paddingX:m,showVerifiedMerchants:_,uiType:y,viewParameter:f,viewType:v}){let x=(0,u.ZP)(),{logContextEvent:b}=(0,r.v)(),S=a=>{let i=l[a];b({aux_data:{commerce_data:JSON.stringify({filter_value:i.string_value??i.numeric_value??i.search_type,select:!i.checked,source:(0,c.Z)({cropSource:t,viewType:v})}),filter_type:s},component:e,event_type:101,view_parameter:f,view_type:v}),g(a)},[w,k]=(0,i.useState)(!1),P=(0,i.useRef)(null);return(0,p.jsxs)(n.xu,{maxHeight:h||void 0,position:"relative",children:[(0,p.jsxs)(n.xu,{ref:P,maxHeight:h||void 0,onScroll:()=>{if(!a||!P.current)return;let{scrollTop:e,scrollHeight:t,clientHeight:i}=P.current;k(t-e-i<10)},overflow:"auto",paddingX:m,children:["check-circles"===y&&l.map(({label:e,image_url:t,is_verified_merchant:a,checked:i},l)=>(0,p.jsx)(n.iP,{onTap:()=>S(l),children:(0,p.jsxs)(n.xu,{alignItems:"center","data-test-id":"multi-select-option",direction:"row",display:"flex",marginBottom:3,children:[(0,p.jsx)(n.xu,{marginEnd:3,children:(0,p.jsx)(o.qE,{name:e,size:"sm",src:t})}),(0,p.jsxs)(n.kC,{alignItems:"center",direction:"row",flex:"grow",children:[(0,p.jsx)(n.xv,{children:e}),_&&a&&(0,p.jsx)(n.xu,{marginStart:1,children:(0,p.jsx)(d.Z,{isVerifiedMerchant:!0,size:"xs"})})]}),(0,p.jsx)(n.xu,{"data-test-id":i?"option-selected":void 0,margin:-2,marginBottom:-3,marginTop:-3,children:(0,p.jsx)(n.hU,{accessibilityLabel:x._('Domain Filter Option', 'UnifiedFilter.MultiSelectFilter.domainFilterOptionAccessibilityLabel', 'Accessibility label for radio button of domain filter choices'),icon:i?"check-circle":"circle-outline",iconColor:"darkGray",onClick:()=>S(l),size:"lg"})})]})},e)),"check-boxes"===y&&l.map(({label:e,image_url:t,is_verified_merchant:a,checked:i},l)=>(0,p.jsxs)(n.xu,{alignItems:"center","data-test-id":"multi-select-option",direction:"row",display:"flex",marginBottom:3,children:[(0,p.jsx)(n.xu,{marginEnd:3,children:(0,p.jsx)(o.qE,{name:e,size:"sm",src:t})}),(0,p.jsxs)(n.kC,{alignItems:"center",direction:"row",flex:"grow",children:[(0,p.jsx)(n.__,{htmlFor:`multi-select-filter--${e}`,children:(0,p.jsx)(n.xv,{children:e})}),_&&a&&(0,p.jsx)(n.xu,{marginStart:1,children:(0,p.jsx)(d.Z,{isVerifiedMerchant:!0,size:"xs"})})]}),(0,p.jsx)(n.xu,{"data-test-id":i?"option-selected":void 0,margin:1,children:(0,p.jsx)(n.XZ,{checked:i,id:`multi-select-filter--${e}`,onChange:()=>S(l)})})]},e))]}),a&&(0,p.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{background:"linear-gradient(0deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%)",pointerEvents:"none",transition:"opacity 0.1s",opacity:w?0:1}},"data-test-id":"multi-select-filter-fade-bottom-edge",height:30,position:"absolute",width:"100%"})]})}function h({children:e,filterOptions:t,filterType:a,title:s,viewLogData:o,viewParameter:d,viewType:c}){let{logContextEvent:g}=(0,r.v)(),h=(0,u.ZP)(),m=(0,l.Z)(),[_,y]=(0,i.useState)(!0),f=m?14325:13469;return(0,p.jsxs)(i.Fragment,{children:[(0,p.jsx)(n.xu,{marginBottom:2,children:(0,p.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,p.jsx)(n.xv,{weight:"bold",children:s||h._('Sellers', 'UnifiedFilter.MultiSelectFilter.sellersHeaderText', 'ProductFilters.Domains.HeaderText')}),(0,p.jsx)(n.xu,{flex:"none",children:(0,p.jsx)(n.hU,{accessibilityLabel:h._('Domain filter', 'UnifiedFilter.MultiSelectFilter.domainFilterAccessibilityLabel', 'accessibility label for the icon button to open or close domain filter'),icon:_?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{y(!_),g({aux_data:{commerce_data:JSON.stringify({filter:_?"collapsed":"expanded"}),filter_type:a},component:f,element:m?13522:11547,event_type:101,view_parameter:d,view_type:c}),_||g(o)},size:"sm"})})]})}),_?e:(0,p.jsx)(n.xu,{width:"80%",children:(0,p.jsx)(n.xv,{color:"subtle",size:"200",children:function(e=[],t){let a=e.filter(e=>e.checked),i=a.length,n=0===i?t._('All', 'UnifiedFilter.MultiSelectFilter.allDomainsSelectedText', 'text indicates that no domain filter is currently applied for filtering'):`(${i}) ${a.map(e=>e.label).join(", ")}`;return n}(t,h)})})]})}function m({cropSource:e,fadeBottomEdge:t,filterOptions:a,filterType:i,handleFilterChange:n,isCollapsible:o,maxContentHeight:u,paddingX:d,showVerifiedMerchants:m,title:_,uiType:y,viewParameter:f,viewType:v}){let{logContextEvent:x}=(0,r.v)(),b=(0,l.Z)(),S=b?14325:13469,w={aux_data:{commerce_data:JSON.stringify({source:(0,c.Z)({cropSource:e,viewType:v})}),filter_type:i},component:S,event_type:13,view_parameter:f,view_type:v},k=(0,p.jsx)(g,{component:S,cropSource:e,fadeBottomEdge:t,filterOptions:a,filterType:i,handleFilterChange:t=>{let l=a[t];x({aux_data:{commerce_data:JSON.stringify({filter_value:l.string_value??l.numeric_value??l.search_type,select:!l.checked,source:(0,c.Z)({cropSource:e,viewType:v})}),filter_type:i},component:S,event_type:101,view_parameter:f,view_type:v}),n(t)},maxContentHeight:u,paddingX:d,showVerifiedMerchants:m,uiType:y,viewParameter:f,viewType:v});return(0,p.jsx)(s.Z,{log:w,children:o?(0,p.jsx)(h,{filterOptions:a,filterType:i,title:_,viewLogData:w,viewParameter:f,viewType:v,children:k}):k})}},318612:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var i=a(667294),n=a(883119),l=a(367295),r=a(306604),s=a(5859),o=a(785893);function u(e,t,a,i){let n=(0,r.c3)((0,r.$X)(e,!!t),a,!!t);return i&&(n=n.slice(0,-3)),n}function d({valueInMicroCurrency:e,requestContext:t,currencyCode:a,disableAutoFormatOnChange:s,hasFractionalCents:d,roundValue:c,onValueParsed:p,autoComplete:g,placeholder:h,errorMessage:m,id:_}){let y=a&&l.XD[a]||"",f="";if("number"==typeof e){let a=u(e,d,t.locale,c);f=`${y}${a}`}let[v,x]=(0,i.useState)(f);(0,i.useEffect)(()=>{if(!s&&null!=e&&""===v){let a=u(e,d,t.locale,c);x(a)}},[v,s,d,t,c,e]);let b=(e,a,i,n)=>{let l="";if(null==e)l="";else{let a=u(e,i,t.locale,n);l=`${y}${a}`}return l},S=()=>{let e;let a=(0,r.qq)(v,t.locale,!!d);e=""===v?null:Number.isNaN(a)?Number.MIN_VALUE:(0,r.y)(a,!!d);let i=b(e,v,!!d,c);x(i),p(e)};return(0,o.jsx)(n.nv,{autoComplete:g,errorMessage:m,id:_,onBlur:()=>{S()},onChange:({value:e})=>x(e),placeholder:h,size:"lg",value:v})}function c(e){return(0,o.jsx)(d,{...e,requestContext:(0,s.B)()})}var p=a(140017);function g({CustomMaxField:e,CustomMinField:t,handleMaxChange:a,handleMinChange:l,maxHeading:r,minHeading:s,max:u,min:d}){let c=(0,p.ZP)();return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsxs)(n.kC,{direction:"row",children:[(0,o.jsx)(n.sg,{span:7,children:(0,o.jsx)(n.xv,{size:"200",children:s??c._('Min', 'rangeFilter.min', 'Minimum Range')})}),(0,o.jsx)(n.sg,{span:5,children:(0,o.jsx)(n.xv,{size:"200",children:r??c._('Max', 'rangeFilter.max', 'Maximum Range')})})]}),(0,o.jsxs)(n.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",marginTop:2,children:[(0,o.jsx)(n.sg,{span:5,children:t?(0,o.jsx)(t,{value:d}):(0,o.jsx)(n.Ki,{autoComplete:"off",id:"min",onChange:({value:e})=>{l&&l(e)},size:"lg",value:d})}),(0,o.jsx)(n.sg,{span:2,children:(0,o.jsx)(n.xv,{align:"center",color:"subtle",size:"200",children:c._('to', 'Min to Max', 'Min to Max')})}),(0,o.jsx)(n.sg,{span:5,children:e?(0,o.jsx)(e,{value:u}):(0,o.jsx)(n.Ki,{autoComplete:"off",id:"max",onChange:({value:e})=>{a&&a(e)},size:"lg",value:u})})]})]})}var h=a(838011),m=a(214877),_=a(494125),y=a(126301),f=a(561916);function v({children:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:r,filterType:s,logViewEvent:u,maxPrice:d,minPrice:c,title:g,viewParameter:_,viewType:y}){let{logContextEvent:f}=(0,m.v)(),v=(0,p.ZP)(),x=(0,h.Z)(),b=l.XD[t]||"",[S,w]=(0,i.useState)(!0),k=x?14324:13468;return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,o.jsx)(n.xu,{"data-test-id":"price-filter-label",children:(0,o.jsx)(n.xv,{weight:"bold",children:g||v._('Price', 'Header of product price filter', 'Header of product price filter')})}),(0,o.jsx)(n.xu,{flex:"none",children:(0,o.jsx)(n.hU,{accessibilityLabel:v._('Price filter', 'accessibility label for the icon button to open or close price filter', 'accessibility label for the icon button to open or close price filter'),icon:S?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{w(!S),f({event_type:101,component:k,element:x?13522:11547,view_type:y,view_parameter:_,aux_data:{commerce_data:JSON.stringify({filter:S?"collapsed":"expanded"}),filter_type:s}}),S||u()},size:"sm"})})]}),S?e:(0,o.jsx)(n.xv,{color:"subtle",size:"200",children:-1===d&&-1===c?v._('All', 'text indicates that no price filter is currently applied for filtering', 'text indicates that no price filter is currently applied for filtering'):-1===d?`${b}${c} – ${b}${Math.ceil(a)}+`:-1===c?`${b}${Math.floor(r)} – ${b}${d}`:`${b}${c} – ${b}${d}`})]})}function x({cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:i,disableAutoFormatOnChange:r,handleMaxPriceChange:s,handleMinPriceChange:u,instructions:d,maxPrice:h,minPrice:m,onRangeChange:_,uiType:f}){let v=(0,p.ZP)(),x=l.XD[t]||"",b=Math.ceil(a),S=Math.floor(i),w=-1===m&&-1===h;return(0,o.jsxs)(n.xu,{paddingY:4,children:["slider"===f&&(0,o.jsx)(y.Z,{cropSource:e,currencyType:t,handlePriceChange:([e,t])=>{_?.(),e!==m&&u(e),t!==h&&s(t)},instructions:d||"",lowerBound:i,maxPrice:h,minPrice:m,upperBound:a}),"number-boxes"===f&&(0,o.jsx)(g,{CustomMaxField:({value:e})=>(0,o.jsx)(n.xu,{"data-test-id":"max-price-filter",children:(0,o.jsx)(c,{autoComplete:"off",currencyCode:t,disableAutoFormatOnChange:r,id:"max_price",onValueParsed:e=>{s((e||0)/1e6)},placeholder:`${x}${b}`,roundValue:!0,valueInMicroCurrency:w?null:e})}),CustomMinField:({value:e})=>(0,o.jsx)(n.xu,{"data-test-id":"min-price-filter",children:(0,o.jsx)(c,{autoComplete:"off",currencyCode:t,disableAutoFormatOnChange:r,id:"min_price",onValueParsed:e=>{u((e||0)/1e6)},placeholder:`${x}${S}`,roundValue:!0,valueInMicroCurrency:w?null:e})}),max:-1===h?1e6*b:1e6*h,maxHeading:v._('Max', 'Maximum Price', 'Maximum Price'),min:-1===m?1e6*S:1e6*m,minHeading:v._('Min', 'Minimum Price', 'Minimum Price')})]})}function b({cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:n,disableAutoFormatOnChange:l,filterType:r,handleMaxPriceChange:s,handleMinPriceChange:u,instructions:d,isCollapsible:c,maxPrice:p,minPrice:g,onRangeChange:y,title:b,uiType:S,viewParameter:w,viewType:k}){let{logContextEvent:P}=(0,m.v)(),F=(0,h.Z)(),T=()=>{P({event_type:13,component:F?14324:13468,view_type:k,view_parameter:w,aux_data:{commerce_data:JSON.stringify({source:(0,f.Z)({cropSource:e,viewType:k})}),filter_type:r}})};return(0,_.Z)(()=>{T()}),(0,o.jsx)(i.Fragment,{children:c?(0,o.jsx)(v,{currencyCode:t,defaultMaxPrice:a,defaultMinPrice:n,filterType:r,logViewEvent:T,maxPrice:p,minPrice:g,title:b,viewParameter:w,viewType:k,children:(0,o.jsx)(x,{cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:n,disableAutoFormatOnChange:l,handleMaxPriceChange:s,handleMinPriceChange:u,instructions:d,isCollapsible:!0,maxPrice:p,minPrice:g,onRangeChange:y,uiType:S})}):(0,o.jsx)(x,{cropSource:e,currencyCode:t,defaultMaxPrice:a,defaultMinPrice:n,disableAutoFormatOnChange:l,handleMaxPriceChange:s,handleMinPriceChange:u,instructions:d,maxPrice:p,minPrice:g,onRangeChange:y,uiType:S})})}},838551:(e,t,a)=>{"use strict";a.d(t,{$:()=>i,v:()=>n});let i=50,n={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},838011:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(340523),n=a(149722);function l(){let{isAuth:e,country:t}=(0,n.Z)(),{checkExperiment:a}=(0,i.F)();if(!e)return!1;let{anyEnabled:l}=a("web_search_unified_content_filters_international");return"US"===t||l}},172618:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var i=a(616550),n=a(883119),l=a(214877),r=a(901855),s=a(140017),o=a(785893);function u({arrowType:e,pinId:t,viewParameter:a,viewType:u}){let d=(0,s.ZP)(),c=(0,i.k6)(),{previous:p}=(0,r.Hv)(),{logContextEvent:g}=(0,l.v)();return(0,o.jsx)(n.xu,{"data-test-id":"go-back-button",children:(0,o.jsx)(n.hU,{accessibilityLabel:d._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:e??"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(g({event_type:101,view_type:u,element:34,view_parameter:a}),0===p.length){c.replace(`/pin/${t}/`);return}c.goBack()}})})}},735382:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(624797);function n(e){let t=(0,i.mB)(e.search),a=parseInt(t.x,10),n=parseInt(t.y,10),l=parseInt(t.w,10),r=parseInt(t.h,10),s=!function(...e){return e.every(Number.isInteger)}(a,n,l,r)?null:{x:a,y:n,w:l,h:r};return s}},10584:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var i,n=a(667294);a(167912);var l=a(922725),r=a(207012),s=a(777609),o=a(513911);let u=void 0!==i?i:i=a(73129);function d({pinKey:e}){let t=(0,r.Z)(u,e),{getNormalizedPinImage:a}=(0,s.Z)({pinKey:t,maxWidth:o.RZ}),{width:i,height:d}=a(),c=(0,n.useCallback)(({initialCropArea:e})=>e||{x:l.S,y:l.S,w:i-2*l.S,h:d-2*l.S},[d,i]);return{getInitialCropArea:c}}},431377:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var i=a(883119),n=a(408206),l=a(214877),r=a(213377),s=a(70903),o=a(822592),u=a(676554),d=a(785893);function c({action:e,component:t,dangerouslySetActionUrl:a,element:c,contextLogData:p,hasPwtConstraint:g,id:h,objects:m,surface:_,viewType:y,viewParameter:f}){let{logContextEvent:v}=(0,l.v)(),x=(0,n.Z)(),b=e?.url&&e.text?i=>(0,d.jsx)(o.Z,{coverImages:i.images,height:r.yF,onClick:()=>v({event_type:101,view_type:y,view_parameter:f,component:t,element:c,aux_data:{story_id:h,...p}}),text:e.text,url:a??e.url,width:r.yF},"actionBubble"):null,{containerRef:S,itemsToRender:w,actionItem:k}=(0,s.n)({items:m,itemWidth:r.yF,itemGap:r.oX,actionItemType:b?"one":void 0});return g&&x&&x(w&&w.length>0?"complete":"remove"),(0,d.jsxs)(s.Z,{containerRef:S,itemGap:r.oX,children:[w.map((e,a)=>(0,d.jsx)(i.xu,{"data-grid-item":"true",flex:"none",width:r.yF,children:(0,d.jsx)(u.ZP,{authDesktopSurface:_??"ShoppingDynamicHeightGrid",auxData:p,componentType:t,duploQueryRef:null,pin:e,pinId:e.id,pinImageCrop:{height:r.yF,width:r.yF},slotIndex:a,viewParameter:f,viewType:y})},e.id)),k&&b?.(k)]})}},520991:(e,t,a)=>{"use strict";a.d(t,{M:()=>h,Z:()=>m});var i=a(667294),n=a(883119),l=a(172618),r=a(819429),s=a(214877),o=a(30378),u=a(5859),d=a(71980),c=a(140017),p=a(785893);function g({buttonText:e,handleDrawerClose:t,isDrawerOpen:a,onClick:i,largeSize:l=!1,reversed:r=!1,invertWhenDrawerIsOpen:s=!1,hasProductFiltersApplied:o=!1}){let u=(0,c.ZP)(),d=s&&a,g=(0,p.jsx)(n.JO,{accessibilityLabel:"",color:d?"light":"dark",icon:"filter"},"filterIcon"),h=e&&(0,p.jsx)(n.xv,{align:"center",color:d?"inverse":"default",weight:"bold",children:e},e);return(0,p.jsx)(n.iP,{accessibilityLabel:u._('Filter', 'productsFilterButton', 'Button to filter products results'),onTap:()=>{a?t():i()},rounding:"pill",children:(0,p.jsxs)(n.xu,{position:"relative",children:[(0,p.jsx)(n.xu,{alignContent:"center",color:d?"dark":"secondary",dangerouslySetInlineStyle:l?{__style:{padding:"18px"}}:void 0,display:"flex",justifyContent:"center",minHeight:40,paddingX:4,rounding:"pill",children:(0,p.jsx)(n.kC,{alignItems:"center",gap:{row:2,column:0},children:r?[h,g]:[g,h]})}),o&&(0,p.jsx)(n.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},display:"flex",height:14,justifyContent:"center",minWidth:14,position:"absolute",right:!0,rounding:"pill",top:!0})]})})}let h=60;function m({filtersText:e,handleDrawerClose:t,handleDrawerOpen:a,isDrawerOpen:c,isProductOnlyFeed:m,pinId:_,showFilter:y,title:f,viewParameter:v,viewType:x}){let{logContextEvent:b}=(0,s.v)(),{isRTL:S}=(0,u.B)(),w=(0,i.useRef)(null);(0,i.useEffect)(()=>(y&&b({event_type:120,view_type:x,component:13467,element:11735,view_parameter:v}),w.current&&o.Z.addObstruction("top",w.current),()=>{w.current&&o.Z.removeObstruction("top",w.current)}),[y]);let k=()=>{b({event_type:101,view_type:x,component:13467,element:11735,view_parameter:v}),a&&a()};return(0,p.jsx)(d.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,p.jsxs)(n.xu,{ref:w,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",justifyContent:"center",minHeight:h,position:"absolute",top:!0,width:"100%",children:[(0,p.jsx)(n.xu,{left:!S,marginStart:5,position:"absolute",right:S,children:(0,p.jsx)(l.Z,{arrowType:m?"directional-arrow-left":"cancel",pinId:_,viewParameter:v,viewType:x})}),(0,p.jsx)(r.Z,{title:f}),y&&"boolean"==typeof c&&k&&e&&t&&(0,p.jsx)(n.xu,{"data-test-id":"filter-button",left:S,marginEnd:12,position:"absolute",right:!S,children:(0,p.jsx)(g,{buttonText:e,handleDrawerClose:t,isDrawerOpen:c,onClick:k})})]})})}},967871:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d}),a(167912);var i,n=a(883119),l=a(582158),r=a(207012),s=a(906623),o=a(785893);let u=void 0!==i?i:i=a(75306);function d({cropArea:e,description:t,height:a,imageSignature:i,imageUrl:d,pinKey:c,requestParams:p,showAnimation:g,surfaceType:h,trafficSource:m,viewParameter:_,width:y}){let f=(0,r.Z)(u,c),v=(0,s.E)();return(0,o.jsx)(n.xu,{"data-test-id":"flashlight-enabled-image",height:a,width:y,children:(0,o.jsxs)(n.zd,{height:a,rounding:4,width:y,children:[(0,o.jsx)(n.Ee,{alt:t,naturalHeight:a,naturalWidth:y,onLoad:()=>{v&&v.markConstraintComplete("visualSearchMainPinImageRender")},src:d}),(0,o.jsx)(l.Z,{imageSignature:i,imageSize:{h:a,w:y},initialCropArea:e,pinKey:f,requestParams:p,showAnimation:!!g,surfaceType:h,trafficSource:m,viewParameter:_})]})})}},677929:(e,t,a)=>{"use strict";a.d(t,{L:()=>U,Z:()=>$});var i,n=a(667294);a(167912);var l=a(616550),r=a(883119),s=a(603520),o=a(10584),u=a(18529),d=a(712314),c=a(23613),p=a(520991),g=a(967871),h=a(706308),m=a(155364),_=a(8760),y=a(549629),f=a(207012),v=a(140017),x=a(777609),b=a(340523),S=a(603642),w=a(5859),k=a(513911),P=a(71328),F=a(627408),T=a(624797),j=a(689390),I=a(494125),C=a(670588),E=a(250790),A=a(40770),D=a(291940),Z=a(129675),L=a(258194),R=a(755453),O=a(739149),K=a(152509),M=a(136359),N=a(597553),z=a(76936),H=a(785893);let U=32,V=void 0!==i?i:i=a(170945);function $({pinKey:e}){let t=(0,v.ZP)(),a=(0,l.k6)(),{checkExperiment:i}=(0,b.F)(),{isRTL:$}=(0,w.B)(),B=(0,f.Z)(V,e),{id:G}=(0,l.UO)(),{pinId:W}=(0,j.Z)(G||""),Y=(0,l.TH)(),q=(0,T.mB)(Y.search),{x:X,y:J,w:Q,h:ee,surfaceType:et,q:ea,rs:ei,domain:en,full_feed_title:el,category:er,max:es,min:eo,requestParams:eu}=q,ed=(0,s.W)(et),ec={category:er,domain:en,min:eo,max:es},ep=(0,E.Z)(Number(q.cropSource)),eg=(0,O.Z)({x:X,y:J,w:Q,h:ee})?(0,C.Z)({x:X,y:J,w:Q,h:ee},!0):void 0,[eh,em]=(0,n.useState)(eg),[e_,ey]=(0,n.useState)(0),ef=(0,n.useCallback)(()=>Y.pathname.includes("/products/"),[Y]),[ev,ex]=(0,n.useState)(ef()),[eb,eS]=(0,n.useState)(void 0),[ew,ek]=(0,n.useState)(""),eP=(0,n.useRef)(null),[eF,eT]=(0,n.useState)(parseInt(eo,10)||null),[ej,eI]=(0,n.useState)(parseInt(es,10)||null),[eC,eE]=(0,n.useState)(en?decodeURI(en):null),[eA,eD]=(0,n.useState)(er?decodeURI(er):null),[eZ,eL]=(0,n.useState)(!1),[eR,eO]=(0,n.useState)(""),eK=(0,n.useCallback)(()=>eL(!0),[]),eM=(0,n.useCallback)(()=>eL(!1),[]),{anyEnabled:eN}=i("web_unified_visual_feed"),{visualSearchFlashlightUnifiedResource:ez,visualSearchFlashlightUnifiedResource:{data:eH},filters:eU,filters:{category_filters:eV,domain_filters:e$,price_filters:eB}={},searchId:eG,setSearchId:eW}=(0,_.Z)({resourceOptions:eb}),{description:eY,imageSignature:eq,isEligibleForRelatedProducts:eX}=B,eJ=({minPrice:e,maxPrice:t,domainParam:a,categoryParam:i})=>{eT(e),eI(t),eE(a),eD(i)},eQ=0,e0="",e1=ep||5;(0,n.useEffect)(()=>{let e=ef();e!==ev&&ex(e)},[ef,ex,ev]),(0,n.useEffect)(()=>{ew!==el&&ek(el)},[ek,ew,el]);let{getInitialCropArea:e2}=(0,o.Z)({pinKey:B});(0,I.Z)(()=>{if(!eh&&B){let e=e2({initialCropArea:null}),t=(0,R.Z)({cropArea:e,cropSource:e1,isProductPage:ev,pinId:W,requestParams:eu,searchQuery:ea,surfaceType:ed,title:ew,trafficSource:ei});a.replace(t)}}),(0,n.useEffect)(()=>(eP&&eP.current&&e0===W&&(eP.current.scrollTop=eQ),()=>{eP&&eP.current&&(eQ=eP.current.scrollTop,e0=W)}),[eP]),(0,n.useEffect)(()=>{(eh?.x!==eg?.x||eh?.y!==eg?.y||eh?.w!==eg?.w||eh?.h!==eg?.h)&&(em({x:eg?.x||0,y:eg?.y||0,w:eg?.w||1,h:eg?.h||1}),eW(""))},[eh?.h,eh?.w,eh?.x,eh?.y,eg?.h,eg?.w,eg?.x,eg?.y,eW]);let e7=(0,P.Z)(()=>{window&&ey(window.innerWidth)},100);(0,n.useEffect)(()=>{window&&ey(window.innerWidth)},[]),(0,n.useEffect)(()=>(window&&window.addEventListener("resize",e7),()=>{window&&window.removeEventListener("resize",e7)}),[e7]);let e6=(0,A.Z)({cropSource:e1,isProductPage:ev,surfaceType:ed}),e3="stl"===ed,e5=ev||e3?"shopping":"flashlight",e4=eN&&!ev&&!e3,e9=(0,d.Z)({cropSource:e1,inStelaUFExperiment:eN,isProductPage:ev,surfaceType:ed}),{getNormalizedPinImage:e8}=(0,x.Z)({pinKey:B,maxWidth:k.RZ});(0,n.useEffect)(()=>{if(B.entityId){let{width:e,height:t}=e8(),a=e2({initialCropArea:eh});eS({categories:eA,crop:(0,Z.Z)({cropArea:a,scaledWidth:e,scaledHeight:t}),crop_source:e1,domains:eC,entry_source:e5,entrypoint:e6,field_set_key:"shopping_grid_item",image_signature:B.imageSignature||void 0,is_shopping:e9,pin_id:B.entityId,price_max:ej,price_min:eF,request_params:eu,source:ei})}},[eA,e1,eC,e5,e6,e2,e8,eh,e9,ej,eF,B.entityId,B.imageSignature,eu,ei]);let te=eX||ev?427:72,tt=e1&&4===e1?3462:3455,ta=(0,K.Z)({entrySource:e5,isProductPage:ev,pinKey:B,surfaceType:ed,viewParameter:tt,viewType:te});if(!B)return null;let{width:ti,height:tn,url:tl}=e8(),tr=e2({initialCropArea:eh}),ts=ti+20,to=({category:e,domain:t,min:i,max:n})=>{a.replace({pathname:`/pin/${W}/visual-search/${ev?"products/":""}`,query:{...tr,cropSource:e1,entrySource:e5,rs:ei,category:e,domain:t,min:i,max:n},search:(0,L.Z)({cropArea:tr,cropSource:e1,requestParams:eu,surfaceType:ed,title:ew,trafficSource:ei})})},tu=ev?e_:e_-ts,td=(0,h.Z)(eU)&&e9,tc=(0,D.Z)({cropSource:e1,i18n:t,inStelaUFExperiment:eN,isProductPage:ev,surfaceType:ed,title:ew}),tp=!ev;return(0,H.jsx)(S.Z,{constraints:(0,c.Z)({isProductPage:ev,isStl:e3,isUnifiedFeed:eN}),measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,H.jsx)(F.Z,{objectId:eG,view:te,children:(0,H.jsx)(y.Z,{log:ta,children:(0,H.jsxs)(r.xu,{"data-test-id":"related-products",children:[(0,H.jsx)(p.Z,{filtersText:eR,handleDrawerClose:eM,handleDrawerOpen:eK,isDrawerOpen:eZ,isProductOnlyFeed:ev,pinId:W,showFilter:!e4&&td,title:tc,viewParameter:tt,viewType:te}),(0,H.jsx)(r.xu,{marginTop:2,children:(0,H.jsx)(M.c,{children:e=>(0,H.jsxs)(r.xu,{alignItems:"stretch",direction:"row",display:"flex",justifyContent:"start",marginTop:12,children:[td&&(0,H.jsx)(z.Z,{categoryFilters:eV,cropSource:e1,domainFilters:e$,handleFilterChange:eJ,handleSubmit:to,isDrawerOpen:eZ,pinId:W,priceFilters:eB,submittedFilters:ec,topOffset:p.M,updateButtonText:e=>{eO(e)},viewParameter:tt,viewType:te}),tp&&(0,H.jsx)(r.xu,{ref:eP,bottom:!0,dangerouslySetInlineStyle:{__style:{top:e+65+U,marginBottom:10,left:!$&&eZ?N.pG:0,right:$?0:void 0}},height:"inherit",marginStart:!$&&eZ?0:12,overflow:"auto",position:"fixed",width:ts,children:(0,H.jsx)(g.Z,{cropArea:tr,description:eY??"",height:tn,imageSignature:eq||"",imageUrl:tl,pinKey:B,requestParams:eu,surfaceType:ed,trafficSource:ei,viewParameter:tt,width:ti})}),(0,H.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:(0,u.Z)({cropperWidth:ts,top:49,isFilterOpened:eZ,isProductOnlyFeed:ev,isRTL:$})},position:"relative",width:eZ?tu-N.pG:tu,children:eH&&(0,H.jsx)(m.Z,{isFilterOpened:eZ,isProductOnlyFeed:ev,pinKey:B,surfaceType:ed,viewParameter:tt,viewType:te,visualSearchFlashlightUnifiedResource:ez})})]})})})]})})})})}},155364:(e,t,a)=>{"use strict";a.d(t,{Z:()=>T});var i,n=a(667294);a(167912);var l=a(616550),r=a(883119),s=a(431377),o=a(785893);function u({title:e}){return(0,o.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:55}},"data-test-id":"unified-feed-subheader",display:"flex",justifyContent:"center",children:(0,o.jsx)(r.X6,{accessibilityLevel:2,size:"400",children:e})})}var d=a(408206),c=a(340523),p=a(156725),g=a(624797),h=a(149722),m=a(301551),_=a(206923);let y={flashlight:72,stela:427,stl:427};function f({pinId:e,surfaceType:t,visualSearchFlashlightUnifiedResource:a}){let i=(0,l.TH)(),f=(0,h.Z)(),{checkExperiment:v}=(0,c.F)(),x=(0,d.Z)(),{data:b,isLoaded:S}=a,w=b?.results||[],k=t?y[t]:72;return x&&(!w&&S||w&&!w.some(e=>"story"===e.type&&"unified_visual_feed_product_upsell"===e.story_type))&&x("remove"),(0,o.jsx)(n.Fragment,{children:w.filter(e=>"story"===e.type).map((t,a)=>{if("story"!==t.type)return null;let{action:n,id:l,objects:d,story_type:c,title:h}=t,y=h.format||"",x=(0,m.Z)(f)&&"holdout"!==v("product_pin_rep_holdout").group,b=(0,g.mB)(i.search),S=(0,g.mB)(n?.url).full_feed_title||"";b.full_feed_title=(0,p.Z)(S);let w=(0,g.XP)(b),P=`/pin/${e}/visual-search/products/?${w}`;switch(c){case"stela_shop":case"unified_visual_feed_product_upsell":return(0,o.jsx)(_.qS,{auxData:{story_type:c},component:14339,loggingId:l,objectIdStr:l,slotIndex:a,viewParameter:3462,viewType:k,children:({impressionTrackerRef:e})=>(0,o.jsxs)(r.xu,{ref:e,children:[y&&(0,o.jsx)(u,{title:y}),(0,o.jsx)(r.xu,{"data-test-id":"unified-feed-stela-story",marginBottom:12,marginTop:4,children:(0,o.jsx)(s.Z,{action:n,component:14339,contextLogData:{story_type:c},dangerouslySetActionUrl:P,element:179,hasPwtConstraint:!0,id:l,objects:d,surface:x?"ShoppingModule":void 0,viewParameter:3462,viewType:k})})]})},l);case"unified_visual_feed_organic_header":return(0,o.jsx)(_.qS,{auxData:{story_type:c},component:14339,loggingId:l,objectIdStr:l,slotIndex:a,viewParameter:3462,viewType:k,children:({impressionTrackerRef:e})=>(0,o.jsx)(r.xu,{ref:e,marginBottom:4,children:(0,o.jsx)(u,{title:t.title.format||""})})},l);default:return null}})})}var v=a(214877),x=a(140017),b=a(493538),S=a(71328),w=a(676554);function k({commerceData:e,isFilterOpened:t,isProductFeed:a,searchId:i,viewParameter:l,viewType:s,visualSearchFlashlightUnifiedResource:u}){let d=(0,x.ZP)(),{logContextEvent:c}=(0,v.v)(),[p,g]=(0,n.useState)(),[h,m]=(0,n.useState)(!1),_=(0,n.useRef)(null),y=(0,n.useRef)(null),f=(0,S.Z)(()=>{_.current&&g(_.current.getBoundingClientRect().y)},100);(0,n.useEffect)(()=>{y.current?.handleResize()},[t]),(0,n.useEffect)(()=>{if(!h)return window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)}),(0,n.useEffect)(()=>{let e=window?.innerHeight||document.body?.clientHeight;!h&&p<e&&(m(!0),c({event_type:110,view_type:s,view_parameter:l}))},[p,c,h,m,s,l]);let{data:k,isFetching:P,fetchMore:F,isAtEnd:T}=u,j=(k?.results||[]).filter(e=>"pin"===e.type);return(0,o.jsxs)(r.xu,{"data-test-id":"visual-search-feed",children:[(0,o.jsx)(r.xu,{ref:_,children:(0,o.jsx)(b.Z,{isAtEndOfFeed:T,itemCount:(j||[]).length,children:(0,o.jsx)(r.Rk,{ref:y,items:j||[],loadItems:F,minCols:1,renderItem:({data:t,itemIdx:n})=>"pin"===t.type?(0,o.jsx)(w.ZP,{authDesktopSurface:a?"ShoppingDynamicHeightGrid":"SearchItem",auxData:{commerce_data:e},componentType:0,duploQueryRef:null,pin:t,pinId:t.id,slotIndex:n,viewData:{search_identifier:i},viewParameter:l,viewType:s}):null,scrollContainer:()=>window})})}),(0,o.jsx)(r.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,o.jsx)(r.$j,{accessibilityLabel:d._('Loading visual search results', 'visualSearch.spinner.label', 'Accessibility label for spinner when loading the visual search results'),show:P})})]})}var P=a(207012);let F=void 0!==i?i:i=a(237583);function T({isFilterOpened:e,isProductOnlyFeed:t,pinKey:a,surfaceType:i,viewParameter:l,viewType:r,visualSearchFlashlightUnifiedResource:s}){let u=(0,P.Z)(F,a),d="stl"===i,c=d||t,{data:p}=s,g=p?.search_identifier;return(0,o.jsxs)(n.Fragment,{children:[!d&&(0,o.jsx)(f,{pinId:u.entityId,surfaceType:i,visualSearchFlashlightUnifiedResource:s}),(0,o.jsx)(k,{commerceData:{is_product_only_feed:c},isFilterOpened:e,isProductFeed:c,searchId:g,viewParameter:l,viewType:r,visualSearchFlashlightUnifiedResource:s})]})}},706308:(e,t,a)=>{"use strict";function i(e){let{category_filters:t,domain_filters:a,price_filters:i}=e||{};return!!t||!!a||!!i}a.d(t,{Z:()=>i})},8760:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(667294),n=a(706308),l=a(995917);function r({resourceOptions:e,setFlashlightSearchId:t}){let[a,r]=(0,i.useState)(),[s,o]=(0,i.useState)(""),[u,d]=(0,i.useState)(),c=(0,l.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:e}:null);return(0,i.useEffect)(()=>{let{data:e}=c,a=e?.search_identifier;a&&(t?t(a):o(a)),r(e)},[t,c]),(0,i.useEffect)(()=>{let{data:e}=c,t=e?.search_identifier,i=a?.search_identifier;!e||t&&i&&t===i||(0,n.Z)(a)||!(0,n.Z)(e)||d({category_filters:e.category_filters,domain_filters:e.domain_filters,price_filters:e.price_filters})},[u,a,c]),{visualSearchFlashlightUnifiedResource:c,filters:u,searchId:s,setSearchId:o}}},18529:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(597553);function n({cropperWidth:e,top:t,isRTL:a,isFilterOpened:n,isFlashlightPage:l,isProductOnlyFeed:r}){let s=r?0:e+40,o=e+16,u={top:t,overflow:"auto"};return a?{...u,marginRight:l?o:s}:{...u,marginLeft:l?o:n?s+i.pG:s}}},712314:(e,t,a)=>{"use strict";function i({cropSource:e,inStelaUFExperiment:t,isProductPage:a,surfaceType:i}){return!!a||4===e&&("stl"===i||"stela"===i&&!t)}a.d(t,{Z:()=>i})},23613:(e,t,a)=>{"use strict";function i({isProductPage:e,isStl:t,isUnifiedFeed:a}){return e?[]:!a||t?["visualSearchMainPinImageRender"]:a?["shoppingModuleRender","visualSearchMainPinImageRender"]:[]}a.d(t,{Z:()=>i})},408206:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(906623);function n(){let e=(0,i.E)();return t=>{e&&t&&("remove"===t?e.removeConstraint("shoppingModuleRender"):"complete"===t&&e.markConstraintComplete("shoppingModuleRender"))}}},82205:(e,t,a)=>{"use strict";a.d(t,{Z:()=>v});var i=a(667294),n=a(883119),l=a(785893);function r({isTopRow:e,image:t}){return(0,l.jsxs)(n.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[(0,l.jsx)(n.Ee,{alt:t.alt||"",fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url??""}),!!t.price&&(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:t.price})]})}var s=a(214877),o=a(205841),u=a(184390),d=a(666472),c=a(223785),p=a(340523),g=a(5859),h=a(862249),m=a(259239),_=a(97538);let y={container:{borderRadius:`${c.Oc}px ${c.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},f=({images:e,firstImageIndex:t})=>{let a=t+1,i=t+2;return(0,l.jsxs)(n.xu,{overflow:"hidden",rounding:4,children:[(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:y.content},children:e.at(t)?(0,l.jsx)(r,{image:e[t],isTopRow:!0}):null}),e.length>i?(0,l.jsxs)(n.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,l.jsx)(r,{image:e[a]}),(0,l.jsx)(r,{image:e[i]})]}):null]})};function v({dangerouslySetActionUrl:e,query:t,story:a,slotIndex:r}){let c,v,x,b;let{logContextEvent:S}=(0,s.v)(),{isAuthenticated:w}=(0,g.B)(),{checkExperiment:k}=(0,p.F)(),P=k(w?"web_deprecated_impression_tracker_standalone_impression_auth":"web_deprecated_impression_tracker_standalone_impression_unauth").anyEnabled,{action:F,id:T,objects:j,story_type:I,subtitle:C}=a,{text:E,url:A}=F||{},[D,Z]=(0,i.useState)(!1),L=(0,i.useCallback)(()=>Z(!0),[Z]),R=(0,i.useCallback)(()=>Z(!1),[Z]),O=(j||[]).reduce((e,t)=>"pin"!==t.type?e:[...e,{domain:t.domain,image:{alt:t.title||t.description,height:t.images?.["474x"]?.height,url:t.images?.["474x"]?.url,width:t.images?.["474x"]?.width,price:(t.rich_summary?.products?.[0]||{}).offer_summary?.price}}],[]),K=(O[0]||{}).domain||void 0,M={story_type:I};["search_product_collage_story","shop_article_story"].includes(I)?(c=2,v=43,M={...M,story_id:T,entered_query:t}):"shop_brand_story"===I||"shop_brand_affinity_story"===I?(c=1,v=92,K&&(M={...M,commerce_data:JSON.stringify({domain:K})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(I)?(c=72,v=3050):"related_domain_collage"===I?(c=72,v=3455):"related_products_collage"===I&&(c=1,v=3177);let N=()=>S({event_type:101,element:372,component:200,view_type:c,view_parameter:v,aux_data:{story_type:I}}),z=C?4:2;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(I)&&F){let e=F.user;x=e&&(e.image_medium_url||e.image_large_url),b=e&&e.full_name}let H=e||A;if(!H)return null;let U=(0,h.Z)({url:H})?"nofollow":"none";return P?(0,l.jsx)(d.F,{componentType:200,contextLogData:M||{},impressionType:"Story",loggingId:I,pinData:null,slotIndex:r,viewParameter:v,viewType:c,children:({impressionTrackerRef:e})=>(0,l.jsx)(n.xu,{ref:e,children:(0,l.jsx)(n.Tg,{href:H,onTap:N,rel:U,children:(0,l.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:y.container},onMouseEnter:L,onMouseLeave:R,overflow:"hidden",position:"relative",children:[(0,l.jsx)(f,{firstImageIndex:["related_domain_collage","related_products_collage"].includes(I)?1:0,images:O.map(({image:e})=>e)}),(0,l.jsx)(n.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:z,rounding:"pill",children:(0,l.jsxs)(n.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[C?(0,l.jsx)(n.xu,{marginBottom:1,children:(0,l.jsx)(n.xv,{align:"start",color:"subtle",children:C.format})}):null,(0,l.jsx)(n.xv,{align:"start",weight:"bold",children:E})]})}),b&&x&&(0,l.jsx)(n.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,l.jsx)(o.qE,{name:b,outline:!0,size:"md",src:x})}),(0,l.jsx)(_.Z,{visibility:D?"visible":"none",children:(0,l.jsx)(m.Z,{additionalStyles:y.visualOverlay})})]})})})}):(0,l.jsx)(u.Z,{componentType:200,contextLogData:M||{},impressionType:"Story",loggingId:I,pinData:null,slotIndex:r,viewParameter:v,viewType:c,children:(0,l.jsx)(n.Tg,{href:H,onTap:N,rel:U,children:(0,l.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:y.container},onMouseEnter:L,onMouseLeave:R,overflow:"hidden",position:"relative",children:[(0,l.jsx)(f,{firstImageIndex:["related_domain_collage","related_products_collage"].includes(I)?1:0,images:O.map(({image:e})=>e)}),(0,l.jsx)(n.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:z,rounding:"pill",children:(0,l.jsxs)(n.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[C?(0,l.jsx)(n.xu,{marginBottom:1,children:(0,l.jsx)(n.xv,{align:"start",color:"subtle",children:C.format})}):null,(0,l.jsx)(n.xv,{align:"start",weight:"bold",children:E})]})}),b&&x&&(0,l.jsx)(n.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,l.jsx)(o.qE,{name:b,outline:!0,size:"md",src:x})}),(0,l.jsx)(_.Z,{visibility:D?"visible":"none",children:(0,l.jsx)(m.Z,{additionalStyles:y.visualOverlay})})]})})})}},582158:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var i,n=a(667294);a(167912);var l=a(616550),r=a(922725),s=a(625124),o=a(207012),u=a(520846),d=a(258194),c=a(785893);let p=void 0!==i?i:i=a(394671);function g({customCropper:e,imageSignature:t,imageSize:a,initialCropArea:i,pinKey:g,requestParams:h,showAnimation:m,surfaceType:_,trafficSource:y,viewParameter:f,viewType:v}){let x=(0,o.Z)(p,g),b=(0,l.k6)(),[S,w]=(0,n.useState)(!1),[k,P]=(0,n.useState)({w:0,h:0,x:0,y:0}),[F,T]=(0,n.useState)(0),j=(0,n.useMemo)(()=>(x.visualObjects??[]).filter(e=>e.isStela)||[],[x.visualObjects]);(0,n.useEffect)(()=>{let e=j.findIndex(e=>{let{x:t,y:n,w:l,h:r}=e;return function(e,t,a){let i=Object.keys(e).reduce((a,i)=>a+Math.abs(e[i]-t[i]),0);return i<=4}(i,(0,u.Z)({cropArea:{x:t,y:n,w:l,h:r},scaledWidth:a.w??0,scaledHeight:a.h??0}),0)});T(e)},[a,i,j]);let I=({origCrop:e,cropSource:t,title:a})=>{let i=window.location.search,n=(0,d.Z)({cropArea:e,cropSource:t??6,requestParams:h,surfaceType:_,title:a,trafficSource:y});n!==i&&b.replace({pathname:window.location.pathname,search:n,state:{internalNavigation:!0}})},C=j&&!!j.length;return(0,c.jsx)(r.Z,{imageSize:a,initialCropArea:i,onChange:e??I,previewCropArea:k,showPreviewArea:!1,viewParameter:f,children:C&&(0,c.jsx)(s.Z,{currentSpotlightIdx:F,handleSpotlightClick:t=>{let i=j[t],{x:n,y:l,w:r,h:s}=i,o=(0,u.Z)({cropArea:{x:n,y:l,w:r,h:s},scaledWidth:a.w??0,scaledHeight:a.h??0}),d={origCrop:o,cropSource:i.isStela?4:1,trafficSource:y,title:i.title||""};e?e(d):I(d)},handleSpotlightHover:e=>{if(e!==F){w(!0);let{x:t,y:i,w:n,h:l}=j[e];P((0,u.Z)({cropArea:{x:t,y:i,w:n,h:l},scaledWidth:a.w??0,scaledHeight:a.h??0}))}},handleSpotlightUnhover:()=>{w(!1)},imageSignature:t,imageSize:a,pinKey:x,showAnimation:m,viewParameter:f,viewType:v})},JSON.stringify(i))}},160567:(e,t,a)=>{"use strict";a.d(t,{Pw:()=>i,SB:()=>n,ZP:()=>r,x9:()=>l});let i=80,n=56,l=e=>"phone"===e?n:i;function r(e,t){return t?0:l(e)}},263032:(e,t,a)=>{"use strict";a.d(t,{YS:()=>r,eF:()=>s,m_:()=>l});var i=a(934378),n=a(953565);function l(e,t,a,n,l,r){let s=new URLSearchParams,o=e??"0",u=t.reduce((e,t)=>{if(null!=t){let a=function(e){let t;try{t=decodeURIComponent(e)}catch(a){t=e}t.startsWith("http")?t.startsWith("http://")&&(t=t.replace("http://","https://")):t="https://"+t;try{return new URL(t).origin}catch(i){let a=t.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(a&&a.length>1)return a[1];return e}}(t);return e.add(a)}return e},new Set);return s.append(i.NR.SOURCE_EVENT_ID,o),s.append(i.NR.DESTINATION,JSON.stringify([...u])),s.append(i.NR.EXPIRY,a?i.uV:i.ug),s.append(i.NR.PRIORITY,a?i.NR.CLICK_PRIORITY:i.NR.VIEW_PRIORITY),l&&s.append(i.NR.ADVERTISER_ID,l),n&&s.append(i.NR.CAMPAIGN_ID,n),s.append(i.NR.SOURCE_EVENT_TYPE,a?i.bC:i.Cu),r?"https://www.pinterest.com/attribution_source/?"+s.toString():"/attribution_source/?"+s.toString()}async function r(e,t,a,i,r,s,o,u,d,c){let{appType:p,osType:g}=s||{};if(["Pin","pinImpressions"].includes(e)&&t&&(i||u||d)){(0,n.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:p,osType:g}});try{if(!window.document.featurePolicy?.allowsFeature("attribution-reporting")){(0,n.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:p,osType:g}});return}let e=l(a,[i,u,d],!1,r,o,c),t=await window.fetch(e,{mode:"no-cors",keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}});if(!t.ok)throw Error("server request failed.");(0,n.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:p,osType:g}})}catch(e){(0,n.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:e.name,appType:p,osType:g}})}}else(0,n.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:p,osType:g}})}function s(e){if(e){let t=e.toLowerCase();if(t.includes("windows"))return"windows xp"===t?1:"windows vista"===t?2:"windows 7"===t?3:"windows 8"===t?4:12;if(t.includes("mac os"))return 5;if(t.includes("android"))return 7;if(t.includes("ios"))return 6;if(t.includes("ubuntu"))return 8;if(t.includes("chromium os"))return 13}return 0}},86785:(e,t,a)=>{"use strict";a.d(t,{G6:()=>l,i7:()=>r,oi:()=>i,u$:()=>n,un:()=>o,vU:()=>s});let i=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),n=e=>e?e.includes("Chrome")?i.CHROME:e.includes("Safari")?i.SAFARI:e.includes("Firefox")?i.FIREFOX:e.includes("Opera")?i.OPERA:e.includes("IE")?i.IE:e.includes("Edge")?i.EDGE:i.OTHER:i.OTHER;function l(e){return n(e)===i.SAFARI}function r(e){return n(e)===i.CHROME}function s(e){return n(e)===i.FIREFOX}function o(e){return n(e)===i.EDGE}},259866:(e,t,a)=>{"use strict";function i(e){return function e(t,a){let i;if(null==t||"object"!=typeof t&&"function"!=typeof t)return t;let n=a.find(e=>e.value===t);if(n)return n.result;let l=Object.prototype.toString.call(t);switch(l){case"[object Array]":i=Array(t.length);break;case"[object Set]":i=new Set;break;case"[object Object]":case"[object Arguments]":i={};break;case"[object Map]":i=new Map;break;default:return t}let r=[...a,{value:t,result:i}];switch(l){case"[object Array]":t.forEach((t,a)=>{i[a]=e(t,r)});break;case"[object Set]":t.forEach(t=>{i.add(e(t,r))});break;case"[object Object]":case"[object Arguments]":Object.entries(t).forEach(([t,a])=>{i[t]=e(a,r)});break;case"[object Map]":t.forEach((t,a)=>{i.set(a,e(t,r))})}return i}(e,[])}a.d(t,{Z:()=>i})},207993:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(785893);let n=(0,i.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})}),l=n},262032:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(667294),n=a(883119);let l=(0,i.createContext)();var r=a(785893);function s(e){(0,i.useContext)(l);let{alt:t,color:a,children:s,crossOrigin:o,decoding:u,elementTiming:d,fetchPriority:c,fit:p,loading:g,naturalHeight:h,naturalWidth:m,onError:_,onLoad:y,role:f,sizes:v,src:x,srcSet:b}=e;return(0,r.jsx)(n.Ee,{alt:t,color:a,crossOrigin:o,decoding:u,elementTiming:d,fetchPriority:c,fit:p,loading:g,naturalHeight:h,naturalWidth:m,onError:_,onLoad:y,role:f,sizes:v,src:x,srcSet:b,children:s})}},367295:(e,t,a)=>{"use strict";a.d(t,{MF:()=>l,PB:()=>r,Ul:()=>s,XD:()=>i});let i={AUD:"A$",BRL:"R$",CAD:"$",CZK:"Kč",DKK:"kr",EUR:"€",GBP:"\xa3",HUF:"Ft",MXN:"$",NOK:"kr",NZD:"NZ$",RON:"lei",SEK:"kr",USD:"$",JPY:"\xa5",CHF:"₣"},n=function(e){let t=1.1.toLocaleString(e).substring(1,2);return t},l=function(e,t){return","===n(t)&&e&&e.length>0&&!isNaN(e)?e.replace(".",","):e},r=function(e,t){return","===n(t)&&e?e.replace(",","."):e};function s(e,t,a,i=!1){let{minimumFractionDigits:n,maximumFractionDigits:l}=new Intl.NumberFormat(t,{style:"currency",currency:a}).resolvedOptions(),r=void 0===n?2:n,s=void 0===l?2:l;return e.toLocaleString(t,{maximumFractionDigits:i&&s>0?3:s,minimumFractionDigits:i&&r>0?3:r})}},306604:(e,t,a)=>{"use strict";function i(e,t){let a=e*Math.pow(10,t),i=Math.round((a-parseInt(a,10))*10)/10;return -.5===i&&(i=-.6),a=Math.round(parseInt(a,10)+i)/Math.pow(10,t)}function n(e){let t=parseFloat(e),a=i(t,2);return a?a.toFixed(2):e}function l(e,t=!1,a=""){let i=100,n=1e4;if(a){let{maximumFractionDigits:e}=new Intl.NumberFormat(void 0,{style:"currency",currency:a}).resolvedOptions();"number"==typeof e&&(n=1e6/(i=Math.pow(10,e)))}return t&&(i=1e3,n=1e3),Math.round(e*i)*n}function r(e,t=!1){if(Number.isNaN(e))return 0;let a=1e6;return t&&(a=1e6),e/a}function s(e){return e?n(r(e).toString()):""}a.d(t,{$X:()=>r,Hy:()=>s,c3:()=>p,cq:()=>n,q$:()=>i,qq:()=>c,y:()=>l});let o={fractionalCentFormatData:{},formatData:{}};function u(e){return e&&(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")),e}function d(e,t=!1){let a=t?"fractionalCentFormatData":"formatData",i=o[a][e];if(!i){let n=2,l=2,r=-9999.99;t&&(n=3,l=3,r=-9999.999);let s=new Intl.NumberFormat(e,{minimumFractionDigits:n,maximumFractionDigits:l}),d=s.formatToParts(r),c=d.find(e=>"minusSign"===e.type),p=d.find(e=>"group"===e.type),g=d.find(e=>"decimal"===e.type),h=p?p.value:"",m=u(h),_=g?g.value:"",y="[^0-9"+m+u(_)+u(c?c.value:"")+"]";i={format:s,decimal:g?g.value:null,group:h,groupRegex:RegExp(m||"","g"),cleaner:RegExp(y,"g")},o[a][e]=i}return i}function c(e,t,a=!1){if("number"==typeof e)return e;if("string"!=typeof e)return NaN;let i=d(t,a),n=e.replace(i.cleaner,"");return i.decimal&&(n=n.replace(i.decimal,"!_!")),i.group&&(n=n.replace(i.groupRegex,"")),parseFloat(n=n.replace("!_!","."))}function p(e,t,a=!1){let i=d(t,a);return i.format.format(e)}},307772:(e,t,a)=>{"use strict";function i(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,{Z3:()=>c,LU:()=>p,ZP:()=>g});let n=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,l={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},r={},s={background:"#FF8A8A",transform:"scale(.98)"},o={init:e=>({transform:`scale(${r[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[l.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[l.exit]:s,[l.stopped]:s,[l.paused]:s,[l.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class u{constructor(e){i(this,"setMutationObserver",e=>(this.mutationObserver=e,this)),i(this,"startMutationObserver",e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)}),i(this,"stopMutationObserver",()=>{this.mutationObserver&&this.mutationObserver.disconnect()}),i(this,"handleIntersectionChange",e=>{let t=e.intersectionRatio>0||e.isIntersecting;if(t&&!this.inViewport){let e=Date.now();this.startTime=e,this._debug(l.enter,{startTime:e,node:this.node}),this.enterCallbacks.forEach(e=>e())}else!t&&this.inViewport&&(this._debug(l.exit,!0),this.exitCallbacks.forEach(e=>e(this.toJSON())));this.inViewport=t}),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId=""}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,n&&Object.assign(this.node.style,o.init(e)),this}pause(){return this.inViewport&&(this._debug(l.paused,!0),this.exitCallbacks.forEach(e=>e(this.toJSON()))),this}resume(){if(this.inViewport){let e=Date.now();this._debug(l.resumed,{startTime:e}),this.startTime=e}return this}stop(e){return this.inViewport&&(this._debug(l.stopped,!0),this.exitCallbacks.forEach(t=>t(this.toJSON(e)))),this}toJSON(e=""){return{startTime:1e6*this.startTime,endTime:1e6*Date.now(),forcedExit:e}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:`${(Date.now()-this.startTime)/1e3} seconds`}}_debug(e,t){if(n)switch(window.console.log(`📌 ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),o[e]&&Object.assign(this.node.style,o[e]),e){case l.flushed:case l.paused:case l.exit:r[this.debugId]=!0}}}function d(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let c=!0,p=!1;class g{constructor(){d(this,"_delegateChange",e=>{e.forEach(e=>{let t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)})}),d(this,"_handleMutations",(e,t)=>{let a=this.mutationObservers.get(t),i=a&&a.offsetHeight<1;i&&a&&this.stop(a,"removed")}),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=p,this.observer=new window.IntersectionObserver(this._delegateChange),window.Cypress&&!window.activeImpressions&&(window.activeImpressions=new Map),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){let a=this.activeImpressions.get(e);a&&(a.stop(t),this.mutationObservers.delete(a.mutationObserver),a.stopMutationObserver(),this.activeImpressions.delete(e),window.activeImpressions?.delete(e),this.observer.unobserve(e))}start(e){let t=this.activeImpressions.get(e);return t||(t=new u(e),this.activeImpressions.set(e,t),window.activeImpressions?.set(e,t),this.observer.observe(e),t.setMutationObserver(new window.MutationObserver((e,t)=>this._handleMutations(e,t))),this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})),t}pause(e=c){this.paused||(Array.from(this.activeImpressions.values()).forEach(e=>e.pause()),this.paused=!0,this.pausePriority!==p||(this.pausePriority=e))}resume(e=c){(e!==p||this.pausePriority!==c)&&this.paused&&(Array.from(this.activeImpressions.values()).forEach(e=>e.resume()),this.paused=!1,this.pausePriority=p)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){let e=Array.from(this.topObstructions).reduce((e,t)=>{let{bottom:a}=t.getBoundingClientRect();return a>e?a:e},0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce((e,t)=>{let{top:a}=t.getBoundingClientRect();return a<e?a:e},window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){let a={rootMargin:`${-e}px 0px ${-t}px`};this.observer.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,a),Array.from(this.activeImpressions.values()).forEach(e=>this.observer.observe(e.node)),this.topHeight=e,this.bottomHeight=t}}}},30378:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(307772);let n=new i.ZP},681508:(e,t,a)=>{"use strict";a.d(t,{Q4:()=>c,Rq:()=>l,Vf:()=>r,ab:()=>u,jd:()=>s,nw:()=>d,oy:()=>o});var i=a(658583),n=a(622541);let l=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,r=28,s=e=>window.innerHeight>=748&&l(e),o=function(){return"undefined"!=typeof window&&!!window.navigator&&(/iPad/.test(navigator.platform)||navigator.maxTouchPoints>1&&"MacIntel"===navigator.platform)},u=()=>{i.t8(n.oj,String(!0),(0,i.kZ)(n.oj))},d=()=>!!i.U2(n.oj),c=()=>{if(o()){let e=d();e||(u(),"undefined"!=typeof window&&window.location.reload(!0))}}},422210:(e,t,a)=>{"use strict";function i(e){if(!e)return!1;let t=new Date(e);return t.setDate(t.getDate()+28),new Date().getTime()<t.getTime()}a.d(t,{Z:()=>i})},179425:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var i=a(883119),n=a(213377),l=a(681508),r=a(403862),s=a(5859),o=a(785893);let u=({children:e,dataLayoutShiftBoundaryId:t,hasFixedHeader:a=!1,hasGutter:u=!0,height:d,showKeychainError:c=!1,useViewport:p=!1})=>{let g=(0,s.B)(),h=(0,l.jd)(g.userAgent.platform)?l.Vf:0;return(0,o.jsx)(i.xu,{"data-layout-shift-boundary-id":t||"PageContainer",height:p?`calc(100vh - ${h}px)`:d,paddingX:u?n.D6:void 0,paddingY:a||c?void 0:3,children:(0,o.jsx)(r.C,{value:!!u,children:e})})}},403862:(e,t,a)=>{"use strict";a.d(t,{C:()=>l,V:()=>r});var i=a(667294);let n=(0,i.createContext)(!1),l=n.Provider,r=()=>(0,i.useContext)(n)},189469:(e,t,a)=>{"use strict";function i(e,t,a){return!!(e&&e.trim().length>0&&t&&!a)}a.d(t,{r:()=>i})},567344:(e,t,a)=>{"use strict";a.d(t,{eg:()=>r,kt:()=>m,rw:()=>g,fs:()=>d,eK:()=>c,Ly:()=>p,BY:()=>h,bN:()=>_,RC:()=>o,EU:()=>u});let i=/\s\s+/g,n=e=>e.replace(i," ");var l=a(564855);let r=Object.freeze(new Set(["sensitive_raw_pin_text","is_sensitive_rich_pin_description","is_sensitive_rich_pin_title","is_sensitive_board_title"])),s=e=>"string"==typeof e?e:"",o=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,u=(e,t)=>e?e.trim().length>t?(0,l.ZP)(e.trim(),t).trim():e.trim():"",d=({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l})=>{let r=l||e,s=u(t,200);return s||a||i||(n&&r?r:null)},c=e=>{let{richSummaryDisplayName:t}=e,a=e.pinJoinVisualAnnotation||[],i=e.pinJoinAnnotationsWithLinks||{},r=e.richMetadataDescription||"",s=e.closeupUnifiedDescription||"",o=a.map(e=>(i||{})[e]||{name:e,url:""}),u="",d=(t||"").toLocaleLowerCase().trim(),c=r.toLocaleLowerCase().trim(),p=s.toLocaleLowerCase().trim();return s&&s.length>3&&p!==d?u=s:r&&r.length>3&&c!==d&&(u=r),u&&(u=n((0,l.ZP)(u,496)).trim()),{description:u,annotationsWithLinks:o}},p=({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l,pinJoinVisualAnnotation:s,seoNoindexReason:o,seoTitle:u})=>r.has(o??"")?u:d({pinTitle:e,gridTitle:t,richSummaryDisplayName:a,richMetadataTitle:i,storyPinDataId:n,storyPinDataMetadataPinTitle:l})||s?.[0]||e,g=(e,t,a,i,n)=>{let l=s(e).trim(),r=(e,t)=>t&&t.length>0?`${e} ${t.join(", ")}`:e;return i&&i.trim().length?r(i.trim(),a):n&&n.trim().length?n.trim():l?r(l,a):a?a.join(", "):""},h=e=>`/pin/${e}/`,m=(e,t)=>{let a=`Pinterest video from ${t}: `.concat(e);return""===t?e:a},_=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:h(e)},182962:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(667294),n=a(340523);let l=()=>{let e=(0,n.F)();return(0,i.useCallback)(()=>{e.flush()},[e])}},448318:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(667294),n=a(262032),l=a(785893);let r=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,t,a)=>{let n=(0,i.useRef)(null),l=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(e!==n.current||a&&a!==l.current){n.current=e;let a=r(e);a?.complete&&t()}l.current=a},[e,t,a])};function o({alt:e,children:t,color:a,elementTiming:i,isActive:r=!1,naturalHeight:o,naturalWidth:u,onLoad:d,src:c,fit:p="none"}){return s(c,d,r),(0,l.jsx)(n.Z,{alt:e,color:a,elementTiming:i,fit:p,naturalHeight:o,naturalWidth:u,onLoad:d,src:c,children:t})}},7829:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var i=a(995917),n=a(149722),l=a(616550),r=a(5859),s=a(554786),o=a(624797);function u({getOptions:e,checkExperiments:t,disableFetch:a,...u}){let d=function(){let e=(0,n.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee,isPartner:!!e.isPartner,username:e.username||void 0}}(),{args:c,fetchDisabled:p}=function({checkExperiments:e,disableFetch:t,viewer:a}){let i=(0,l.TH)(),n=(0,l.$B)(),u=(0,r.B)(),d=function({advertiser:e,deviceType:t,location:{pathname:a,search:i},inviteCode:n,match:{params:l,path:r},viewer:s}){let u={inviteCode:n,matchPath:r,params:l,parsedSearch:(0,o.mB)(i),pathname:a,search:i},d={country:s.country||void 0,id:s.id||void 0,isAuth:s.isAuth,isEmployee:!!s.isEmployee,isPartner:!!s.isPartner,username:s.username||void 0};return{advertiser:e,deviceType:t,routeData:u,user:d}}({advertiser:u.advertiser,deviceType:(0,s.Mq)(u),location:i,match:n,viewer:a,inviteCode:u.inviteCode??""}),c=!!t&&t(d),p=!!c||!e||e(u.experimentsClient);return{args:d,fetchDisabled:c||!p}}({checkExperiments:t,disableFetch:a,viewer:d}),g=e?e(c):void 0;return(0,i.Z)(p?null:{options:g,...u})}},344064:(e,t,a)=>{"use strict";a.d(t,{o$:()=>n,ty:()=>l,vE:()=>r});var i=a(342513);let{Provider:n,MaybeConsumer:l,useMaybeHook:r}=(0,i.Z)("inviteContext")},55202:(e,t,a)=>{"use strict";a.d(t,{U:()=>r,Z:()=>s});var i=a(317540),n=a(785893);let l=()=>{},r=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()};function s({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:a,allowScroll:s,children:o}){let u=e=>{t&&e.keyCode===i.Z.ESCAPE||r(e)};return(0,n.jsx)("div",{onAbort:r,onAnimationEnd:r,onAnimationIteration:r,onAnimationStart:r,onBlur:l,onCanPlay:a?l:r,onCanPlayThrough:r,onChange:r,onClick:e?l:r,onCompositionEnd:r,onCompositionStart:r,onCompositionUpdate:r,onContextMenu:r,onCopy:r,onCut:r,onDoubleClick:r,onDurationChange:r,onEmptied:r,onEncrypted:r,onEnded:r,onError:r,onFocus:l,onInput:r,onInvalid:r,onKeyDown:u,onKeyPress:u,onKeyUp:u,onLoad:r,onLoadedData:r,onLoadedMetadata:r,onLoadStart:r,onMouseDown:r,onMouseEnter:r,onMouseLeave:r,onMouseMove:e?l:r,onMouseOut:r,onMouseOver:r,onMouseUp:e?l:r,onPaste:r,onPause:r,onPlay:r,onPlaying:r,onProgress:r,onRateChange:r,onScroll:s?l:r,onSeeked:r,onSeeking:r,onSelect:r,onStalled:r,onSubmit:r,onSuspend:r,onTimeUpdate:r,onTouchCancel:r,onTouchEnd:e?l:r,onTouchMove:e?l:r,onTouchStart:e?l:r,onTransitionEnd:r,onVolumeChange:r,onWaiting:r,onWheel:r,children:o})}},233440:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(301923);let n=(0,i.Z)({type:"session"}),l=n},156725:(e,t,a)=>{"use strict";function i(e){return e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1)}a.d(t,{Z:()=>i})},564855:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>n,mP:()=>i});let i="…";function n(e,t=80,a=i,n=!1){let l;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||n)l=e.substring(0,t);else{let a=e.lastIndexOf(" ",t);l=e.substring(0,a)}return(l=l.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+a}},623409:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var i=a(667294),n=a(616550),l=a(96157),r=a(217058);let s=e=>(0,l.L6)(e)?"pin":(0,l.am)(e)?"board":(0,l.Xn)(e)?"login":(0,l.C$)(e)?"home":(0,l.cD)(e)?"profile":(0,l.dr)(e)?"ideas":(0,l.gT)(e)?"ideas-root":(0,l.tZ)(e)?"videos":(0,l.Q0)(e)?"videos-category":(0,l.$Y)(e)?"article":(0,l.E0)(e)?"shopping-spotlight":(0,l.Zz)(e)?"today":(0,l.j8)(e)?"unauth-profile":(0,l.f1)(e)?"shopping-root":(0,l.OX)(e)?"shopping-category":"other";function o(){let e=(0,n.TH)();return(0,i.useCallback)(({action:t,item:a,within:i})=>{let n=s(e);(0,r.My)(`logged_out_product.interaction.${n}.${t}`,{item:a||"none",within:i||"none"})},[e])}},689390:(e,t,a)=>{"use strict";function i(e){if((e||"").includes("--")){let t=e.split("--"),a=t.pop();return{text:t.join("--"),pinId:a}}return{text:"",pinId:e}}a.d(t,{Z:()=>i})},587070:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(667294);function n(e,t){let a=(0,i.useRef)([]),[n,l]=(0,i.useState)(),[r,s]=(0,i.useReducer)(n??(()=>t),t),o=(0,i.useCallback)(t=>{n?s(t):(a.current.length||e().then(e=>{l(()=>e.default)}),a.current=[...a.current,t])},[e,n]);return(0,i.useEffect)(()=>{n&&(a.current.forEach(s),a.current=[])},[n]),[r,o]}},194602:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(667294);let n=()=>()=>{},l=()=>!1,r=()=>!0,s=()=>{let e=(0,i.useSyncExternalStore)(n,l,r);return e}},760101:(e,t,a)=>{"use strict";a.d(t,{G:()=>s,Z:()=>o});var i=a(667294),n=a(616550),l=a(785893);let r=(0,i.createContext)(!0);function s({children:e}){let t=(0,n.TH)(),[a,s]=(0,i.useState)(!0),o=(0,i.useRef)(t);return(0,i.useEffect)(()=>{o.current!==t&&(o.current=t,s(!1))},[t]),(0,l.jsx)(r.Provider,{value:a,children:e})}function o(){return(0,i.useContext)(r)}},429218:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(667294);let n=()=>{let e=(0,i.useRef)(!1);return(0,i.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},369708:(e,t,a)=>{"use strict";a.d(t,{Wr:()=>d,rG:()=>u});var i=a(667294),n=a(214877),l=a(342513),r=a(340523),s=a(785893);let{Provider:o,useHook:u}=(0,l.Z)("VideoPlayer");function d({children:e}){let{logContextEvent:t,logImpression:a}=(0,n.v)(),{checkExperiment:l}=(0,r.F)(),[u,d]=(0,i.useState)(!1),[c,p]=(0,i.useState)([]),[g,h]=(0,i.useState)([]),[m,_]=(0,i.useState)({}),y=l("web_ads_mrc_video_impression").anyEnabled,f=e=>{_(t=>({...t,[e]:!0}))},v=(0,i.useCallback)(e=>{if(18===e.event_type&&e.event_data?.pinImpressions?.length){let{isNativeVideoAndWatchable:t}=e.event_data.pinImpressions[0],a=(e.aux_data?.commerce_data||"").includes("story_pin_id");y&&(t||a)&&p(t=>[...t,e].slice(-1e3))}},[y]),x=(0,i.useCallback)(e=>{18===e.eventType&&y&&h(t=>[...t,e].slice(-1e3))},[y]),b=e=>{let{renderDuration:t,time:a}=e.event_data.pinImpressions[0],i=Math.max(t,15e8);return{...e,event_data:{...e.event_data,pinImpressions:[{...e.event_data.pinImpressions[0],isMrcBtr:!0,endTime:a+i,renderDuration:i}]}}},S=e=>{if(e.eventData){let{time:t,endTime:a}=e.eventData;return{...e,eventData:{...e.eventData,isMrcBtr:!0,endTime:(t??0)+Math.max((a??0)-(t??0),15e8)}}}return null};(0,i.useEffect)(()=>{let e=c.filter(e=>{let{pinIdStr:a}=e.event_data.pinImpressions[0],i=m[a];if(i&&y){let a=b(e);return t(a),!1}return!0});e.length!==c.length&&p(e)},[c,y,t,m]),(0,i.useEffect)(()=>{let e=g.filter(e=>{let t=e.eventData?.pinIdStr;if(!t)return!1;let i=m[t];if(i&&y){let t=S(e);return t&&a(t),!1}return!0});e.length!==g.length&&h(e)},[g,y,a,m]);let w=(0,i.useMemo)(()=>({captionsEnabled:u,logMrcVideoAdImpressionOnPlay:x,logMrcVideoAdEventOnPlay:v,setCaptionsEnabled:d,setVideoPlayed:f,videosPlayed:m}),[u,v,x,m]);return(0,s.jsx)(o,{value:w,children:e})}},670588:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(739149);function n({x:e,y:t,w:a,h:n},l){return(0,i.Z)({x:e,y:t,w:a,h:n})?{x:l?parseInt(e,10):parseFloat(e),y:l?parseInt(t,10):parseFloat(t),w:l?parseInt(a,10):parseFloat(a),h:l?parseInt(n,10):parseFloat(n)}:{x:0,y:0,w:1,h:1}}},250790:(e,t,a)=>{"use strict";function i(e){let t;switch(e){case 1:t=1;break;case 2:t=2;break;case 3:t=3;break;case 4:t=4;break;case 5:t=5;break;case 6:t=6}return t}a.d(t,{Z:()=>i})},40770:(e,t,a)=>{"use strict";function i({cropSource:e,surfaceType:t,isProductPage:a}){return"stl"===t&&4===e?"shop_the_look_module":a?"feed_module":null}a.d(t,{Z:()=>i})},291940:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(339001);function n({cropSource:e,i18n:t,inFlashlightUFExperiment:a,inStelaUFExperiment:n,isProductPage:l,surfaceType:r,title:s}){let o=t._('Image search', 'imageSearch.header', 'header explaining the results of image search'),u=t._('Shop the look', 'shopTheLook.header', 'User will see this Shop the look header when navigating from the Shop the look module'),d=(0,i.nk)(t._('Shop {{ category }}', 'relatedProducts.stela.header', 'header for related products stela feed'),{category:(s||"").toLowerCase()}).join("");return l?s:"stl"===r?4===e?u:o:a&&"flashlight"===r||n&&["stela","stl"].includes(r)?4===e?"":o:4===e?d:o}},755453:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(258194);function n({cropArea:e,cropSource:t,isProductPage:a,pinId:n,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:u}){let d=(0,i.Z)({cropArea:e,cropSource:t,requestParams:l,searchQuery:r,surfaceType:s,title:o,trafficSource:u}),c="";return a&&(c="products/"),`/pin/${n}/visual-search/${c}${d}`}},739149:(e,t,a)=>{"use strict";function i({x:e,y:t,w:a,h:i}){return[e,t,a,i].every(e=>""!==e&&null!=e&&Number.isFinite(Number(e)))}a.d(t,{Z:()=>i})},152509:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o}),a(422578);var i,n=a(207012),l=a(340523),r=a(268127);let s=void 0!==i?i:i=a(684824);function o({entrySource:e,isProductPage:t,pinKey:a,surfaceType:i,viewParameter:o,viewType:u}){let{checkExperiment:d}=(0,l.F)(),{anyEnabled:c}=d("web_unified_visual_feed"),{anyEnabled:p}=d("web_flashlight_unified_feed"),g=(0,n.Z)(s,a),h=(0,r.Z)(g),m=h({default:{is_product_only_feed:"stl"===i||t}});if(c||p)return{view_type:u,view_parameter:o,aux_data:m};if(!["stela","stl"].includes(i))return{view_type:u,view_parameter:3050,view_data:{pin_id:g.entityId}};{let t=(g.visualObjects||[]).some(e=>e.isStela);return{view_type:u,view_parameter:o,view_data:{pin_id:g.entityId},aux_data:{commerce_data:JSON.stringify({entrypoint:e,pin_is_stela:t})}}}}},239821:(e,t,a)=>{"use strict";a.d(t,{g:()=>p,I:()=>c});var i=a(667294),n=a(342513),l=a(705895),r=a(259866);let s={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},viewportSize:"lg"},o=(e=s,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type&&e.showTypeaheadOverlay!==t.payload)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){let{payload:a}=t,{pinId:i,isPromoted:n,currentTime:l}=a,{videosAutoplaying:s}=e,{currentlyPlayingOrganicVideoId:o,promotedVideosAutoplaying:u,organicVideosAutoplaying:d}=s,c=(0,r.Z)(u),p=(0,r.Z)(d);return!n&&o?e:(n?c[i]={pinId:i,currentTime:l,paused:!1}:p[i]={pinId:i,currentTime:l,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:n?o:i,promotedVideosAutoplaying:c,organicVideosAutoplaying:p}})}if("SET_IS_AUTOPLAY"===t.type&&e.isAutoplay!==t.payload)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){let{payload:a}=t,{pinId:i,isPromoted:n,currentTime:l}=a,{videosAutoplaying:s}=e,{promotedVideosAutoplaying:o,organicVideosAutoplaying:u}=s,d=(0,r.Z)(o),c=(0,r.Z)(u);return n?d[i]={...d[i],paused:!0,currentTime:l}:c[i]={...c[i],paused:!0,currentTime:l},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:d,organicVideosAutoplaying:c}}}if("SET_APP_FOCUS_STATE"===t.type&&e.appInFocus!==t.payload)return{...e,appInFocus:t.payload};if("SET_VIEWPORT_SIZE"===t.type&&e.viewportSize!==t.payload)return{...e,viewportSize:t.payload};if("SET_FOOTER_VISIBILITY_STATE"===t.type&&e.footerPlusButtonVisible!==t.payload)return{...e,footerPlusButtonVisible:t.payload};return e};var u=a(785893);let{Provider:d,useHook:c}=(0,n.Z)("AppUI");function p({children:e}){let[t,a]=(0,i.useReducer)(o,s),n=(0,i.useCallback)(e=>a({type:"PAUSE_CURRENT_VIDEO",payload:e}),[]),r=(0,i.useCallback)(e=>a({type:"SET_APP_FOCUS_STATE",payload:e}),[]),c=(0,i.useCallback)(e=>a({type:"SET_CURRENT_VIDEO",payload:e}),[]),p=(0,i.useCallback)(e=>a({type:"SET_FOOTER_VISIBILITY_STATE",payload:e}),[]),g=(0,i.useCallback)(e=>a({type:"SET_IS_AUTOPLAY",payload:e}),[]),h=(0,i.useCallback)(e=>a({type:"SET_VIEWPORT_SIZE",payload:e}),[]),m=(0,i.useCallback)(e=>a({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e}),[]),_=(0,i.useMemo)(()=>({pauseAutoplay:n,setCurrentVideo:c,setFooterPlusButtonVisible:p,setIsAutoplay:g,setViewportSize:h,toggleTypeaheadOverlay:m,setAppFocusState:r,appUI:t}),[n,c,p,g,h,m,r,t]);return(0,i.useEffect)(()=>{l.Z.onSessionResume(()=>{r(!0)}).onSessionPause(()=>{r(!1)})},[r]),(0,u.jsx)(d,{value:_,children:e})}},154792:(e,t,a)=>{"use strict";a.d(t,{X:()=>n,Z:()=>l});var i=a(667294);let n=120;function l(e,t=0,a=n){let[l,r]=(0,i.useState)(e?"active":"inactive");return(0,i.useEffect)(()=>{if(e){if(t){let e=setTimeout(()=>r("active"),t);return()=>{clearTimeout(e)}}r("active")}else{let e=setTimeout(()=>r("inactive"),a);return()=>{clearTimeout(e)}}},[e]),l}},97538:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(883119),n=a(154792),l=a(785893);function r({children:e,fadeInDuration:t=0,fadeOutDuration:a=n.X,visibility:r}){return"none"!==r&&e?(0,l.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{hidden:{opacity:0,transition:a?`opacity ${a}ms ease`:void 0},visible:{opacity:1,transition:t?`opacity ${t}ms ease`:void 0}}[r]},children:e}):null}},301551:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var i=a(422210),n=a(588664);let l=["US","GB","DE","CA","FR"];function r(e){return!(0,i.Z)(e.createdAt)&&!(0,n.Z)(null,e)&&l.includes(e.country)}},810052:(e,t,a)=>{"use strict";a.d(t,{D:()=>n,a:()=>l});var i=a(342513);let{Provider:n,useMaybeHook:l}=(0,i.Z)("unauthPageWrapperContext")},761203:(e,t,a)=>{"use strict";a.d(t,{bn:()=>s,fJ:()=>u,gC:()=>o});var i=a(702664),n=a(342513),l=a(785893);let{Provider:r,useHook:s}=(0,n.Z)("Boards");function o(){let e=s();return t=>e[t]}function u({children:e}){let t=(0,i.useSelector)(({boards:e})=>e,i.shallowEqual);return(0,l.jsx)(r,{value:t,children:e})}},386008:(e,t,a)=>{"use strict";a.d(t,{Tt:()=>c,cm:()=>d,kW:()=>o,kY:()=>p,mN:()=>u});var i=a(702664),n=a(342513),l=a(149722),r=a(785893);let{Provider:s,useHook:o}=(0,n.Z)("Users");function u(){let e=o();return t=>e[t]}function d(){let e=o();return(t,a=!1)=>{let i=Object.keys(e).find(a=>e[a].username===t);if(i||!a)return e[i??""]}}function c(){let{id:e}=(0,l.Z)(),t=o();return t[e??""]}function p({children:e}){let t=(0,i.useSelector)(({users:e})=>e,i.shallowEqual);return(0,r.jsx)(s,{value:t,children:e})}},774812:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var i=a(667294),n=a(883119),l=a(775089),r=a(213377),s=a(493538),o=a(823987),u=a(554786),d=a(494125),c=a(771881),p=a(184972),g=a(187156),h=a(785893);function m({customLayoutType:e,emptyState:t,feedItems:a,feedKey:m,maxColumns:_,pagination:{hasNext:y,isLoadingNext:f,loadNext:v,refetch:x},pullToRefresh:b,renderFeedItem:S,serverRender:w}){let k=(0,u.HG)(),[P,F]=(0,i.useState)(!1),T="userSearch"===e?window.innerWidth-16:200,j=f&&0===a.length&&!P,I="desktopFlashlight"===e?0:r.qG;return(0,d.Z)(()=>(window.addEventListener("online",v),()=>window.removeEventListener("online",v))),(0,h.jsxs)(n.xu,{"data-test-id":"MobileFeed",children:[(0,h.jsx)(p.Z,{enabled:!!b,onPull:()=>{x(),F(!0)},refreshing:P}),(0,h.jsxs)(n.xu,{"data-test-id":"grid",marginEnd:I,marginStart:I,opacity:P?.5:1,children:[(0,h.jsx)(s.Z,{isAtEndOfFeed:!y,itemCount:a.length,children:a.length?(0,h.jsx)(n.xu,{"data-test-id":"feed",marginTop:(0,c.kk)({isDesktop:k}),children:(0,h.jsx)(o.Z.Consumer,{children:t=>(0,h.jsx)(i.Fragment,{children:(0,h.jsx)(c.c$,{children:(0,h.jsx)(l.default,{cacheKey:m,columnWidth:k?r.yF:T,gutterWidth:k?4*r.jC:void 0,id:w?m:void 0,items:a,loadItems:v,maxColumns:_,minCols:"userSearch"===e?1:2,renderItem:({data:e,itemIdx:t})=>S(e,t),scrollContainerRef:t,serverRender:w})})})})}):f?(0,h.jsx)(c.gG,{}):t??null}),j&&(0,h.jsx)(n.xu,{column:12,paddingY:2,children:(0,h.jsx)(g.Z,{partialViewportWidth:"desktopFlashlight"===e})})]})]})}},155117:(e,t,a)=>{"use strict";a.d(t,{f:()=>s,w:()=>o});var i=a(667294),n=a(342513),l=a(785893);let{Provider:r,useHook:s}=(0,n.Z)("Session");function o({children:e}){let[t,a]=(0,i.useState)(void 0),n=(0,i.useCallback)(()=>a(void 0),[]),s=(0,i.useMemo)(()=>({unauthFollowUserId:t,setUnauthFollowUserId:a,removeUnauthFollowUserId:n}),[t,n]);return(0,l.jsx)(r,{value:s,children:e})}},295166:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var i,n=a(667294);a(167912);var l=a(207012),r=a(340523),s=a(995917),o=a(609380),u=a(920672),d=a(785893);let c=void 0!==i?i:i=a(982385);function p(e){let{legacySearchId:t,pinKey:a,resourceOptions:i,setLegacySearchId:p}=e,{checkExperiment:g}=(0,r.F)(),h=(0,l.Z)(c,a),m=(0,s.Z)({name:"VisualLiveSearchProductFeedResource",options:i}),{anyEnabled:_}=g("web_image_search_unification"),y=m.data?.search_identifier||"";return((0,n.useEffect)(()=>{p&&y&&t!==y&&p(y)}),_)?(0,d.jsx)(u.Z,{pinKey:h,visualLiveSearchProductFeedResourceData:m}):(0,d.jsx)(o.Z,{visualLiveSearchProductFeedResourceData:m})}},128993:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var i,n=a(667294);a(167912);var l=a(207012),r=a(340523),s=a(995917),o=a(745998),u=a(920672),d=a(785893);let c=void 0!==i?i:i=a(290602);function p(e){let{legacySearchId:t,pinKey:a,resourceOptions:i,setLegacySearchId:p}=e,{checkExperiment:g}=(0,r.F)(),h=(0,l.Z)(c,a),m=(0,s.Z)({name:"VisualLiveSearchResource",options:i}),{anyEnabled:_}=g("web_image_search_unification"),y=m.data?.search_identifier||"";return((0,n.useEffect)(()=>{p&&y&&t!==y&&p(y)}),_)?(0,d.jsx)(u.Z,{pinKey:h,visualLiveSearchResourceData:m}):(0,d.jsx)(o.Z,{pinKey:h,viewParameter:3050,visualLiveSearchResourceData:m})}},920672:(e,t,a)=>{"use strict";a.d(t,{Z:()=>Z});var i,n=a(667294);a(167912);var l=a(616550),r=a(883119),s=a(23613),o=a(520991),u=a(967871),d=a(706308),c=a(155364),p=a(549629),g=a(207012),h=a(213377),m=a(140017),_=a(777609),y=a(340523),f=a(603642),v=a(513911),x=a(71328),b=a(627408),S=a(291940),w=a(755453),k=a(152509),P=a(609380),F=a(745998),T=a(136359),j=a(597553),I=a(76936),C=a(34202),E=a(785893);let A=o.M+32,D=void 0!==i?i:i=a(91856);function Z(e){let{checkExperiment:t}=(0,y.F)(),a=(0,l.k6)(),i=(0,l.TH)(),Z=(0,m.ZP)(),L=(0,C.Z)(),R=(0,T.t)(),{filters:O,pinKey:K,visualSearchFlashlightUnifiedResourceData:M,visualLiveSearchResourceData:N,visualLiveSearchProductFeedResourceData:z}=e,{cropArea:H,cropSource:U,entrySource:V,handleFilterChange:$,isProductPage:B,requestParams:G,searchQuery:W,submittedFilters:Y,surfaceType:q,title:X,trafficSource:J}=L||{},{category_filters:Q,domain_filters:ee,price_filters:et}=O||{},ea=(0,g.Z)(D,K),{getNormalizedPinImage:ei}=(0,_.Z)({pinKey:ea,maxWidth:v.RZ}),{anyEnabled:en}=t("web_unified_visual_feed"),{anyEnabled:el}=t("web_flashlight_unified_feed"),er=(0,S.Z)({cropSource:U,i18n:Z,inFlashlightUFExperiment:el,inStelaUFExperiment:en,isProductPage:B,surfaceType:q,title:X}),[es,eo]=(0,n.useState)(!1),[eu,ed]=(0,n.useState)(""),ec=es?j.pG:0,ep=(0,d.Z)(O),{state:eg}=i||{},{internalNavigation:eh=!1}=eg||{},{width:em,height:e_,url:ey}=ei(),ef=em+20,ev=es?0:12,ex=B?0:ef+4*ev,eb=ex+ec,eS=en&&!B&&"stl"!==q,[ew,ek]=(0,n.useState)(window.innerWidth);(0,n.useEffect)(()=>{let e=(0,x.Z)(()=>ek(window.innerWidth),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)});let eP=M?.data?.search_identifier||N?.data?.search_identifier||z?.data?.search_identifier||"",[eF,eT]=(0,n.useState)(eP);(0,n.useEffect)(()=>{eP&&eF!==eP&&eT(eP)},[eP,eF]);let ej=(0,n.useRef)(null),eI=0,eC="";(0,n.useEffect)(()=>(ej&&ej.current&&eC===ea.entityId&&(ej.current.scrollTop=eI),()=>{ej&&ej.current&&(eI=ej.current.scrollTop,eC=ea.entityId)}),[ej]);let eE=["stela","stl"].includes(q)?427:"flashlight"===q?el&&B?427:72:427,eA=["stela","stl"].includes(q)?4===U?3462:3455:"flashlight"===q?el&&4===U?3462:3050:3462,eD=(0,k.Z)({entrySource:V,isProductPage:B,pinKey:ea,surfaceType:q,viewParameter:eA,viewType:eE});return(0,E.jsx)(f.Z,{constraints:(0,s.Z)({isProductPage:B,isStl:"stl"===q,isUnifiedFeed:el||en}),measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,E.jsx)(b.Z,{objectId:eF,view:eE,children:(0,E.jsx)(p.Z,{log:eD,children:(0,E.jsxs)(r.xu,{"data-test-id":"related-products",children:[(0,E.jsx)(o.Z,{filtersText:eu,handleDrawerClose:function(){eo(!1)},handleDrawerOpen:function(){eo(!0)},isDrawerOpen:es,isProductOnlyFeed:B,pinId:ea.entityId,showFilter:!eS&&ep,title:er,viewParameter:eA,viewType:eE}),ep&&(0,E.jsx)(I.Z,{categoryFilters:Q,cropSource:U,domainFilters:ee,handleFilterChange:$??(()=>{}),handleSubmit:function(){let e=(0,w.Z)({cropArea:H,cropSource:U,isProductPage:B,pinId:ea.entityId,requestParams:G,searchQuery:W,surfaceType:q,title:X,trafficSource:J});a.replace(e)},isDrawerOpen:es,pinId:ea.entityId,priceFilters:et,submittedFilters:Y,topOffset:o.M,updateButtonText:e=>{ed(e)},viewParameter:eA,viewType:eE}),!B&&(0,E.jsx)(r.xu,{ref:ej,bottom:!0,dangerouslySetInlineStyle:{__style:{top:R+A,left:ec,right:ec}},height:"inherit",marginBottom:3,marginStart:ev,overflow:"auto",position:"fixed",width:ef,children:(0,E.jsx)(u.Z,{cropArea:H,description:ea.description??"",height:e_,imageSignature:ea.imageSignature||"",imageUrl:ey,pinKey:ea,requestParams:G,showAnimation:!eh&&"flashlight"===q,surfaceType:q,trafficSource:J,viewParameter:eA,width:em})}),(0,E.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{top:A,left:eb,right:eb}},paddingX:h.jC,position:"relative",width:ew-eb,children:[M&&(0,E.jsx)(c.Z,{isFilterOpened:es,isProductOnlyFeed:B,pinKey:ea,surfaceType:q,viewParameter:eA,viewType:eE,visualSearchFlashlightUnifiedResource:M}),!el&&N&&(0,E.jsx)(F.Z,{pinKey:ea,viewParameter:eA,visualLiveSearchResourceData:N}),!el&&z&&(0,E.jsx)(P.Z,{visualLiveSearchProductFeedResourceData:z})]})]})})})})}},34202:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s,_:()=>r});var i=a(667294),n=a(785893);let l=(0,i.createContext)({cropArea:{x:0,y:0,w:1,h:1},cropSource:5,entrySource:"flashlight",isProductPage:!1,surfaceType:null,title:""});function r({children:e,value:t}){return(0,n.jsx)(l.Provider,{value:t,children:e})}function s(){return(0,i.useContext)(l)}},801690:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var i=a(667294),n=a(525364),l=a(105737),r=a(766311),s=a(785893);class o extends i.Component{componentDidMount(){let{setCurrentPageData:e,viewData:t,viewParameter:a,viewType:i}=this.props;e({viewData:t,viewParameter:a,viewType:i})}componentDidUpdate(e){let{setCurrentPageData:t,viewData:a,viewParameter:i,viewType:n}=this.props;i===e.viewParameter&&n===e.viewType&&(0,l.ZP)(a,e.viewData)||t({viewData:a,viewParameter:i,viewType:n})}componentWillUnmount(){this.props.clearCurrentPageData()}render(){let{auxData:e,children:t,component:a,objectIdStr:i,viewData:n,viewParameter:l,viewType:o,clientTrackingParams:u}=this.props;return(0,s.jsx)(r.Z,{auxData:e,clientTrackingParams:u,component:a,objectIdStr:i,viewData:n,viewParameter:l,viewType:o,children:t})}}function u(e){let{setViewContextData:t,clearViewContextData:a}=(0,n.sV)();return(0,s.jsx)(o,{...e,clearCurrentPageData:a,setCurrentPageData:t})}},797056:(e,t,a)=>{"use strict";a.d(t,{Z:()=>S});var i=a(667294),n=a(883119),l=a(140017),r=a(340523),s=a(448318),o=a(5859),u=a(71328),d=a(554786),c=a(760101),p=a(34817),g=a(616550),h=a(48481),m=a(233440),_=a(217058),y=a(623409),f=a(785893);function v({setShowClickthroughOverlay:e,isEligibleForPdp:t,isEligibleForDesktopSocialInviteOverlay:a,inviterFirstName:s,imageSignature:o,pinId:u}){let c=(0,l.ZP)(),p=(0,y.Z)(),v=(0,h.Z)(),{checkExperiment:x}=(0,r.F)(),b=(0,i.useRef)(),S=(0,d.ZP)(),w="desktop"===S,k=s&&a,P=w&&x("dweb_unauth_main_pin_visual_search_v2").group,F="enabled_2_no_upsell"===P||"enabled_rollout"===P||"enabled_1_nav_upsell_post_land"===P,T=k&&(c._('Sign up to join {{ name }} on Pinterest', 'pin.closeup.wash.desktop.shareNotification', 'Clickthrough overlay for desktop users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",s),j=F?c._('See something you like? Tap to search inside this image', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'):c._('Click to make the most out of this idea with a free account', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'),I=c._('Tap to make the most out of this idea with a free account', 'mweb.unauth.plp.clickable_wash.header', 'Pin clickable wash header text'),C=(0,g.k6)();return(0,f.jsx)(n.iP,{onMouseEnter:()=>{k&&(0,_.My)("dweb.main_pin.social.wash.view"),(0,_.My)("dweb.pin.wash.view")},onMouseLeave:()=>{k?p({action:"dismiss",item:"main-pin-social-wash"}):p({action:"dismiss",item:"main-pin-wash"})},onTap:({event:e})=>{if(w){if(e.preventDefault(),p({action:"click",item:"pin-image"}),a&&s&&p({action:"click",item:"main-pin-social-wash"}),F){let e=`/pin/${u}/visual-search/?`;o&&(e+=`imageSignature=${o}`),C.push(e),m.Z.setItem("VISUAL_SEARCH_SOURCE","MAIN_PIN_WASH")}else p({action:"click",item:"main-pin-image-signup-modal"}),v({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}});t&&p({action:"click",item:"pdp-pin-image"})}},children:(0,f.jsxs)(n.xu,{zIndex:new n.Ry(2),children:[(0,f.jsx)(n.xu,{ref:b,alignItems:"center",bottom:!0,"data-test-id":"main-pin-hover-overlay",direction:"column",display:"flex",height:"100%",justifyContent:a?"center":void 0,left:!0,position:"absolute",right:!0,top:!0,width:"100%",children:(0,f.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",maxWidth:F?260:240,paddingY:10,children:(0,f.jsx)(n.xu,{marginTop:8,children:(0,f.jsx)(n.X6,{align:"center",color:"light",size:k?"500":"400",children:w?T||j:I})})})}),!w&&(0,f.jsx)(n.xu,{marginEnd:4,marginTop:4,position:"absolute",right:!0,top:!0,children:(0,f.jsx)(n.hU,{accessibilityLabel:c._('Close pin clickable wash', 'mweb.unauth.plp.clickable_wash.close_button', 'Close button'),icon:"cancel",iconColor:"white",onClick:({event:t})=>{t.stopPropagation(),e&&(e(!1),p({action:"dismiss",item:"main-pin-hover-overlay"}))},size:"md"})})]})})}var x=a(174281),b=a(810052);let S=e=>{let t=(0,l.ZP)(),{alt:a,clickthroughOverlayOptions:g,color:h,isFlashlightPage:m,naturalHeight:_,naturalWidth:y,placeholder:S,pinImageResizePercent:w=100,pwtElementTimingId:k,pwtSurfaceContext:P,setShowClickthroughOverlay:F,showSpinner:T,src:j,stickyFooter:I,isEligibleForPdp:C,pinId:E,imageSignature:A}=e,D=(0,c.Z)(),{checkExperiment:Z}=(0,r.F)(),L=!D,{isAuthenticated:R}=(0,o.B)(),O=(0,d.ZP)(),K="desktop"===O,M=R&&!K&&Z("auth_mweb_inline_action_bar").anyEnabled,N=(0,i.useRef)(),[z,H]=(0,i.useState)(!L||!!j&&!!S&&S===j),U=(0,i.useRef)(""),V=()=>{P&&P.markConstraintComplete("PinPageMainImageRendered")};(0,i.useEffect)(()=>{let e=new Image;e.onload=()=>H(!0),e.src=j},[]);let $=(0,i.useRef)(b.a()?.setHasScrolledPastMainContent);(0,i.useEffect)(()=>{let e=(0,u.Z)(()=>{if(N.current){let t=window.scrollY>N.current.offsetTop+N.current.offsetHeight;$.current?.(t),t&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]);let[B,G]=(0,i.useState)();(0,i.useEffect)(()=>{N.current&&G(N.current.scrollHeight)},[]);let W=!m&&"tablet"===O,Y=L?(0,f.jsx)(s.Z,{alt:a,color:h,elementTiming:k,naturalHeight:_,naturalWidth:y,onLoad:V,src:S}):null;return(0,f.jsxs)(n.xu,{ref:N,dangerouslySetInlineStyle:{__style:{transition:100===w?"":"width 500ms ease-in-out"}},"data-test-id":"pin-closeup-image",marginTop:"tablet"===O&&M?12:0,maxHeight:"100%",maxWidth:"tablet"===O?x.g6:void 0,minHeight:100===w?B:void 0,overflow:I?void 0:"hidden",position:"relative",rounding:m||"phone"===O?0:6,width:m||"phone"===O?`${w}%`:K?508:x.Hg,children:[!R&&g&&"enabled_3_no_wash_upsell_post_land"!==Z("dweb_unauth_main_pin_visual_search_v2").group&&(0,f.jsx)(p.Z,{isImagePinForUnauthOnTablet:!1,children:(0,f.jsx)(v,{imageSignature:A||"",inviterFirstName:U.current,isEligibleForPdp:C,pinId:E||"",setShowClickthroughOverlay:F})}),Y&&(W?(0,f.jsx)(n.xu,{overflow:"hidden",rounding:6,children:Y}):Y),(0,f.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:z?1:0,transition:z&&!K?"opacity .5s ease-in-out":void 0,backgroundColor:h}},left:!0,overflow:W?"hidden":void 0,position:L?"absolute":"relative",right:!0,rounding:W?6:5,top:!0,children:L?(0,f.jsx)(n.Ee,{alt:a,naturalHeight:_,naturalWidth:y,src:j}):(0,f.jsx)(s.Z,{alt:a,color:h,elementTiming:k,naturalHeight:_,naturalWidth:y,onLoad:V,src:j})}),T&&(0,f.jsx)(n.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:z?0:1,transition:z?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!z&&(0,f.jsx)(n.kC,{alignItems:"center",justifyContent:"start",children:(0,f.jsx)(n.$j,{accessibilityLabel:t._('Loading image', 'Loading higher resolution image', 'Loading higher resolution image'),show:!0})})}),I]})}},237040:(e,t,a)=>{"use strict";a.d(t,{J1:()=>u,Uw:()=>o,Yg:()=>c,ib:()=>g});var i=a(340523),n=a(5859),l=a(554786),r=a(953565);let s=()=>{let{isAuthenticated:e,isBot:t}=(0,n.B)();return t?"bot":e?"auth":"unauth"},o=({isDesktop:e,viewerType:t})=>"bot"===t?"seo_graphql_pin_page":"auth"===t?e?"auth_dweb_graphql_pin_page":"auth_mweb_graphql_pin_page":e?"unauth_dweb_graphql_pin_page":"unauth_mweb_graphql_pin_page",u=()=>{let e=(0,l.HG)(),t=s();return o({isDesktop:e,viewerType:t})},d=({checkExperiment:e,isAuthMweb:t})=>{let a=t&&e("auth_mweb_graphql_pin_page",{dangerouslySkipActivation:!0}).group;return a?e=>(0,r.nP)("webapp.graphql.debug_auth_mweb_graphql_pin_page",{sampleRate:1,tags:{event:e,group:a}}):null},c=()=>{let{isAuthenticated:e}=(0,n.B)(),t=(0,l.HG)(),{checkExperiment:a}=(0,i.F)();return d({checkExperiment:a,isAuthMweb:e&&!t})},p=0,g=({checkExperiment:e,isAuthMweb:t})=>{let a=d({checkExperiment:e,isAuthMweb:t});a&&(p+=1)<10&&a(`repin_${p}`)}},67664:(e,t,a)=>{"use strict";a.d(t,{A:()=>r,Z:()=>s});var i=a(667294),n=a(883119),l=a(785893);let r={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function s({backgroundColor:e,children:t,coverImage:a,disableTabIndex:s,height:o,id:u,isHovered:d,onClick:c,onMouseDown:p,onMouseEnter:g,onMouseLeave:h,searchBoxRenderStopwatch:m,url:_,width:y}){let[f,v]=(0,i.useState)(!1),x=()=>{g?g():v(!0)},b=()=>{h?h():v(!1)},S=d||f,w=S?r.hoverOverlay:r.bubbleOverlay;return(0,l.jsx)(n.Tg,{href:_,onBlur:b,onFocus:x,onMouseDown:p,onMouseEnter:x,onMouseLeave:b,onTap:()=>{c?.(u)},rounding:4,tabIndex:s?-1:void 0,children:(0,l.jsx)(n.zd,{height:o,rounding:4,width:y||"100%",children:a?.url?(0,l.jsxs)(n.Ee,{alt:"",color:e,fit:"cover",naturalHeight:a.height??1,naturalWidth:a.width??1,onLoad:()=>{m?.stop()},role:"presentation",src:a.url,children:[(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:w},height:"100%",width:"100%"}),"function"==typeof t?t({isHovered:S}):t]}):(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},609380:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var i=a(883119),n=a(775089),l=a(213377),r=a(140017),s=a(493538),o=a(676554),u=a(19447),d=a(785893);let c=({data:e,itemIdx:t})=>{let a=(0,u.S6)(),i=e.id?a(e.id):null,n=i||e;return(0,d.jsx)(o.rX,{authDesktopSurface:"RelatedProductsFeed",duploQueryRef:null,pinId:n.id,pinKey:null!=n?{type:"deprecated",data:n}:null,slotIndex:t,trackingParamsMap:n.tracking_params_map,viewParameter:3334,viewType:72})};function p({visualLiveSearchProductFeedResourceData:e}){let t=(0,r.ZP)(),{data:a,isAtEnd:o,isLoaded:u,isFetching:p,fetchMore:g}=e,h=Array.isArray(a)?a:a?.results;return u?h&&0!==h.length?(0,d.jsx)(s.Z,{isAtEndOfFeed:o,itemCount:h.length,children:(0,d.jsx)(n.default,{columnWidth:l.yF,isFetching:p,items:h,loadItems:()=>{p||o||g()},renderItem:e=>(0,d.jsx)(c,{...e}),scrollContainer:()=>window,virtualize:!1})}):null:(0,d.jsx)(i.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,d.jsx)(i.$j,{accessibilityLabel:t._('Loading related products', 'Label for loading spinner', 'Label for loading spinner'),show:!0})})}},745998:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var i,n=a(667294);a(422578);var l=a(883119),r=a(892254),s=a(82205),o=a(207012),u=a(213377),d=a(140017),c=a(676554),p=a(785893);let g=void 0!==i?i:i=a(163431);function h({pinKey:e,viewParameter:t,visualLiveSearchResourceData:a}){let i=(0,d.ZP)(),{hasSimplifiedPinGridExpLoaded:h}=(0,r.$)(),m=(0,o.Z)(g,e),{data:_,isFetching:y,fetchMore:f}=a,v=_?.results,x=_?.search_identifier;return(0,p.jsxs)(n.Fragment,{children:[v&&x&&(0,p.jsx)(l.Rk,{columnWidth:u.yF,items:v,loadItems:f,minCols:1,renderItem:({data:e,itemIdx:a})=>(function({data:e,itemIdx:a}){let i=`${window.location.pathname}products/${window.location.search}&full_feed_title=${encodeURIComponent("Shop similar items")}`;return"story"===e.type?(0,p.jsx)(s.Z,{dangerouslySetActionUrl:i,slotIndex:a,story:e}):"pin"===e.type?(0,p.jsx)(c.ZP,{authDesktopSurface:"FlashlightResultGrid",auxData:{search_identifier:x,image_signature:m.imageSignature},duploQueryRef:null,pin:e,pinId:e.id,slotIndex:a,viewData:{search_identifier:x},viewParameter:t,viewType:72}):null})({data:e,itemIdx:a}),scrollContainer:()=>window}),(0,p.jsx)(l.$j,{accessibilityLabel:i._('Loading search results...', 'FlashlightResultGrid.spinner', 'Accessibility label for loading visual search results'),show:y||!x||!h})]})}},270766:(e,t,a)=>{"use strict";a.d(t,{Z:()=>ew});var i,n,l,r,s=a(167912),o=a(616550),u=a(883119),d=a(695238),c=a(140017),p=a(340523),g=a(995917),h=a(689390),m=a(667294),_=a(735382),y=a(82205),f=a(205841),v=a(207012),x=a(339001),b=a(217058),S=a(785893);let w=void 0!==i?i:i=a(453364),k=()=>{(0,b.NC)("click_best_pin_board",!0)},P=()=>{(0,b.NC)("click_best_pin_profile",!0)},F=({pin:e})=>{let{pinner:t}=e,{username:a,fullName:i}=t??{},n=t?.imageMediumUrl||t?.imageSmallUrl,l=`/${a??""}/`;return(0,S.jsx)(u.Tg,{fullWidth:!1,href:l,onTap:P,rounding:"circle",children:(0,S.jsx)(f.qE,{name:i??"",outline:!0,size:"sm",src:n??""})})},T=({pin:e})=>{let t=(0,c.ZP)(),{board:a,pinner:i}=e,{name:n,privacy:l,url:r}=a??{},s=a?.entityId||"",{username:o,fullName:d}=i??{},p=`/${o??""}/`,g=(0,S.jsx)(u.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(u.rU,{display:"inlineBlock",href:p,onClick:P,underline:"hover",children:d})},d);return"protected"===l?(0,x.nk)(t._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:g}):(0,x.nk)(t._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:g,boardName:(0,S.jsx)(u.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(u.rU,{href:r??"",onClick:k,children:n},"board")},s)})},j=({pinKey:e})=>{let t=(0,v.Z)(w,e);return(0,S.jsxs)(u.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,S.jsx)(F,{pin:t}),(0,S.jsx)(u.xu,{marginEnd:2}),(0,S.jsx)(u.xv,{size:"200",children:(0,S.jsx)(T,{pin:t})})]})};var I=a(587703);function C({pageType:e,pinCreditPrefix:t,pin:a,pinLink:i,viewParameter:n}){let l=(0,c.ZP)(),r=(0,I.Z)();if("topic"!==e.page&&(!a.domain||"Uploaded by user"===a.domain))return null;let s="topic"!==e.page||e.isAuth?"100":"200",o="topic"===e.page&&!!a.nativeCreator,d=o?a.nativeCreator?.fullName:a.domain;return(0,S.jsx)(u.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,S.jsx)(u.rU,{display:"inlineBlock",href:o?`/${a.nativeCreator?.username||""}/`:i,onClick:()=>{"topic"===e.page?(0,b.NC)("click_topic_best_pin_link"):r({event_type:12,view_type:3,object_id_str:a.entityId,component:85,view_parameter:n})},rel:"nofollow",target:"blank",underline:"hover",children:(0,S.jsx)(u.xv,{size:s,children:(0,x.nk)(l._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:t,pinCredit:(0,S.jsx)(u.xv,{inline:!0,size:s,weight:"bold",children:(e.page,d)},o?"creatorProfile":"pinLinkDomain")})})})})}var E=a(92785),A=a(388769),D=a(391884),Z=a(189469),L=a(567344),R=a(781705),O=a(661428),K=a(414131),M=a(909886),N=a(686769);let z=void 0!==n?n:n=a(567637);function H({recipeKey:e}){let t=(0,v.Z)(z,e);if(t?.aggregateRating?.ratingValue&&t.aggregateRating.reviewCount){let e="number"==typeof t.cookTimes?.cook?.m&&"number"==typeof t.cookTimes.prep?.m?`${t.cookTimes.cook.m+t.cookTimes.prep.m} minutes \xb7 `:"";return(0,S.jsxs)(m.Fragment,{children:[(0,S.jsx)(N.Z,{max_rating:t.aggregateRating.bestRating,rating:t.aggregateRating.ratingValue},t.aggregateRating.ratingValue),(0,S.jsx)(u.xv,{inline:!0,size:"200",children:` ${t.aggregateRating.reviewCount} \xb7 ${e}`})]})}return null}var U=a(5859);let V=void 0!==l?l:l=a(516658),$=e=>{let t=null;e.lastRepinDate&&(t=new Date(e.lastRepinDate));let a=null;return(e.createdAt&&(a=new Date(e.createdAt)),t)?a?t>a?t:a:t:a},B=e=>{let t="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return t;let a=$(e);if(a&&a.getFullYear()===new Date().getFullYear()){let i=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:n}=e;i.has(n)&&(t=a?(0,S.jsx)(E.Z,{dateFormatType:E.k.LONG_MONTH_YEAR,useUTC:!1,value:a}):"")}return t},G=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),W=(e,t)=>{let a=new Date((e.richMetadata??{}).article?.datePublished??Date.now()),i=a.getTime(),n=new Date().getTime();return null==t||n-i<=31536e6*t?(0,S.jsx)(E.Z,{dateFormatType:E.k.LONG_MONTH_YEAR,useUTC:!1,value:a}):""};function Y(e){let{pinKey:t,viewportSize:a,pageType:i}=e,n=(0,v.Z)(V,t),{pinCreditPrefix:l,pinLink:r}=(0,R.Z)(n),s=(0,O.Z)(n),{description:o}=(0,L.eK)({richMetadataDescription:n.richMetadata?.description,richSummaryDisplayName:n.richSummary?.displayName,closeupUnifiedDescription:n.closeupUnifiedDescription});"videos_category"===i.page&&(o=(0,L.kt)(o,n.nativeCreator?.username||""));let d="wide"===a,c=(0,L.Ly)({pinTitle:n.title,gridTitle:n.gridTitle,richSummaryDisplayName:n.richSummary?.displayName??"",richMetadataTitle:n.richMetadata?.title??"",storyPinDataId:n.storyPinDataId,storyPinDataMetadataPinTitle:n.storyPinData?.metadata?.pinTitle,pinJoinVisualAnnotation:n.pinJoin?.visualAnnotation});(n.gridTitle||"").trim()&&c!==n.gridTitle&&(c=(0,L.EU)(n.gridTitle,200));let p=(0,Z.r)(n.richMetadata?.recipe?.name,!!n.richMetadata?.recipe?.categorizedIngredients,n.richMetadata?.recipe?.fromAggregatedData??!1)?n.richMetadata?.recipe:null,g=G(n)&&W(n,2),h=B(n)||g,{isBot:m,isSocialBot:_}=(0,U.B)();return(0,S.jsx)(u.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,S.jsxs)(u.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,S.jsx)(C,{pageType:i,pin:{entityId:n.entityId,domain:n.domain||"",nativeCreator:n.nativeCreator&&{fullName:n.nativeCreator.fullName,username:n.nativeCreator.username}},pinCreditPrefix:"topic"===i.page&&n.nativeCreator?"Created by":l,pinLink:r??"",viewParameter:(0,K.Z)({hasPin:!0,hasPinRichMetadata:!!n.richMetadata,hasPinRichMetadataProducts:!!n.richMetadata?.products,hasPinRichMetadataArticle:!!n.richMetadata?.article,hasPinRichMetadataRecipe:!!n.richMetadata?.recipe,hasPinStoryPinData:!!n.storyPinData})}),(0,S.jsx)(u.kC,{direction:"row",justifyContent:"between",children:(0,S.jsx)(u.xu,{display:"flex",marginEnd:d?0:3,marginTop:d?3:0,overflow:"hidden",children:c&&(0,S.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:"600",fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:c})})}),h?(0,S.jsx)(u.xu,{marginTop:1,children:(0,S.jsx)(u.xv,{color:"subtle",children:h})}):null,o&&(0,S.jsx)(u.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,S.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[p&&(0,S.jsx)(H,{recipeKey:p}),o]})}),p&&(0,S.jsx)(M.Z,{marginOverrides:p?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:p.categorizedIngredients,name:p.name,image:(0,D.Z)({imagesUrls:s,embedSrc:n.embed?.src,embedType:n.embed?.type,excludeOriginals:!m&&!_})}}}),(0,S.jsxs)(u.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:[(0,S.jsx)(j,{pinKey:n}),(0,S.jsx)(u.kC,{alignItems:"stretch",justifyContent:"end",children:!n.repinCount||n.repinCount<1?null:(0,S.jsxs)(u.kC,{alignItems:"center",justifyContent:"start",children:[(0,S.jsx)(u.JO,{accessibilityLabel:"Pin",color:"subtle",icon:"pin",size:12}),(0,S.jsx)(u.xv,{color:"default",inline:!0,size:"100",children:(0,S.jsx)(A.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:n.repinCount})})]})})]})]})})}var q=a(922725),X=a(582158),J=a(96157),Q=a(777609),ee=a(627408),et=a(160567),ea=a(624797),ei=a(494125),en=a(129675),el=a(520846),er=a(258194),es=a(755453),eo=a(676554),eu=a(125768),ed=a(774812);let ec=0,ep="";function eg(e){let{images:t,image_signature:a}=e,i=t?.["564x"]&&t.orig,{url:n}=i??{},{width:l=1,height:r}=i??{};return"number"==typeof l&&"number"==typeof r&&l>564&&(r*=564/l,l=564),{width:l,height:r,url:n,imageSignature:a}}let eh=({data:e,index:t,viewParameter:a,productsURL:i})=>{switch(e.type){case"pin":return(0,S.jsx)(eo.ZP,{duploQueryRef:null,pinId:e.id,slotIndex:t,viewParameter:a,viewType:72});case"story":return i&&(0,S.jsx)(y.Z,{dangerouslySetActionUrl:i,slotIndex:t,story:e});default:return null}},em=({resourceOptions:e})=>{let t=(0,c.ZP)(),{data:a,isAtEnd:i,isFetching:n,fetchMore:l}=(0,g.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,o.TH)(),s=`${r.pathname}products/${r.search}`;return(0,S.jsxs)(m.Fragment,{children:[a&&(0,S.jsx)(ed.Z,{customLayoutType:"desktopFlashlight",feedItems:a.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:l,hasNext:i,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>eh({data:e,index:t,viewParameter:3050,productsURL:s})}),(0,S.jsx)(u.$j,{accessibilityLabel:t._('Loading visual search results...', 'unauthDesktopVisualSearch.flashlightFeed.loading', 'Accessibility label for loading visual search results'),show:n})]})},e_=({resourceOptions:e})=>{let t=(0,c.ZP)(),{data:a,isAtEnd:i,isFetching:n,fetchMore:l}=(0,g.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,S.jsxs)(m.Fragment,{children:[a&&(0,S.jsx)(ed.Z,{customLayoutType:"desktopFlashlight",feedItems:a||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:l,hasNext:i,isLoadingNext:n,refetch:()=>void 0},renderFeedItem:(e,t)=>eh({data:e,index:t,viewParameter:3334})}),(0,S.jsx)(u.$j,{accessibilityLabel:t._('Loading visual search product results...', 'unauthDesktopVisualSearch.flashlightProductFeed.loading', 'Accessibility label for loading visual search product results'),show:n})]})};function ey({pinResponse:e}){let t=(0,c.ZP)(),{isRTL:a}=(0,U.B)(),i=(0,I.Z)(),n=(0,o.k6)(),l=(0,o.TH)(),r=(0,o.$B)(),s=(0,m.useRef)(),{pin:d,isLoaded:p}=e,{pinId:g}=(0,h.Z)(r.params.id||""),y=(0,ea.mB)(l.search),f=(0,_.Z)(l),v=function(e){let t=parseInt(e,10);switch(t){case 1:case 2:case 3:case 4:case 5:case 6:return t;default:return}}(y.cropSource),x=(0,J.hd)(l),{getNormalizedPinImage:w}=(0,Q.Z)({pinKey:null!=d?{type:"deprecated",data:d}:null});if((0,m.useEffect)(()=>{if(!f&&d){let{width:e,height:t}=w(),a=(0,es.Z)({cropArea:{h:t-2*q.S,w:e-2*q.S,x:q.S,y:q.S},isProductPage:x,pinId:g,surfaceType:"flashlight"});n.replace(a)}},[w,n,f,x,d,g]),(0,ei.Z)(()=>{i({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:g}}),(0,b.My)("unauth.flashlight_page")}),(0,m.useEffect)(()=>{let e=s.current;return e&&ep===g&&(e.scrollTop=ec),()=>{e&&(ec=e.scrollTop,ep=g)}}),!p)return(0,S.jsx)(ee.Z,{objectId:"",view:72,children:(0,S.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{top:et.Pw}},position:"relative",children:(0,S.jsx)(u.$j,{accessibilityLabel:t._('Loading visual search...', 'Accessibility label for loading visual search page', 'Accessibility label for loading visual search page'),show:!0})})});if(!d)return null;let{image_signature:k,description:P}=d,{width:F,height:T,url:j}=eg(d),C=function({initialCropArea:e,pin:t}){let a;if(e)a={...e};else{let{visual_objects:e}=t,{width:i=1,height:n=1}=eg(t);if(e&&e.length){let{x:t,y:l,w:r,h:s}=e[0];a=(0,el.Z)({cropArea:{x:t,y:l,w:r,h:s},scaledWidth:i,scaledHeight:n})}else{let[e,t]=[i/6,n/6],[l,r]=[i-2*e,n-2*t];a={x:e,y:t,w:l,h:r}}}return{x:Math.floor(a.x??0),y:Math.floor(a.y??0),w:Math.floor(a.w??0),h:Math.floor(a.h??0)}}({initialCropArea:f,pin:d}),E=l.state&&l.state.internalNavigation,A=F+20,D=(A??1)+24,Z={pin_id:g,image_signature:k,crop:(0,en.Z)({cropArea:C,scaledWidth:F,scaledHeight:T}),crop_source:v||5},L={__style:{top:140}};return(0,S.jsx)(ee.Z,{objectId:"",view:72,children:(0,S.jsxs)(m.Fragment,{children:[(0,S.jsxs)(u.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{top:80}},display:"flex",height:60,position:"fixed",width:"100%",zIndex:new u.Ry(4),children:[(0,S.jsx)(u.xu,{left:!0,position:"absolute",children:(0,S.jsx)(eu.Z,{})}),(0,S.jsx)(u.xu,{flex:"grow",children:(0,S.jsx)(u.X6,{align:"center",size:"400",children:x?t._('Shop similar items', 'unauthDesktopFlashlightPage.flashlightProductsFeed.header', 'Header explaining results of flashlight products search'):t._('Visually similar results', 'unauthDesktopFlashlightPage.flashlightFeed.header', 'Header explaining results of flashlight search')})})]}),x?(0,S.jsx)(u.xu,{dangerouslySetInlineStyle:L,position:"relative",children:(0,S.jsx)(e_,{resourceOptions:Z})}):(0,S.jsxs)(u.xu,{display:"flex",paddingX:12,children:[(0,S.jsxs)(u.xu,{ref:s,dangerouslySetInlineStyle:L,height:"calc(100% - 140px)",marginEnd:3,marginStart:3,overflow:"auto",position:"fixed",width:A,zIndex:new u.Ry(4),children:[(0,S.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{width:F,height:T}},"data-test-id":"flashlight-enabled-image",children:(0,S.jsxs)(u.zd,{height:T,rounding:2,width:F,children:[(0,S.jsx)(u.Ee,{alt:P??"",naturalHeight:T??1,naturalWidth:F??1,src:j??""}),(0,S.jsx)(X.Z,{customCropper:function({origCrop:e,cropSource:t}){let a=window.location.pathname+window.location.search,i=(0,es.Z)({cropArea:e,cropSource:t??6,isProductPage:x,pinId:g,surfaceType:"flashlight"});(0,b.My)("unauth.flashlight_page.cropper_changed"),i!==a&&g&&n.replace({pathname:`/pin/${g}/visual-search/`,search:(0,er.Z)({cropArea:e,cropSource:t??6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},imageSignature:k,imageSize:{h:T,w:F},initialCropArea:C,pinKey:{type:"deprecated",data:d},showAnimation:!E,surfaceType:"flashlight",viewParameter:3050,viewType:72})]})}),(0,S.jsx)(u.xu,{"data-test-id":"closeupDescription",direction:"column",display:"flex",margin:5,maxWidth:F??1,position:"relative",children:(0,S.jsx)(Y,{pageType:{isAuth:!1,page:"flashlight"},pinKey:{type:"deprecated",data:d},viewportSize:"narrow"})})]}),(0,S.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...L.__style,...a?{marginRight:`${D}px`}:{marginLeft:`${D}px`}}},position:"relative",width:"100%",children:(0,S.jsx)(em,{resourceOptions:Z})})]})]})})}let ef=void 0!==r?r:r=a(23136);function ev(e){return e?.map(e=>{var t,a;return{name:e.name??"",offer_summary:{in_stock:e.offerSummary?.inStock??!1},additional_images:function(e){let t=[];return e.forEach(({additionalImagesSpec:e,spec:a})=>{t.push(...function({additionalImagesSpec:e,spec:t}){return e?.map(e=>({canonical_images:{[t]:{height:e.canonicalImage?.height??0,url:e.canonicalImage?.url??"",width:e.canonicalImage?.width??0}},image_signature:e.imageSignature??""}))}({additionalImagesSpec:e,spec:a})??[])}),t}([{additionalImagesSpec:e.additionalImageOrig,spec:"orig"},{additionalImagesSpec:e.additionalImage736x,spec:"736x"},{additionalImagesSpec:e.additionalImage564x,spec:"564x"},{additionalImagesSpec:e.additionalImage474x,spec:"474x"},{additionalImagesSpec:e.additionalImage236x,spec:"236x"}])??[],variant_set:(t=e.variantSet,{variants:(a=t?.variants,a?.map(e=>{var t;return{additional_images:(t=e.additionalImages,t?.map(e=>({canonical_images:e.canonicalImages??{},image_signature:e.imageSignature??""}))??[])}})??[])}??{})}})}function ex(e){return{username:e?.username??"",full_name:e?.fullName??"",image_medium_url:e?.imageMediumUrl,image_small_url:e?.imageSmallUrl}}function eb(e){return{id:e?.entityId??"",username:e?.username??"",full_name:e?.fullName??"",image_medium_url:e?.imageMediumUrl,image_small_url:e?.imageSmallUrl,type:"user"}}let eS=(0,d.Z)({useGraphQLAdapter:function({pinId:e}){var t,a,i,n,l,r,o;let u=(0,s.useLazyLoadQuery)(ef,{pinId:e}),d=u.v3GetPinQuery?.data;if(!d)return null;let c={id:d.entityId??"",is_eligible_for_related_products:d.isEligibleForRelatedProducts??!1,description:d.description??"",image_signature:d.imageSignature??"",images:function(e){let t={};return e.forEach(e=>{let{image:a,spec:i}=e;a&&(t[i]={width:a.width??0,url:a.url??"",type:a.type??"",height:a.height??0,dominant_color:a.dominantColor??""})}),t}([{image:d.imageOrig,spec:"orig"},{image:d.image736x,spec:"736x"},{image:d.image564x,spec:"564x"},{image:d.image474x,spec:"474x"},{image:d.image236x,spec:"236x"}])??{},rich_metadata:(t=d.richMetadata,{products:ev(t?.products)??[],description:t?.description??"",title:t?.title??"",recipe:(a=t?.recipe,{name:a?.name??"",from_aggregated_data:a?.fromAggregatedData??!1,categorized_ingredients:a?.categorizedIngredients?.map(e=>({category:e.category??""}))}??{}),article:{date_published:t?.article?.datePublished??""},tutorial:{id:t?.tutorial?.name??"",type:"makecardtutorialmetadata"}}),rich_summary:(i=d.richSummary,{products:ev(i?.products)??[],display_name:i?.displayName??""}),visual_objects:(n=d.visualObjects,n?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,w:e.x??0,x:e.w??0,y:e.y??0}))??[]),closeup_unified_description:d.closeupUnifiedDescription,grid_title:d.gridTitle??"",story_pin_data_id:d.storyPinDataId,repin_count:d.repinCount??0,tracked_link:d.trackedLink,link:d.link,domain:d.domain??"",closeup_attribution:ex(d.closeupAttribution),link_domain:{official_user:ex(d.linkDomain?.officialUser)},native_creator:eb(d.nativeCreator),pinner:eb(d.pinner),origin_pinner:eb(d.originPinner),board:(l=d.board,{id:l?.entityId??"",image_thumbnail_url:l?.imageThumbnailUrl??"",name:l?.name??"",privacy:"protected"===(r=l?.privacy)||"public"===r||"secret"===r?r:"secret",url:l?.url??"",type:"board"}),pin_join:{annotations_with_links_array:(o=d.pinJoin?.annotationsWithLinksArray,o?.map(e=>({name:e.name,url:e.url}))??[]),visual_annotation:d.pinJoin?.visualAnnotation??[]},story_pin_data:{metadata:{pin_title:d.storyPinData?.metadata?.pinTitle}},type:"pin"};return{pin:c,isLoaded:!0}},useLegacyAdapter:function({pinId:e}){let{data:t,isLoaded:a}=(0,g.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}});return{pin:t,isLoaded:a}}});function ew(){let{checkExperiment:e}=(0,p.F)(),t=(0,c.ZP)(),a=(0,o.$B)(),{pinId:i}=(0,h.Z)(a.params.id||"");return(0,S.jsx)(eS,{input:e("unauth_dweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:i},suspense:{fallback:(0,S.jsx)(u.$j,{accessibilityLabel:t._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:{pinId:i}},children:({data:e})=>!!e&&(0,S.jsx)(ey,{pinResponse:e})})}},943484:(e,t,a)=>{"use strict";function i(e){return e&&5!==e?4===e?"stela":null:"related_products"}a.d(t,{Z:()=>i})},407053:(e,t,a)=>{"use strict";a.d(t,{AA:()=>l,E9:()=>y,EU:()=>x,IO:()=>v,KH:()=>d,Lg:()=>g,QR:()=>u,Uw:()=>n,ZR:()=>b,dx:()=>h,dy:()=>o,eA:()=>p,eV:()=>m,fo:()=>_,k7:()=>r,rT:()=>f,tz:()=>c,u9:()=>S,zR:()=>s,zu:()=>i});let i="OPEN_UNAUTH",n="openUnauthType",l="_isAfterLogin",r="_lastVisitedPages",s="_lastVisitedPagesBeforeLogin",o="_lastVisitedBoardPages",u="_lastVisitedPagesBeforeNavPage",d="_lastVisitedSessionPages",c="_unauthVisitedPages",p=20,g="_inviteCodeRedemption",h="_inviteCodeRedemptionList",m="_paidTrafficLand",_="_unauthReferrerString",y="unauthTopicsFollowed",f=["US","CA","NZ","AU"],v=new Set(["GB","IE"]),x=new Set(["AT","BE","CH","DE","DK","ES","FR","IT","NL","NO","PT","SE"]),b=new Set(["BR","MX","AR","CL","CO","PE"]),S="ad_img"},174281:(e,t,a)=>{"use strict";a.d(t,{D5:()=>s,Hg:()=>n,T_:()=>r,g6:()=>l,w6:()=>i});let i=(e,t)=>Array.from({length:t-e},(t,a)=>a+e),n=508,l=600;function r(e,t){if(!t.startsWith("en"))return e;let a=e.split(" ").map(e=>{let t=e===e.toUpperCase();return t?e:e.toLowerCase()});return a.join(" ")}let s=()=>{let e=new URL(window.location.href),t=e.hostname.replace("www.",""),a=e.pathname;return`${t}${a=a.replace(/\/\d+\//,"/").replace(/\/$/,"")}`}},439278:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});let i=({name:e,width:t,height:a})=>{let i=`${t}${"number"==typeof t?"px":""}`,n=`${a}${"number"==typeof a?"px":""}`,l="number"==typeof t?t:236;return`
.${e} {
  -webkit-animation-duration: 1s;
  -webkit-animation-fill-mode: forwards;
  -webkit-animation-iteration-count: infinite;
  -webkit-animation-name: ${e}_placeHolderShimmer;
  -webkit-animation-timing-function: linear;
  border-radius: 16px;
  background: #f6f7f9;
  background-image: linear-gradient(to right, #f6f7f9 0%, #e9ebee 20%, #f6f7f9 40%, #f6f7f9 100%);
  background-repeat: no-repeat;
  background-size: ${l} ${n};
  width: ${i};
  height: ${n};
}

@keyframes ${e}_placeHolderShimmer{
  0% {
      background-position: -${l}px 0;
  }
  100% {
      background-position: ${l}px 0;
  }
}
`}},735728:(e,t,a)=>{"use strict";a.d(t,{N4:()=>l,Wh:()=>i,hr:()=>n});let i=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),n=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),l=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.')},903054:(e,t,a)=>{"use strict";a.d(t,{ZP:()=>ea,Bi:()=>Q,gv:()=>ee});var i,n,l,r=a(167912),s=a(616550),o=a(883119),u=a(695238),d=a(140017),c=a(340523),p=a(7829),g=a(689390),h=a(667294),m=a(735382),_=a(10584),y=a(18529),f=a(23613),v=a(520991),x=a(967871),b=a(677929),S=a(155364),w=a(8760),k=a(207012),P=a(785893);let F=void 0!==i?i:i=a(728975);function T(e){let{legacySearchId:t,pinKey:a,resourceOptions:i,setLegacySearchId:n,viewParameter:l}=e,r=(0,k.Z)(F,a),{visualSearchFlashlightUnifiedResource:s}=(0,w.Z)({resourceOptions:i}),o=s.data?.search_identifier||"";return(0,h.useEffect)(()=>{n&&o&&t!==o&&n(o)}),(0,P.jsx)(S.Z,{isProductOnlyFeed:!1,pinKey:r,surfaceType:"flashlight",viewParameter:l,viewType:72,visualSearchFlashlightUnifiedResource:s})}var j=a(549629),I=a(922725),C=a(777609),E=a(603642),A=a(5859),D=a(513911),Z=a(627408),L=a(624797),R=a(494125),O=a(250790),K=a(40770),M=a(291940),N=a(129675),z=a(755453),H=a(152509),U=a(136359),V=a(295166),$=a(128993);let B=0,G="",W=void 0!==n?n:n=a(523395);function Y({pinKey:e}){let t=(0,d.ZP)(),a=(0,s.k6)(),i=(0,A.B)(),{checkExperiment:n}=(0,c.F)(),{anyEnabled:l}=n("web_flashlight_unified_feed"),[r,u]=(0,h.useState)(""),{id:p}=(0,s.UO)(),{pinId:S}=(0,g.Z)(p||""),w=(0,k.Z)(W,e),F=w.description||"",Y=w.imageSignature||"",q=(0,s.TH)(),X=(0,L.mB)(q.search),{cropSource:J,full_feed_title:Q}=X,ee=(0,O.Z)(Number(J)),et=(0,m.Z)(q),ea=q.pathname.includes("/products"),{getInitialCropArea:ei}=(0,_.Z)({pinKey:w}),en=ei({initialCropArea:et}),el=(0,h.useRef)();(0,h.useEffect)(()=>(el.current&&G===S&&(el.current.scrollTop=B),()=>{el.current&&(B=el.current.scrollTop,G=S)}));let er=ee||5,es=ea?"shopping":"flashlight",eo=(0,K.Z)({cropSource:er,isProductPage:ea,surfaceType:"flashlight"}),eu=l&&4===er?3462:3050,ed=(0,H.Z)({entrySource:es,isProductPage:ea,pinKey:w,surfaceType:"flashlight",viewParameter:eu,viewType:72}),{getNormalizedPinImage:ec}=(0,C.Z)({pinKey:w,maxWidth:D.RZ});(0,R.Z)(()=>{if(!et&&w){let{width:e,height:t}=ec(),i=(0,z.Z)({cropArea:{h:(t??1)-2*I.S,w:(e??1)-2*I.S,x:I.S,y:I.S},pinId:S,isProductPage:ea,surfaceType:"flashlight"});a.replace(i)}});let{width:ep,height:eg,url:eh}=ec(),em={pin_id:S,image_signature:Y,crop:(0,N.Z)({cropArea:en,scaledWidth:ep,scaledHeight:eg}),crop_source:er,is_shopping:ea,entry_source:es,entrypoint:eo},e_=q&&q.state&&q.state.internalNavigation,ey=i&&i.isRTL||!1,ef=ep+20,ev=(0,M.Z)({cropSource:er,i18n:t,inFlashlightUFExperiment:l,isProductPage:ea,surfaceType:"flashlight",title:Q});return w?(0,P.jsx)(E.Z,{constraints:(0,f.Z)({isProductPage:ea,isStl:!1,isUnifiedFeed:l}),measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,P.jsx)(Z.Z,{objectId:r,view:72,children:(0,P.jsxs)(j.Z,{log:ed,children:[(0,P.jsx)(v.Z,{pinId:S,title:ev,viewParameter:eu,viewType:72}),(0,P.jsx)(U.c,{children:e=>ea?(0,P.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{marginTop:60}},children:(0,P.jsx)(V.Z,{legacySearchId:r,pinKey:w,resourceOptions:em,setLegacySearchId:u})}):(0,P.jsxs)(o.xu,{display:"flex",paddingX:12,children:[(0,P.jsx)(o.xu,{ref:el,bottom:!0,dangerouslySetInlineStyle:{__style:{top:e+60+b.L}},height:"inherit",left:!0,marginBottom:3,marginStart:12,overflow:"auto",position:"fixed",right:!0,width:ef,children:(0,P.jsx)(x.Z,{cropArea:en,description:F,height:eg,imageSignature:Y,imageUrl:eh,pinKey:w,showAnimation:!e_,surfaceType:"flashlight",viewParameter:eu,width:ep})}),(0,P.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:(0,y.Z)({top:60,cropperWidth:ef,isRTL:ey,isFlashlightPage:!0})},position:"relative",width:"100%",children:l?(0,P.jsx)(T,{legacySearchId:r,pinKey:w,resourceOptions:em,setLegacySearchId:u,viewParameter:eu}):(0,P.jsx)($.Z,{legacySearchId:r,pinKey:w,resourceOptions:em,setLegacySearchId:u})})]})})]})})}):null}let q=void 0!==l?l:l=a(574223);function X(e){return{width:e.width??0,url:e.url??"",height:e.height??0}}function J(e){return e?.map(e=>{var t,a;return{additional_images:function(e){let t=[];return e.forEach(({additionalImages:e,spec:a})=>{t.push(...function({additionalImages:e,spec:t}){let a=[];return e?.forEach(e=>{e.canonicalImage&&a.push({canonical_images:{[t]:X(e.canonicalImage)},image_signature:e.imageSignature??""})}),a}({additionalImages:e,spec:a})??[])}),t}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}])??[],variant_set:(t=e.variantSet,{variants:(a=t?.variants,a?.map(e=>{var t;return{additional_images:(t=e.additionalImages,t?.map(e=>({canonical_images:e.canonicalImages??{},image_signature:e.imageSignature??""}))??[])}})??[])}??{})}})}function Q(e){var t,a,i;let{id:n}=(0,s.UO)(),{pinId:l}=(0,g.Z)(n||""),o=function({pinId:e}){return{query:q,variables:{pinId:e}}}({pinId:l}),u=(0,r.useLazyLoadQuery)(q,o.variables),d=u.v3GetPinQuery?.data;if(!d)return null;let c={id:d.entityId??"",is_eligible_for_related_products:d.isEligibleForRelatedProducts??!1,description:d.description??"",image_signature:d.imageSignature??"",visual_objects:(t=d.visualObjects,t?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,title:e.title??"",w:e.x??0,x:e.w??0,y:e.y??0}))??[]),images:function(e){let t={};return e.forEach(e=>{let{image:a,spec:i}=e;a&&(t[i]=X(a))}),t}([{image:d.imageOrig,spec:"orig"},{image:d.image736x,spec:"736x"},{image:d.image564x,spec:"564x"},{image:d.image474x,spec:"474x"},{image:d.image236x,spec:"236x"}])??{},rich_metadata:(a=d.richMetadata,{products:J(a?.products)??[]}),rich_summary:(i=d.richSummary,{products:J(i?.products)??[]}),type:"pin"};return c}function ee(e){let{data:t,isLoaded:a}=(0,p.Z)({name:"PinResource",getOptions:({routeData:{params:{id:e}}})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})});return a&&t?t:null}let et=(0,u.Z)({useGraphQLAdapter:Q,useLegacyAdapter:ee});function ea(){let{checkExperiment:e}=(0,c.F)(),t=(0,d.ZP)();return(0,P.jsx)(et,{input:e("auth_dweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:null,suspense:{fallback:(0,P.jsx)(o.$j,{accessibilityLabel:t._('Loading Pin data', 'authDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:null},children:({data:e})=>!!e&&(0,P.jsx)(Y,{pinKey:{type:"deprecated",data:e}})})}},550627:(e,t,a)=>{"use strict";a.d(t,{Z:()=>L});var i,n,l=a(883119),r=a(677929),s=a(695238),o=a(140017),u=a(340523),d=a(903054),c=a(667294);a(167912);var p=a(616550),g=a(603520),h=a(735382),m=a(10584),_=a(712314),y=a(207012),f=a(777609),v=a(513911),x=a(624797),b=a(250790),S=a(40770),w=a(129675),k=a(34202),P=a(295166),F=a(128993),T=a(8760),j=a(920672),I=a(785893);let C=void 0!==i?i:i=a(593390);function E(e){let{pinKey:t,resourceOptions:a}=e,i=(0,y.Z)(C,t),{visualSearchFlashlightUnifiedResource:n,filters:l}=(0,T.Z)({resourceOptions:a});return(0,I.jsx)(j.Z,{filters:l,pinKey:i,visualSearchFlashlightUnifiedResourceData:n})}let A=void 0!==n?n:n=a(620254);function D({pinKey:e}){let{checkExperiment:t}=(0,u.F)(),a=(0,p.TH)(),i=(0,y.Z)(A,e),{getInitialCropArea:n}=(0,m.Z)({pinKey:i}),{getNormalizedPinImage:l}=(0,f.Z)({pinKey:i,maxWidth:v.RZ}),{width:r,height:s}=l(),{anyEnabled:o}=t("web_unified_visual_feed"),{anyEnabled:d}=t("web_flashlight_unified_feed"),T=(0,x.mB)(a.search),{cropSource:j,full_feed_title:C,surfaceType:D,category:Z,domain:L,max:R,min:O,q:K,requestParams:M,rs:N}=T,z=(0,b.Z)(Number(j))||5,H=(0,h.Z)(a),U=n({initialCropArea:H}),V=a.pathname.includes("/products"),$=(0,g.W)(D),B=V||"stl"===$?"shopping":"flashlight",G=(0,S.Z)({cropSource:z,isProductPage:V,surfaceType:$}),[W,Y]=(0,c.useState)(parseInt(O,10)||null),[q,X]=(0,c.useState)(parseInt(R,10)||null),[J,Q]=(0,c.useState)(L?decodeURI(L):null),[ee,et]=(0,c.useState)(Z?decodeURI(Z):null);function ea({minPrice:e,maxPrice:t,domainParam:a,categoryParam:i}){Y(e),X(t),Q(a),et(i)}let ei={categories:ee,crop:(0,w.Z)({cropArea:U,scaledWidth:r,scaledHeight:s}),crop_source:z,domains:J,entry_source:B,entrypoint:G,field_set_key:"shopping_grid_item",image_signature:i.imageSignature||void 0,is_shopping:(0,_.Z)({cropSource:z,inStelaUFExperiment:o,isProductPage:V,surfaceType:$}),pin_id:i.entityId,price_max:q,price_min:W,request_params:M,source:N},en=(0,c.useMemo)(()=>({cropArea:U,cropSource:z,entrySource:B,handleFilterChange:ea,isProductPage:V,requestParams:M,searchQuery:K,submittedFilters:{category:Z,domain:L,max:R,min:O},surfaceType:$,title:C,trafficSource:N}),[Z,U,z,L,B,V,R,O,M,K,$,C,N]);if(!i)return null;let el="flashlight"!==$||d?(0,I.jsx)(E,{pinKey:i,resourceOptions:ei}):V?(0,I.jsx)(P.Z,{pinKey:i,resourceOptions:ei}):(0,I.jsx)(F.Z,{pinKey:i,resourceOptions:ei});return(0,I.jsx)(k._,{value:en,children:el})}let Z=(0,s.Z)({useGraphQLAdapter:d.Bi,useLegacyAdapter:d.gv});function L(){let{checkExperiment:e}=(0,u.F)(),t=(0,o.ZP)(),{anyEnabled:a}=e("web_image_search_unification");return(0,I.jsx)(Z,{input:e("auth_dweb_graphql_closeup_shop_pinResource").anyEnabled?{enabled:!0,data:null,suspense:{fallback:(0,I.jsx)(l.$j,{accessibilityLabel:t._('Loading Pin data', 'RelatedProductsPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:null},children:({data:e})=>!!e&&(a?(0,I.jsx)(D,{pinKey:{type:"deprecated",data:e}}):(0,I.jsx)(r.Z,{pinKey:{type:"deprecated",data:e}}))})}},648145:(e,t,a)=>{"use strict";a.d(t,{Z:()=>Z});var i=a(702664),n=a(616550),l=a(901855),r=a(140017),s=a(340523),o=a(995917),u=a(160567),d=a(624797),c=a(689390),p=a(554786),g=a(149722),h=a(670588),m=a(250790),_=a(883119),y=a(214877),f=a(920434),v=a(213377),x=a(165706),b=a(179425),S=a(494125),w=a(801690),k=a(619033),P=a(771881),F=a(676554),T=a(670633),j=a(125768),I=a(774812),C=a(785893);function E({fixedHeaderOverrideTop:e,handleBackClick:t,inUnifiedFeedExp:a,pageTitle:i,searchResourceOptions:n,visualSearchFlashlightUnifiedResource:l}){let{logContextEvent:r}=(0,y.v)(),s=a?40:48,o=a?void 0:-v.D6,{data:u,fetchMore:d,isAtEnd:c,isFetching:p}=l||{},g=u?.results||[],h=g.reduce((e,t)=>"pin"===t.type?[...e,t]:e,[]),m=JSON.stringify({is_product_only_feed:!0}),E={name:"VisualLiveSearchProductFeedResource",options:n};return(0,S.Z)(()=>{let e=(0,f.Z)(()=>{r({event_type:110,view_parameter:3462,view_type:427})},1e3);return a&&window.addEventListener("scroll",e),()=>{a&&window.removeEventListener("scroll",e)}}),(0,C.jsx)(w.Z,{auxData:a?{commerce_data:m}:void 0,viewParameter:3462,viewType:427,children:(0,C.jsxs)(b.default,{hasFixedHeader:!0,children:[(0,C.jsx)(x.FixedHeader,{height:a?60:void 0,overrideTop:e,children:(0,C.jsxs)(_.kC,{alignItems:"center",justifyContent:"between",children:[(0,C.jsx)(_.xu,{alignItems:"center",display:"flex",height:s,justifyContent:"center",marginStart:o,width:s,children:(0,C.jsx)(j.Z,{color:a?"darkGray":void 0,disableRedirect:!0,icon:"arrow-back",onTouch:t,size:a?"sm":void 0,viewParameter:3462,viewType:427})}),(0,C.jsx)(_.X6,{accessibilityLevel:1,size:"300",children:i}),(0,C.jsx)(_.xu,{marginEnd:o,width:s})]})}),a?(0,C.jsx)(I.Z,{feedItems:h,feedKey:(0,T.J)("VisualSearchFlashlightUnifiedResource",n)??"",pagination:{loadNext:d||(()=>void 0),hasNext:!c,isLoadingNext:p||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,C.jsx)(P.cn,{children:(0,C.jsx)(F.ZP,{auxData:{commerce_data:m},componentType:0,duploQueryRef:null,pinId:e.id,slotIndex:t,trackingParams:e.trackingParams||void 0,trafficSource:"shop_feed",viewParameter:3462,viewType:427})})}):(0,C.jsx)(k.ZP,{feedItemProps:{viewParameter:3462,viewType:427},feedKey:(0,T.J)(E.name,E.options)??"",resourceConfig:E,trafficSource:"shop_feed"})]})})}var A=a(19447);function D(e){let{searchResourceOptions:t}=e,a=(0,o.Z)({name:"VisualSearchFlashlightUnifiedResource",options:t});return(0,C.jsx)(E,{...e,visualSearchFlashlightUnifiedResource:a})}function Z(){let{checkExperiment:e}=(0,s.F)(),t=(0,r.ZP)(),a=(0,p.ZP)(),_=(0,n.k6)(),{previous:y}=(0,l.Hv)(),f=(0,n.TH)(),{isAuth:v}=(0,g.Z)(),x=(0,n.$B)(),{pinId:b}=(0,c.Z)(x.params.id||""),{data:S}=(0,o.Z)({name:"PinResource",options:{id:b,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),w=(0,A.S6)()(b),k=(0,i.useSelector)(e=>e.flashlight.cropSource||5);if(!(S??w))return null;let{anyEnabled:P}=e("mweb_flashlight_unified_feed"),{cropbox_dimensions:F,crop_source:T,x:j,y:I,w:Z,h:L}=(0,d.mB)(f.search),[R,O,K,M]=F?F.replace(/\{|\}/g,"").split(","):[],N=P?(0,h.Z)({x:R,y:O,w:K,h:M}):(0,h.Z)({x:j,y:I,w:Z,h:L}),z=P?(0,m.Z)(Number(T)):k,H=P?t._('Shop similar', 'mobileFlashlightPage.heading', 'Shop similar items from the visual search image'):t._('Shop similar items', 'mobileFlashlightPage.heading', 'Header explaining results of flashlight products search'),U={fixedHeaderOverrideTop:(0,u.ZP)(a,v),handleBackClick:()=>{if(0===y.length){_.replace(`/pin/${b}/visual-search/`);return}_.goBack()},inUnifiedFeedExp:P,pageTitle:H,searchResourceOptions:{pin_id:b,crop:N,crop_source:z,is_shopping:!0,entry_source:"shopping",entrypoint:"feed_module"}};return P?(0,C.jsx)(D,{...U}):(0,C.jsx)(E,{...U})}},944846:(e,t,a)=>{"use strict";a.d(t,{By:()=>_,IT:()=>h,N6:()=>o,br:()=>u,jq:()=>c,lU:()=>g,mk:()=>p,tq:()=>d});var i=a(107366);let n=e=>({type:"CLEAR_RECENT_SEARCH",payload:{query:e}}),l=()=>({type:"CLEAR_RECENT_SEARCHES"}),r=e=>({type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}),s=()=>({type:"CLEAR_RECENT_PERSONAL_SEARCHES"}),o=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),u=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),d=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),c=(e,t,a)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:t,recent_queries_tags:a}}),p=e=>({type:"SET_ANIMATION_ON_BODY_FILTER",payload:{animated:e}}),g=(e,t,a)=>n=>{(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(t,a),n("PERSONAL"===e?s():l())},h=(e,t,a,l,s)=>o=>{a||(0,i.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t}}).then(l,s),o("PERSONAL"===t?r(e):n(e))},m=e=>({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}}),_=e=>t=>{t(m(e))}},170568:(e,t,a)=>{"use strict";a.d(t,{Cp:()=>o,FK:()=>s,H5:()=>v,MI:()=>h,O0:()=>g,QZ:()=>r,W:()=>y,WF:()=>d,Wz:()=>x,a5:()=>c,dz:()=>_,e0:()=>p,e2:()=>l,iW:()=>f,n1:()=>n,rm:()=>u,xu:()=>m});var i=a(96157);let n=()=>({type:"DISMISS_UNAUTH_SAVE"}),l=()=>({type:"COMPLETE_UNAUTH_SAVE_ACTION"}),r=e=>({type:"SET_UNAUTH_SAVE_PIN_ID",payload:{unauthSavePinId:e}}),s=()=>({type:"HIDE_NAV_FOOTER"}),o=()=>({type:"SHOW_NAV_FOOTER"}),u=e=>({type:"SET_LOGIN_SIGNUP_FROM",payload:{from:e}}),d=()=>({type:"SHOW_REPIN_ANIMATION"}),c=()=>({type:"HIDE_REPIN_ANIMATION"}),p=e=>({type:"SET_NUM_SIGNUP_STEPS",payload:{steps:e}}),g=()=>({type:"SET_OWN_PROFILE_PINS_REFRESH"}),h=e=>({type:"SHOW_BIZ_NUX_HOMEFEED_LOADER",payload:e}),m=e=>({type:"SET_VIEWED_IMAGE",payload:{viewedImageSignature:e}}),_=e=>({type:"SET_VIEWED_SHARED_PINS",payload:{pins:e}}),y=()=>({type:"DISMISS_UNAUTH_APP_UPSELL"}),f=e=>e?{type:"LOGGED_OUT_USER_INFO_FOUND",payload:e}:{type:"LOGGED_OUT_USER_INFO_NOT_FOUND"},v=e=>({type:"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX",payload:e}),x=(e,t)=>({type:"SET_LANDING_PAGE_TYPE",payload:e?(0,i.bo)(e)?"today":(0,i.dr)(e)?"ideas":t&&(0,i.dZ)(e,t)?"own_section":t&&(0,i.J)(e,t)?"own_board":(0,i.OJ)(e)?"section":(0,i.am)(e)?"board":(0,i.L6)(e)?"closeup":(0,i.C$)(e)?"home":(0,i.cD)(e)?"profile":(0,i.En)(e)?"search":(0,i.$V)(e)?"topic":"":""})},125768:(e,t,a)=>{"use strict";a.d(t,{Z:()=>_});var i=a(702664),n=a(616550),l=a(883119),r=a(224796),s=a(587703),o=a(525364),u=a(140017),d=a(340523),c=a(731714),p=a(217058),g=a(623409),h=a(554786),m=a(785893);function _({alignIconLeft:e,bgColor:t,color:a,disableRedirect:_=!1,fallbackUrl:y,icon:f="arrow-back",onTouch:v,padding:x,placement:b,shouldUseFallbackUrl:S,size:w="lg",viewParameter:k,viewType:P,fallbackUrlForExp:F}){let T=(0,u.ZP)(),j=(0,h.HG)(),{checkExperiment:I}=(0,d.F)(),C=(0,n.k6)(),E=(0,n.TH)(),A=(0,i.useSelector)(e=>e.session.isAuthenticated),D=(0,s.Z)(),Z=(0,g.Z)(),L=!A&&F&&"/ideas"===y,{viewType:R,viewParameter:O}=(0,o.SU)(),[K,M]=P?[P,k]:[R,O],N=()=>E.search&&E.search.includes("?nativeShouldDismiss=true"),z=()=>{let e=c.Z.getItem(r.pm);E.key||"/ideas"!==y?(0,p.My)(`pinner_conversion.back_button.${String(e?.[0].pageType)}`):(0,p.My)("pinner_conversion.back_button.no_history"),(0,p.My)(`web_back_button_click.${String(b)}.is_auth_${String(A)}`),Z({action:"click",item:"back-button"}),K&&D({view_type:K,view_parameter:M,element:34,event_type:102}),v&&v(),_||((!E.key||E.state&&"redirect"===E.state.referrer||S)&&y?L?j&&I("web_unauth_backbutton_navigation").anyEnabled?(C.push(F||y),(0,p.My)("web.unauth.back_button.l1interest")):!j&&I("mweb_unauth_backbutton_navigation").anyEnabled?(C.push(F||y),(0,p.My)("mweb.unauth.back_button.l1interest")):C.push(y):C.push(y):E.pathname.includes("/password/reset/")&&N()?C.push("/login/?dismissWebview=true"):C.goBack())};return(0,m.jsx)(l.xu,{"data-test-id":"back-button",children:e?(0,m.jsx)(l.xu,{alignItems:"center",display:"flex",height:48,marginStart:"cancel"===f?-1:-2,width:48,children:(0,m.jsx)(l.hU,{accessibilityLabel:T._('Back', 'navigation button', 'navigation button'),bgColor:t,icon:f,iconColor:!a&&(!t||["white","lightGray","transparent"].includes(t))?"gray":a,onClick:z,padding:"auto"!==x?x:2,size:w})}):(0,m.jsx)(l.hU,{accessibilityLabel:T._('Back', 'navigation button', 'navigation button'),bgColor:t,icon:f,iconColor:!a&&(!t||["white","lightGray","transparent"].includes(t))?"gray":a,onClick:z,padding:"auto"!==x?x:2,size:w})})}},490972:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var i=a(883119),n=a(785893);function l({children:e}){return(0,n.jsx)(i.xu,{paddingY:4,children:e})}},76936:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var i=a(667294),n=a(883119),l=a(136359),r=a(597553),s=a(838551),o=a(369971),u=a(318612),d=a(214877),c=a(140017),p=a(494125),g=a(561916),h=a(785893);function m({categoryFilters:e,cropSource:t,handleCategoryChange:a,viewParameter:l,viewType:r}){let{logContextEvent:s}=(0,d.v)(),o=(0,c.ZP)(),[u,p]=(0,i.useState)(!0);return(0,h.jsxs)(i.Fragment,{children:[(0,h.jsxs)(n.kC,{alignItems:"center",justifyContent:"between",children:[(0,h.jsx)(n.xv,{weight:"bold",children:o._('Product category', 'filter.category.header', 'Header of product category filter containing filter options')}),(0,h.jsx)(n.xu,{flex:"none",children:(0,h.jsx)(n.hU,{accessibilityLabel:o._('Product category', 'filter.category.button', 'accessibility label for the icon button to open or close domain filter'),icon:u?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{p(!u),s({event_type:101,component:13535,element:11547,view_type:r,view_parameter:l,aux_data:{commerce_data:JSON.stringify({filter:u?"collapsed":"expanded"})}}),u||s({event_type:13,component:13535,view_type:r,view_parameter:l,aux_data:{commerce_data:JSON.stringify({source:(0,g.Z)({cropSource:t,viewType:r})})}})},size:"sm"})})]}),u?(0,h.jsx)(i.Fragment,{children:e.slice(0,5).map((e,t)=>(0,h.jsxs)(n.xu,{alignItems:"center",direction:"row",display:"flex",marginBottom:3,children:[(0,h.jsx)(n.xu,{flex:"grow",children:(0,h.jsx)(n.xv,{children:e.label.charAt(0).toUpperCase()+e.label.slice(1)})}),(0,h.jsx)(n.xu,{children:(0,h.jsx)(n.hU,{accessibilityLabel:o._('Category Filter Option', 'filter.category.option', 'Accessibility label for radio button of category filter choices'),icon:e.checked?"check-circle":"circle-outline",iconColor:"darkGray",onClick:()=>a(t),size:"sm"})})]},e.label))}):(0,h.jsx)(n.xu,{width:"80%",children:(0,h.jsx)(n.xv,{color:"subtle",size:"200",children:function(e=[],t){let a=e.filter(e=>e.checked),i=a.length,n=0===i?t._('All', 'filter.category.applied', 'text indicates that no categories filter is currently applied for filtering'):`(${i}) ${a.map(e=>e.label).join(", ")}`;return n}(e,o)})})]})}var _=a(490972);function y(e,t){return e.filter(e=>e.checked).map(e=>e[t]).join(",")}function f(e){return e.map(e=>({...e,checked:!1}))}function v({listOfAvailableFiltersFromAPI:e,appliedFilterValues:t,key:a,component:n,viewType:l,viewParameter:r}){let{logContextEvent:s}=(0,d.v)(),[o,u]=(0,i.useState)([]),[c,p]=(0,i.useState)(""),[g,h]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(e){let i=f(e),n=t?function(e,t,a){if(e){let i=decodeURI(e).split(",");return t.map(e=>i.includes(e[a])?{...e,checked:!0}:e)}return t}(t,i,a):i;u(n);let l=y(n,a);p(l)}},[e,t,a]),{filters:o,setFilters:u,submittedFilters:c,submitFilters:function(e){e!==c&&s({event_type:7472,component:n,view_type:l,view_parameter:r}),p(e),h(!1)},isFilterChanged:g,clearFilters:()=>f(o),getSelected:e=>y(e,a),handleFilterChange:function({index:e,pinId:t,auxCommerceData:i}){let d=!o[e].checked,p=[...o.slice(0,e),{...o[e],checked:d},...o.slice(e+1)];u(p),h(c!==y(p,a)),s({event_type:101,component:n,element:11548,view_type:l,view_parameter:r,aux_data:{pin_id:t,commerce_data:JSON.stringify({[a]:o[e][a],select:d,...i})}})}}}function x({categoryFilters:e,cropSource:t,domainFilters:a,drawerHeight:l,handleFilterChange:r,onSubmit:y,pinId:f,priceFilters:x,submittedFilters:b,updateButtonText:S,width:w,viewParameter:k,viewType:P}){let{logContextEvent:F}=(0,d.v)(),T=(0,c.ZP)();(0,p.Z)(()=>{F({event_type:13,component:13467,view_type:P,view_parameter:k,aux_data:{commerce_data:JSON.stringify({source:(0,g.Z)({cropSource:t,viewType:P})})}})});let{category:j,domain:I,max:C,min:E}=b||{},{filters:A,setFilters:D,submittedFilters:Z,submitFilters:L,isFilterChanged:R,clearFilters:O,getSelected:K,handleFilterChange:M}=v({listOfAvailableFiltersFromAPI:a,appliedFilterValues:I,key:"domain",component:13469,viewType:P,viewParameter:k}),{filters:N,setFilters:z,submittedFilters:H,submitFilters:U,isFilterChanged:V,clearFilters:$,getSelected:B,handleFilterChange:G}=v({listOfAvailableFiltersFromAPI:e,appliedFilterValues:j,key:"label",component:13535,viewType:P,viewParameter:k}),[W,Y]=(0,i.useState)(x),[q,X]=(0,i.useState)(-1),[J,Q]=(0,i.useState)(-1),[ee,et]=(0,i.useState)(-1),[ea,ei]=(0,i.useState)(-1),[en,el]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(!x||C&&E||Y(x),E){let e=parseInt(E,10);ei(e),Q(e)}else Q(x?.min_value??-1),ei(x?.min_value??-1);if(C){let e=parseInt(C,10);et(e),X(e)}else X(x?.max_value??-1),et(x?.max_value??-1)},[x,C,E]);let{max_value:er,min_value:es,currency_type:eo}=W||{},eu=e=>t=>{let a,i;let n=0>(t||0)?0:t;n&&F({event_type:7472,component:13468,view_type:P,view_parameter:k});let l=!1;"max"===e?(a=n||er,-1===(i=J)&&(i=es),i>a&&(i=Math.max(a-s.$,0))):(i=n||0,-1===(a=q)&&(a=er),a<i&&(a=i+s.$)),el(l=l||ea!==i||ee!==a),Q(i),X(a)};(0,i.useEffect)(()=>{S&&S(function({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:i},n){let l=n._('Filters', 'Filter icon button to open drawer containing price filter and domain filters on related products feed', 'Filter icon button to open drawer containing price filter and domain filters on related products feed'),r=function({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:i}){let n=t?t.split(",").length:0,l=e?e.split(",").length:0;return(i||a?1:0)+n+l}({categoryFilters:e,domainFilters:t,minPrice:a,maxPrice:i}),s=r>0?` (${r})`:"";return`${l}${s}`}({categoryFilters:H,domainFilters:Z,maxPrice:-1===ee||ee===er?void 0:ee,minPrice:-1===ea||ea===es?void 0:ea},T))},[T,ee,ea,H,Z,S,er,es]);let ed=({categoryParam:e,domainParam:t,maxPrice:a,minPrice:i})=>{r({categoryParam:e,domainParam:t,maxPrice:-1!==a?a:void 0,minPrice:-1!==i?i:void 0}),et(a),ei(i),el(!1),(ee!==a||ea!==i)&&F({event_type:7472,component:13468,view_type:P,view_parameter:k}),L(t),U(e);let n=-1!==i,l=-1!==a,s=""!==t,o=""!==e,u=n?i.toString():"",d=l?a.toString():"",c=s?encodeURI(t):"",p=o?encodeURI(e):"";y&&y({category:p,domain:c,max:d,min:u})};return(0,h.jsxs)(i.Fragment,{children:[(0,h.jsxs)(n.xu,{direction:"column",display:"flex",height:l-50-70,overflow:"scroll",paddingX:1,paddingY:1,width:"100%",children:[(0,h.jsxs)(n.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,h.jsx)(n.xv,{weight:"bold",children:T._('Filter', 'shopping.filter.header', 'Header for the types of filters')}),(0,h.jsx)(n.zx,{onClick:()=>{X(-1),Q(-1),D(O()),z($()),ed({categoryParam:"",domainParam:"",maxPrice:-1,minPrice:-1}),F({event_type:101,component:13467,element:11545,view_type:P,view_parameter:k})},size:"md",text:T._('Clear all', 'filter.clear.button', 'Button to clear all set filters on product group filters')})]}),!!W&&-1!==J&&-1!==q&&(0,h.jsx)(_.Z,{children:(0,h.jsx)(u.Z,{cropSource:t,currencyCode:eo,defaultMaxPrice:er,defaultMinPrice:es,disableAutoFormatOnChange:!0,handleMaxPriceChange:eu("max"),handleMinPriceChange:eu("min"),maxPrice:q,minPrice:J,uiType:"slider",viewParameter:k,viewType:P})}),!!N&&N.length>0&&4!==t&&(0,h.jsx)(_.Z,{children:(0,h.jsx)(m,{categoryFilters:N,cropSource:t,handleCategoryChange:e=>{G({index:e,pinId:f})},viewParameter:k,viewType:P})}),!!A&&A.length>0&&(0,h.jsx)(_.Z,{children:(0,h.jsx)(o.Z,{cropSource:t,filterOptions:A,handleFilterChange:e=>{M({index:e,pinId:f,auxCommerceData:{source:(0,g.Z)({cropSource:t,viewType:P})}})},showVerifiedMerchants:!0,uiType:"check-circles",viewParameter:k,viewType:P})})]}),(0,h.jsx)(n.xu,{color:"default",display:"flex",justifyContent:"center",position:"fixed",width:w,children:(0,h.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},direction:"row",display:"flex",paddingY:2,children:(0,h.jsx)(n.xu,{marginStart:2,children:(0,h.jsx)(n.sg,{span:6,children:(0,h.jsx)(n.zx,{color:"red",dataTestId:"confirm-filters-button",disabled:!(R||V||en),onClick:()=>{let e=K(A),t=B(N);ed({categoryParam:t,domainParam:e,maxPrice:q,minPrice:J}),F({event_type:101,component:13467,element:11546,view_type:P,view_parameter:k})},size:"md",text:T._('Apply', 'filter.apply.button', 'Button to submit all selected filter options'),type:"submit"})})})})})]})}function b({categoryFilters:e,cropSource:t,domainFilters:a,isDrawerOpen:s,handleFilterChange:o,handleSubmit:u,pinId:d,priceFilters:c,submittedFilters:p,topOffset:g=0,updateButtonText:m,viewParameter:_=3455,viewType:y}){let f=(0,l.t)(),v=f+g,[b,S]=(0,i.useState)(0),w=()=>{S(window.innerHeight-f)};return(0,i.useEffect)(()=>(w(),window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w)}),[]),(0,h.jsx)(n.xu,{color:"default",dangerouslySetInlineStyle:{__style:{marginRight:s?0:-r.pG,visibility:s?"visible":"hidden",top:v}},height:b,left:!0,paddingX:r.VF,position:"fixed",width:r.pG,zIndex:new n.Ry(2),children:(0,h.jsx)(x,{categoryFilters:e,cropSource:t,domainFilters:a,drawerHeight:b,handleFilterChange:o,onSubmit:u,pinId:d,priceFilters:c,submittedFilters:p,updateButtonText:m,viewParameter:_,viewType:y,width:r.pG-r.VF*r.vc*2})})}},597553:(e,t,a)=>{"use strict";a.d(t,{VF:()=>n,pG:()=>i,vc:()=>l});let i=348,n=7,l=4},561916:(e,t,a)=>{"use strict";function i({cropSource:e,viewType:t}){return 2===t?"search":e&&5!==e?4===e?"stela":null:"related_products"}a.d(t,{Z:()=>i})},126301:(e,t,a)=>{"use strict";a.d(t,{Z:()=>m});var i=a(667294),n=a(496998),l=a(883119),r=a(587703),s=a(696534),o=a(140017),u=a(72461),d=a(5859),c=a(943484),p=a(785893);let g=({domain:[e,t],handle:{id:a,value:i,percent:n},getHandleProps:l,touched:r,activeHandleID:s})=>(0,p.jsx)("div",{"aria-valuemax":t,"aria-valuemin":e,"aria-valuenow":i,role:"slider",style:{left:`${n}%`,position:"absolute",marginLeft:"-11px",marginTop:"-6px",border:"1px solid white",zIndex:2,width:15,height:15,cursor:"pointer",borderRadius:"50%",backgroundColor:"black",transform:r&&s===a?"scale(2)":"scale(1)",transition:"transform 0.2s"},...l(a)}),h=({source:e,target:t,getTrackProps:a,backgroundColor:i})=>(0,p.jsx)("div",{style:{position:"absolute",height:5,zIndex:1,backgroundColor:i||"black",borderRadius:7,cursor:"pointer",left:`${e.percent}%`,width:`${t.percent-e.percent}%`},...a()}),m=function({cropSource:e,currencyType:t,minPrice:a,maxPrice:m,lowerBound:_,upperBound:y,handlePriceChange:f,withTitle:v,instructions:x}){let b=(0,o.ZP)(),S=(0,u.Z)(),w=(0,r.Z)(),{locale:k}=(0,d.B)(),P={position:"absolute",width:"100%",height:5,borderRadius:7,cursor:"pointer",backgroundColor:(0,s.Yc)()?"#454545":"lightGrey"},F=[Math.ceil(_),Math.ceil(y)],T=[Math.ceil(a),Math.ceil(m)],[j,I]=(0,i.useState)([!1,!1]);(0,i.useEffect)(()=>{w({event_type:120,component:13468,view_parameter:3396,view_type:72,aux_data:{commerce_data:JSON.stringify({source:(0,c.Z)(e)})}})},[]);let C={currency:t,style:"currency",minimum_fraction_digits:0,maximum_fraction_digits:2};return(0,p.jsxs)(i.Fragment,{children:[v&&(0,p.jsx)(l.xu,{"data-test-id":"price-filter-label",paddingY:4,children:(0,p.jsx)(l.xv,{children:b._('Price range', 'FeedFiltering.PriceFilter.PriceRange', 'Area that lists the price slider')})}),(0,p.jsxs)(l.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,p.jsx)(l.xv,{weight:"bold",children:(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{transform:j[0]?"translateZ(0) translateY(0) scale(1.25)":""}},"data-test-id":"min-price-filter",children:S(k,T[0],C)})}),(0,p.jsx)(l.xv,{weight:"bold",children:(0,p.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{transform:j[1]?"translateZ(0) translateY(0) scale(1.25)":"",textAlign:"right"}},"data-test-id":"max-price-filter",children:S(k,T[1],{...C,uplimit:y})})})]},"priceSliderValues"),(0,p.jsxs)(n.iR,{domain:F,mode:2,onChange:()=>{I([!1,!1])},onUpdate:e=>{f(e);let[t,a]=T,[i,n]=e;t!==i?I([!0,!1]):a!==n&&I([!1,!0])},rootStyle:{margin:"5%",position:"relative",width:"90%"},step:1,values:T,children:[(0,p.jsx)(n.S0,{children:({getRailProps:e})=>(0,p.jsx)("div",{"data-test-id":"slider-handles-rail",style:P,...e()})}),(0,p.jsx)(n.wO,{children:({handles:e,getHandleProps:t,activeHandleID:a})=>(0,p.jsx)("div",{className:"slider-handles","data-test-id":"slider-handles",children:e.map((e,i)=>(0,p.jsx)(g,{activeHandleID:a,domain:F,getHandleProps:t,handle:e,touched:j[i]},e.id))})}),(0,p.jsx)(n.OF,{left:!1,right:!1,children:({tracks:e,getTrackProps:t})=>(0,p.jsx)("div",{className:"slider-tracks",children:e.map(({id:e,source:a,target:i})=>(0,p.jsx)(h,{backgroundColor:(0,s.Yc)()?"white":"black",getTrackProps:t,source:a,target:i},e))})})]}),(0,p.jsx)(l.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginTop:12,children:(0,p.jsx)(l.xv,{children:x||b._('Drag to change price', 'FeedFiltering.PriceFilter.PriceDragText', 'Area that instructs how to use price slider')})})]})}},19845:(e,t,a)=>{"use strict";a.d(t,{Z:()=>e$});var i,n,l=a(616550),r=a(340523),s=a(624797),o=a(554786),u=a(149722),d=a(167912),c=a(883119),p=a(695238),g=a(140017),h=a(603642),m=a(995917),_=a(689390),y=a(667294),f=a(702664),v=a(207229),x=a(214877),b=a(207012),S=a(213377),w=a(901855),k=a(406893),P=a(179425),F=a(734851),T=a(627408),j=a(160567),I=a(494125);function C(e,t){let a=0,i=!1,n=-1;return e.forEach((e,l)=>{let{x:r=0,y:s=0,h:o=0,w:u=0}=e,d=function(e,t){let{x:a,y:i,w:n,h:l}=e,{x:r,y:s,w:o,h:u}=t,d=Math.max(a,r),c=Math.min(a+n,r+o),p=Math.max(i,s),g=Math.min(i+l,s+u),h=d<c&&p<g?(c-d)*(g-p):0;return h/(n*l+o*u-h)}(t,{x:r,y:s,h:o,w:u});d>=.9&&d>a&&(a=d,i=!0,n=l)}),{isCropAreaOnDotArea:i,dotIndexToHide:n}}var E=a(250790),A=a(801690),D=a(619033),Z=a(771881),L=a(696534),R=a(125768),O=a(785893);function K({handleBackClick:e,viewParameter:t,viewType:a}){let i=(0,L.vs)();return(0,O.jsx)(c.xu,{"data-test-id":"cancelButton",left:!0,margin:2,position:"fixed",top:!0,children:(0,O.jsx)(R.Z,{color:i?"darkGray":"white",disableRedirect:!0,icon:"cancel",onTouch:e,padding:3,size:"lg",viewParameter:t,viewType:a})})}var M=a(587703),N=a(429218),z=a(585913),H=a(913574),U=a(49808),V=a(957435),$=a(797056);function B({pinDominantColor:e,url:t,closeupImageWidth:a,closeupImageHeight:i}){let n=(0,g.ZP)();return(0,O.jsx)($.Z,{alt:n._('Pin image', 'flashlight.cropper.closeupImage', 'Pin closeup image'),color:e,isFlashlightPage:!0,naturalHeight:i,naturalWidth:a,placeholder:t,showSpinner:!1,src:t})}let G=e=>{let{alt:t,src:a,top:i,left:n}=e;return(0,O.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:i,left:n}},height:24,position:"absolute",width:24,children:(0,O.jsx)(c.Ee,{alt:t,color:"transparent",naturalHeight:24,naturalWidth:24,src:a})})},W={backgroundColor:"#000000",opacity:"0.4"};function Y({closeupImageUrl:e,closeupImageDims:t,cropArea:{x:a,y:i,w:n,h:l},disableBorder:r,disableHandles:s,handleBackClick:o,onTouchEnd:u,onTouchMove:d,onTouchStart:p,pinDominantColor:h,showBackButton:m,viewParameter:_}){let y=(0,g.ZP)(),{closeupImageWidth:f,closeupImageHeight:v}=t,x=Math.floor(v*i),b=Math.floor(f*a),S=Math.floor(v*l),w=Math.floor(f*n),k=b+w,P=x+S;return(0,O.jsxs)(c.xu,{"data-test-id":"cropper-container",onTouchEnd:u,onTouchMove:d,onTouchStart:p,position:"relative",children:[(0,O.jsx)(B,{closeupImageHeight:v,closeupImageWidth:f,pinDominantColor:h,url:e??""}),(0,O.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:W},height:x,left:!0,position:"absolute",top:!0,width:"100%"}),(0,O.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...W,top:x}},height:S,left:!0,position:"absolute",width:b}),(0,O.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...W,top:x,left:k}},height:S,position:"absolute",right:!0}),(0,O.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...W,top:P}},left:!0,position:"absolute",width:"100%"}),m&&(0,O.jsx)(K,{handleBackClick:o,viewParameter:_,viewType:427}),!s&&(0,O.jsxs)(c.xu,{"data-test-id":"CropperHandles",children:[(0,O.jsx)(G,{alt:y._('Top left cropper handle', 'flashlight.cropper.topLeftHandle', 'top left handle for cropping image'),left:b-9,src:U,top:x-9}),(0,O.jsx)(G,{alt:y._('Top right cropper handle', 'flashlight.cropper.topRightHandle', 'top right handle for cropping image'),left:k-15,src:V,top:x-9}),(0,O.jsx)(G,{alt:y._('Bottom left cropper handle', 'flashlight.cropper.bottomLeftHandle', 'bottom left handle for cropping image'),left:b-9,src:z,top:P-15}),(0,O.jsx)(G,{alt:y._('Bottom right cropper handle', 'flashlight.Cropper.BottomLeftHandle', 'bottom right handle for cropping image'),left:k-15,src:H,top:P-15})]}),(0,O.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{top:x-2,left:b-2,border:r?void 0:"2px solid #ffffff"}},"data-test-id":"CroppedArea",height:S+4,position:"absolute",rounding:2,width:w+4})]})}var q=a(520846);function X({auxData:e,onClick:t,shouldLogDotRender:a,showNoHalo:i,style:n,viewParameter:l,x:r,y:s}){let o=(0,g.ZP)(),u=(0,M.Z)();return(0,I.Z)(()=>{a&&u({aux_data:e,element:1221,event_type:120,view_parameter:l,view_type:72})}),(0,O.jsx)("div",{"aria-label":o._('Select a specific item on image', 'dot.accessibilityLabel', 'Accessibility label for <Dot /> component'),"data-test-id":"dot",onClick:t,onKeyPress:t,role:"button",style:{position:"absolute",top:s-16,left:r-16,outline:"none",...n},tabIndex:"0",children:(0,O.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:i?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:t?"pointer":"default"}},children:(0,O.jsx)(c.xu,{alignItems:"center",color:"light",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}},display:"flex",justifyContent:"center",padding:0,position:"absolute"})})})}var J=a(922719);let Q="flashlightDotPop",ee=(0,J.Ll)([`
  ${Q} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]),et=e=>{let t=parseFloat((.1*e).toFixed(2));return{animation:`${Q} 0.3s ease-out ${t}s both`}};function ea({closeupImageTop:e,imageHeight:t,imageTop:a,imageWidth:i,onDotTap:n,pinId:l,pinImageSignature:r,setCropArea:s,shouldLogDotRender:o,showNoHalo:u,viewParameter:d,visualObjects:c,visualObjectToHide:p}){let g=(0,M.Z)();return(0,O.jsxs)(y.Fragment,{children:[(0,O.jsx)(k.Z,{unsafeCSS:ee}),c.map((h,m)=>{if(m===p)return null;let{x:_=0,y=0,w:f=0,h:v=0}=h,x={x:_,y,h:v,w:f},b=(0,q.Z)({cropArea:{x:_,y,w:f,h:v},scaledWidth:i,scaledHeight:t}),S=Math.floor(b.x+b.w/2),w=Math.floor(b.y+a+b.h/2),k=et(m),P={pin_id:l,image_signature:r,visual_objects:JSON.stringify([x]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,O.jsx)(X,{auxData:P,onClick:function(){g({aux_data:P,element:1221,event_type:102,view_parameter:d,view_type:72}),n({cropArea:x,cropSource:4,visualObjects:c}),s?.(x)},shouldLogDotRender:o,showNoHalo:u,style:k,viewParameter:d,x:S,y:w-e},JSON.stringify(x))})]})}var ei=a(174281);let en={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function el({closeupImageUrl:e,closeupImageDims:t,cropArea:a,handleBackClick:i,handleChangeCloseupImageTop:n,handleCropperChange:l,headerHeight:r,inUnifiedFeedExp:s,pinDominantColor:o,pinId:u,pinImageSignature:d,showBackButton:p,viewParameter:g,visualObjects:h,visualObjectToHide:m}){let _=(0,M.Z)(),f=(0,y.useRef)(),[v,x]=(0,y.useState)(0),[b,S]=(0,y.useState)(0),[w,k]=(0,y.useState)(en.NONE),[P,F]=(0,y.useState)(a),{current:T}=(0,N.Z)(),{x:j,y:I,w:C,h:E}=P,{closeupImageTop:A,closeupImageMinTop:D,closeupImageWidth:Z,closeupImageHeight:L,minCropperWidthRatio:R,minCropperHeightRatio:K}=t,z=r||0,H=(e,t)=>{let a=t-A,i=e-(f.current?f.current.getBoundingClientRect().left:0),n=L*I,l=L*(I+E),r=Z*j,s=Z*(C+j);if(a>n+12&&a<l-12&&i>r+12&&i<s-12)return en.INSIDE;if(i<=r+12&&i>=r-12&&a>=n+15&&a<=l-15)return en.LEFT_CROPPER;if(i<=s+12&&i>=s-12&&a>=n+15&&a<=l-15)return en.RIGHT_CROPPER;if(i<=s-15&&i>=r+15&&a>=n-12&&a<=n+12)return en.TOP_CROPPER;if(i<=s-15&&i>=r+15&&a>=l-12&&a<=l+12)return en.BOTTOM_CROPPER;if(i<=r-9+24&&i>=r-12&&a>=n-12&&a<=n+24-9)return en.TOP_LEFT_HANDLE;if(i<=s+12&&i>=s-15&&a>=n-12&&a<=n+24-9)return en.TOP_RIGHT_HANDLE;else if(i<=r-9+24&&i>=r-12&&a>=l-15&&a<=l+12)return en.BOTTOM_LEFT_HANDLE;else if(i<=s+12&&i>=s-15&&a>=l-15&&a<=l+12)return en.BOTTOM_RIGHT_HANDLE;else return en.OUTSIDE};return(0,O.jsx)(c.kC,{justifyContent:"center",width:"100vw",children:(0,O.jsxs)(c.xu,{ref:f,dangerouslySetInlineStyle:{__style:{top:A,touchAction:"none"}},maxWidth:ei.g6,overflow:"hidden",position:"fixed",width:"100%",children:[(0,O.jsx)(Y,{closeupImageDims:t,closeupImageUrl:e,cropArea:P,handleBackClick:i,onTouchEnd:()=>{if(![en.NONE,en.OUTSIDE].includes(w)){let e=w===en.INSIDE?7603:7604;_({event_type:e,view_parameter:g,view_type:72}),l({cropArea:P,cropSource:6,visualObjects:h})}},onTouchMove:e=>{let{clientX:t,clientY:a}=e.touches[0];if(x(t),S(a),w===en.NONE){let e=H(t,a);k(e)}if(null!=R&&null!=K&&null!=D){let e=a-b,i=t-v,l=i/Z,r=e/L,s=Math.min(j+C-R,Math.max(0,j+l)),o=C+(j-s),u=Math.min(I+E-K,Math.max(0,I+r)),d=E+(I-u),c=Math.min(1-j,Math.max(R,C+l)),p=Math.min(1-I,Math.max(K,E+r));switch(w){case en.OUTSIDE:n(Math.floor(Math.max(D,Math.min(z,A+e))));break;case en.INSIDE:F(e=>({...e,x:Math.max(0,Math.min(1-C,j+l)),y:Math.max(0,Math.min(1-E,I+r))}));break;case en.LEFT_CROPPER:F(e=>({...e,x:s,w:o}));break;case en.RIGHT_CROPPER:F(e=>({...e,w:c}));break;case en.TOP_CROPPER:F(e=>({...e,y:u,h:d}));break;case en.BOTTOM_CROPPER:F(e=>({...e,h:p}));break;case en.TOP_LEFT_HANDLE:F({x:s,w:o,y:u,h:d});break;case en.TOP_RIGHT_HANDLE:F(e=>({...e,w:c,y:u,h:d}));break;case en.BOTTOM_LEFT_HANDLE:F(e=>({...e,h:p,x:s,w:o}));break;case en.BOTTOM_RIGHT_HANDLE:F(e=>({...e,h:p,w:c}))}}},onTouchStart:e=>{let{clientX:t,clientY:a}=e.touches[0];x(t),S(a),k(en.NONE)},pinDominantColor:o,showBackButton:p,viewParameter:g}),!!h.length&&0!==L&&0!==Z&&(0,O.jsx)(c.xu,{"data-test-id":"FlashlightDots",children:(0,O.jsx)(ea,{closeupImageTop:A,imageHeight:L,imageTop:A,imageWidth:Z,onDotTap:l,pinId:u,pinImageSignature:d,setCropArea:F,shouldLogDotRender:!T,showNoHalo:s,viewParameter:g,visualObjects:h,visualObjectToHide:m})})]})})}var er=a(254292),es=a(676554);let eo=e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});var eu=a(944846),ed=a(670633),ec=a(774812),ep=a(105737),eg=a(207993),eh=a(30378),em=a(5859),e_=a(55202),ey=a(217058),ef=a(623409),ev=a(943484);function ex(e,t,a){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:String(i))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}let eb={modal:{baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}}},eS={NONE:0,UP:1,DOWN:2};class ew extends y.Component{constructor(...e){super(...e),ex(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:eS.NONE,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),ex(this,"onTouchStart",e=>{let{clientY:t}=e.touches[0];this.setState({startY:t,shouldAnimate:!1,scrollDirection:eS.NONE})}),ex(this,"onTouchMove",e=>{let{clientY:t}=e.touches[0],{startY:a,currentDistanceFromTop:i}=this.state,{canMoveModal:n,maxDistanceFromTop:l}=this.props,r=t-a;n&&void 0!==l&&(r>0&&i>=0&&i<l&&window.scrollY<=0||r<0&&i<=l&&i>=0)&&this.setModalPosition(t)}),ex(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:t,canMoveModal:a}=this.props;this.props.shouldSnapToEnds&&this.state.scrollDirection===eS.DOWN?(this.header&&eh.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,ey.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===eS.UP&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:a,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),this.header&&eh.Z.addObstruction("top",this.header),e&&(0,ey.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),ex(this,"handleHandleMove",e=>{let{clientY:t}=e.touches[0],{canMoveModal:a,maxDistanceFromTop:i,minDistanceFromTop:n}=this.props,{startY:l,currentDistanceFromTop:r}=this.state;a&&r<=(n||0)&&t-l>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:i,isAtTop:!1,scrollDirection:eS.NONE,shouldAnimate:!0,startY:0}))}),ex(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:t,entryPoint:a,canMoveModal:i}=this.props,{currentDistanceFromTop:n,scrollDirection:l}=this.state;l===eS.NONE&&(n===e?(this.setState({canScrollOnChildren:i,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),(0,ey.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,ey.My)(`mweb.${a}.sliding_modal.header_touch.snap_to_bottom`)))}),ex(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:t}=this.state,{onDismiss:a,logContextEvent:i,maxDistanceFromTop:n,viewParameter:l,viewType:r}=this.props;e.stopPropagation(),a&&(i({aux_data:{commerce_data:JSON.stringify({snapped_top:0===t})},element:75,event_type:102,view_parameter:l,view_type:r}),this.setState({currentDistanceFromTop:n,startY:0,scrollDirection:eS.NONE},()=>a(e)))}),ex(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:t,shouldAnimate:a,canScrollOnChildren:i}=this.state,{baseStyles:n}=eb.modal;return{...n,animation:"modalReveal 0.3s ease-out both",position:i?"absolute":"fixed",top:t>-1?t:void 0,bottom:0,width:"100vw",...e&&a?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),ex(this,"setModalPosition",e=>{let{startY:t,currentDistanceFromTop:a}=this.state,{maxDistanceFromTop:i,snapToEndThreshold:n,entryPoint:l}=this.props;if(i){let r=e-t,s=Math.floor("CloseupShop"===l||"CloseUpMainPinDrawer"===l?Math.max(0,a+r):Math.min(i,Math.max(0,a+r))),o=eS.NONE;void 0!==n&&n>=0&&(r<0?o=s>Math.floor((1-n)*i)?eS.DOWN:eS.UP:r>0&&(o=s>Math.floor(n*i)?eS.DOWN:eS.UP)),this.setState({startY:e,currentDistanceFromTop:s,scrollDirection:o})}})}componentDidMount(){let{isOpen:e}=this.props;e&&eh.Z.pause()}componentDidUpdate(e,t){let{domainFilters:a,priceFilters:i,cropSource:n,isOpen:l,logContextEvent:r,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:o,minDistanceFromTop:u,entryPoint:d}=this.props,{currentDistanceFromTop:c}=this.state;if(l&&!e.isOpen?eh.Z.pause():!l&&e.isOpen&&eh.Z.resume(),"CloseUpMainPinDrawer"===d&&s<e.maxDistanceFromTop&&c>s&&this.handleHeaderTouch(),t.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&c===(u||0)&&o&&o(!0),a&&i&&(!(0,ep.ZP)(a,e.domainFilters)||!(0,ep.ZP)(i,e.priceFilters))){let e=(0,ev.Z)(n);r({event_type:13,view_parameter:"related_products"===e?3455:3456,view_type:72,element:11735})}}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&eh.Z.removeObstruction("top",this.header),e&&eh.Z.resume()}render(){let{children:e,headerChildren:t,heading:a,inUnifiedFeedExp:i,isOpen:n,isRTL:l,mobileAccessibilityCloseIconLabel:r,mobileHideCloseIcon:s,noDivider:o,showHandle:u}=this.props,{headerHeight:d,canScrollOnChildren:p}=this.state,g=!p&&i?"32px 32px 0 0":"0";return n?(0,O.jsx)(e_.Z,{children:(0,O.jsx)(c.xu,{"aria-label":a,role:"dialog",children:(0,O.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:g}},onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,O.jsxs)(c.iP,{accessibilityLabel:this.props.i18n._('View all search results', 'SlidingModal.Header.a11yLabel', 'Accessibility label for header of search results in flashlight'),onTap:this.handleHeaderTouch,children:[(0,O.jsxs)(c.Le,{top:d||0,children:[u&&(0,O.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:g}},"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",onTouchMove:this.handleHandleMove,children:eg.Z}),!s&&(0,O.jsxs)(c.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,O.jsxs)(c.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,O.jsx)(c.kC,{alignItems:"center",justifyContent:"start",children:(0,O.jsx)(c.hU,{accessibilityLabel:r||"Close visual search results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,O.jsx)(c.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:t}){let a=t?"marginRight":"marginLeft",i=t?"marginLeft":"marginRight";return e?{[a]:38,[i]:50,marginTop:15,marginBottom:15}:{[a]:-10,[i]:50,marginTop:15,marginBottom:15}}({isRTL:l})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,O.jsx)(c.X6,{accessibilityLevel:2,align:"center",size:"400",children:a})})]}),t||null,!o&&(0,O.jsx)(c.iz,{})]})]}),(0,O.jsx)(c.xu,{overflow:p?"auto":"visible",children:e})]})})})}):null}}function ek(e){let t=(0,g.ZP)(),a=(0,M.Z)(),{isRTL:i}=(0,em.B)(),n=(0,ef.Z)();return(0,O.jsx)(ew,{...e,i18n:t,isRTL:i,logContextEvent:a,trackInteraction:n})}let eP=`
  html, body {
    overscroll-behavior: none;
  }
`;function eF(){return Math.min(ei.g6,window.innerWidth)}function eT(e,t){return Math.floor(eF()/t*e)}function ej(e,t){let a=0,i=0,n=0;if(e&&e.imageSpec_736x){let t=e?e.imageSpec_736x:null;a=eF(),i=eT(t?.height??1,t?.width??1),n=function(e,t){let a=Math.floor(.6*window.innerHeight);return Math.min(a,eT(e,t))}(t?.height??1,t?.width??1)}return{closeupImageWidth:a,closeupImageHeight:i,closeupImageMinTop:n-i,closeupImageTop:t||0,minCropperWidthRatio:a?50/a:0,minCropperHeightRatio:i?50/i:0,modalTop:n}}function eI(e,t,a,i){let n=a?Number(a):.4,l=i?Number(i):.1;e>0&&t>0&&(a||(n=(t-2*t*.1)/e),i||(l=.1*t/e));let r={h:n,y:l};return r}function eC({cropArea:e,cropSource:t,headerHeight:a,inUnifiedFeedExp:i,pin:n,pinId:s,queryH:o,queryY:d,searchResourceOptions:p,setCropSource:h,setState:m,state:_,visualSearchFlashlightUnifiedResource:b}){let j=(0,g.ZP)(),{logContextEvent:E}=(0,x.v)(),L=(0,f.useDispatch)(),R=(0,l.k6)(),{previous:M}=(0,w.Hv)(),{checkExperiment:N}=(0,r.F)(),z=(0,l.TH)(),{isAuth:H}=(0,u.Z)(),{width:U=0}=(0,v.Z)()||{},V=(n?.visualObjects??[]).filter(e=>e.isStela),$=(n?.visualObjects??[]).filter(e=>!!e.label),B=V.length>0||$.length>0,G=B&&(N("mweb_flashlight_show_more_stela_dots").anyEnabled||N("mweb_flashlight_show_more_stela_dots_expansion").anyEnabled?V:$)||[],W=G.map(e=>{let{isStela:t,title:a,label:i,labelId:n,labelX:l,labelY:r,maxAnnotationNumDocuments:s,score:o,showOnCloseup:u,x:d,y:c,h:p,w:g}=e;return{is_stela:t??!1,title:a??"",label:i??"",label_id:n??"",label_x:l??0,label_y:r??0,max_annotation_num_documents:s??0,score:o??0,show_on_closeup:u??!1,x:d??0,y:c??0,h:p??0,w:g??0}}),[Y,q]=(0,y.useState)(C(W,e)),{isCropAreaOnDotArea:X,dotIndexToHide:J}=Y,Q=e=>L((0,eu.By)(e)),ee=e=>L(eo(e)),{data:et,fetchMore:ea,isAtEnd:ei,isFetching:en,isLoaded:ep}=b||{},eg=et?.results||[],eh=eg.find(e=>"story"===e.type),em=eg.filter(e=>"pin"===e.type),e_=eh?.action,{url:ey=`/pin/${s}`,title:ef=""}=e_||{},ev=j._('Shop similar', 'mobileFlashlight.productUpsellTitle', 'Shop similar products from the image.'),ex=j._('Image search', 'mobileFlashlight.organicFeedTitle', 'Search results from the image.'),eb=j._('Visual search', 'Visual search results', 'Visual search results'),eS=i&&(4===t||X)?3462:3050,ew=JSON.stringify({is_product_only_feed:!1}),{closeupImageWidth:eF,modalTop:eT}=_.closeupImageDims,eC=n?.imageSpec_736x?.url??"",eE=U-60<eF&&i;function eA(){E({component:14339,element:179,event_type:102,view_parameter:eS,view_type:72})}function eD(){if(0===M.length){R.replace(`/pin/${s}/`);return}R.goBack()}let[eZ,eL]=(0,y.useState)(0),[eR,eO]=(0,y.useState)(0),[eK,eM]=(0,y.useState)(!1),[eN,ez]=(0,y.useState)(!1),[eH,eU]=(0,y.useState)(void 0);function eV(){ez(!1),eM(!1),eU(void 0)}function e$(e,t){"vertical"!==t&&e.stopPropagation()}let eB=!!n,eG=(0,y.useMemo)(()=>ej(n,a),[n?.entityId,a]);return((0,y.useEffect)(()=>{if(eB){let{closeupImageHeight:e,modalTop:t=0}=eG,a=eI(e,t,Number(o),Number(d));m(e=>({...e,closeupImageDims:eG,...a}))}},[eB,eG]),(0,I.Z)(()=>{ee(t)}),n&&0!==eT)?(0,O.jsxs)(y.Fragment,{children:[(0,O.jsx)(k.Z,{unsafeCSS:eP}),(0,O.jsx)(A.Z,{auxData:i?{commerce_data:ew}:void 0,viewParameter:i?3462:3050,viewType:72,children:(0,O.jsx)(T.Z,{view:72,children:(0,O.jsxs)(P.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,O.jsx)(er.Z,{text:j._('Visual Search Page', 'flashlight.accessibilityhiddenheading.fullpage', 'accessibility label for flashlight page')}),(0,O.jsx)(c.xu,{color:"dark",height:"100vh",width:"100vw"}),(0,O.jsx)(el,{closeupImageDims:_.closeupImageDims,closeupImageUrl:eC,cropArea:e,handleBackClick:eD,handleChangeCloseupImageTop:function(e){m(t=>({...t,closeupImageDims:{...t.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:t,visualObjects:a}){ee(t),Q(s),q(C(a,e)),h(t),m(t=>({...t,...e})),R.replace(`/pin/${s}/visual-search/?x=${e.x}&y=${e.y}&h=${e.h}&w=${e.w}&cropSource=${t}`)},headerHeight:a,inUnifiedFeedExp:i,pinDominantColor:n.dominantColor||"#efefef",pinId:s,pinImageSignature:n.imageSignature,showBackButton:eE,viewParameter:eS,visualObjects:W,visualObjectToHide:J}),!eE&&i&&(0,O.jsx)(K,{handleBackClick:eD,viewParameter:eS,viewType:427}),(0,O.jsxs)(ek,{canMoveModal:!0,cropSource:t,entryPoint:"flashlight",headerHeight:a,heading:eb,inUnifiedFeedExp:i,isOpen:!0,location:z,maxDistanceFromTop:eT||0,minDistanceFromTop:H?60:a,mobileAccessibilityCloseIconLabel:j._('Close visual search results', 'close visual search results and go back to pin', 'close visual search results and go back to pin'),mobileHideCloseIcon:i,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eD,pinId:s,shouldSnapToEnds:!0,showHandle:i,snapToEndThreshold:.3,viewParameter:eS,viewType:72,children:[(0,O.jsx)(c.$j,{accessibilityLabel:j._('Loading visual search results', 'mobileFlashlightPage.loadingSpinner', 'Spinner for loading the visual search result'),show:i&&!ep}),i&&ep&&(0,O.jsxs)(y.Fragment,{children:[eh&&(0,O.jsxs)(y.Fragment,{children:[(0,O.jsxs)(c.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:4,children:[(0,O.jsx)(c.Tg,{href:ey,onTap:({event:e})=>{e.stopPropagation(),eA()},tapStyle:"compress",children:(0,O.jsx)(c.X6,{accessibilityLevel:2,size:"400",children:ev})}),(0,O.jsx)(c.I_,{accessibilityLabel:ef||j._('See more', 'headerModule.headerModuleActionButton.iconButton', 'An right arrow icon button to show more similar pins to the user in a new page'),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:ey,icon:"arrow-forward",iconColor:"darkGray",onClick:eA,size:"sm"})]}),(0,O.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},onTouchEnd:function(e){e$(e,eH),eV()},onTouchMove:function(e){let{clientX:t,clientY:a}=e.touches[0];Math.abs(a-eR)>10&&eM(!0),Math.abs(t-eZ)>10&&ez(!0),eN&&eK?eU(e=>e||"vertical"):eN?eU(e=>e||"horizontal"):eK?eU(e=>e||"vertical"):eU(void 0),e$(e,eH)},onTouchStart:function(e){let{clientX:t,clientY:a}=e.touches[0];eL(t),eO(a),eV()},children:(0,O.jsx)(F.default,{component:14339,disableHeader:!0,story:eh,storyGraphqlRef:null,surface:"ShoppingDynamicHeightGrid",view:72,viewParameter:3462})})]}),(0,O.jsx)(c.xu,{marginBottom:3,paddingX:4,children:(0,O.jsx)(c.X6,{accessibilityLevel:2,size:"400",children:ex})}),(0,O.jsx)(c.xu,{color:"default",dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},paddingX:S.D6,children:(0,O.jsx)(ec.Z,{feedItems:em,feedKey:(0,ed.J)("VisualSearchFlashlightUnifiedResource",p)??"",pagination:{loadNext:ea||(()=>void 0),hasNext:!ei,isLoadingNext:en||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,O.jsx)(Z.cn,{children:(0,O.jsx)(es.ZP,{auxData:{commerce_data:ew},componentType:0,duploQueryRef:null,pinId:e.id,slotIndex:t,trackingParams:e.trackingParams||void 0,viewParameter:3462,viewType:72})})})})]}),!i&&(0,O.jsx)(c.xu,{color:"default",paddingX:S.D6,children:(0,O.jsx)(D.ZP,{feedItemProps:{viewParameter:3050,viewType:72},feedKey:(0,ed.J)("VisualLiveSearchResource",p)??"",resourceConfig:{name:"VisualLiveSearchResource",options:p},trafficSource:"flashlight"})})]})]})})})]}):null}function eE(e){let{searchResourceOptions:t}=e,a=(0,m.Z)({name:"VisualSearchFlashlightUnifiedResource",options:t});return(0,O.jsx)(eC,{...e,visualSearchFlashlightUnifiedResource:a})}let eA=void 0!==i?i:i=a(990563);function eD({pinKey:e}){let{checkExperiment:t}=(0,r.F)(),{anyEnabled:a}=t("mweb_flashlight_unified_feed"),i=(0,l.$B)(),{pinId:n}=(0,_.Z)(i.params.id||""),d=(0,l.TH)(),c=(0,s.mB)(d.search),{cropSource:p,x:g,y:h,h:m,w:f}=c,{isAuth:v}=(0,u.Z)(),x=(0,o.ZP)(),S=!v&&(0,j.x9)(x)||void 0,w=(0,b.Z)(eA,e),[k,P]=(0,y.useState)(()=>{let e=ej(w,S);e.closeupImageTop=0;let{closeupImageHeight:t,modalTop:a=0}=e,i=eI(t,a,Number(m),Number(h));return{closeupImageDims:e,x:g?Number(g):.1,w:f?Number(f):.8,y:i.y,h:i.h}}),[F,T]=(0,y.useState)(()=>{let e=(0,E.Z)(Number(p));return e||(g&&h&&m&&f?6:5)}),I={x:k.x,y:k.y,w:k.w,h:k.h},C={cropArea:I,cropSource:F,headerHeight:S,inUnifiedFeedExp:a,pin:w,pinId:n,queryH:m,queryY:h,searchResourceOptions:{pin_id:n,crop:I,crop_source:F,is_shopping:!1,entry_source:"flashlight",entrypoint:null},setCropSource:T,setState:P,state:k};return a?(0,O.jsx)(eE,{...C}):(0,O.jsx)(eC,{...C})}var eZ=a(19447);let eL=void 0!==n?n:n=a(853512);function eR(e){return{width:e.width??0,url:e.url??"",height:e.height??0}}function eO(e){return e?.map(e=>({id:e.itemId??"",additional_images:function(e){let t=[];return e.forEach(({additionalImages:e,spec:a})=>{t.push(...function({additionalImages:e,spec:t}){let a=[];return e?.forEach(e=>{e.canonicalImage&&a.push({canonical_images:{[t]:eR(e.canonicalImage)},image_signature:e.imageSignature??""})}),a}({additionalImages:e,spec:a})??[])}),t}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}])??[]}))}function eK(e){let t={};return e.forEach(({image:e,spec:a})=>{e&&(t[a]=eR(e))}),t}let eM=(0,p.Z)({useGraphQLAdapter:function({pinId:e}){var t,a,i,n,l;let r=(0,d.useLazyLoadQuery)(eL,{pinId:e}),s=r.v3GetPinQuery?.data;if(!s)return null;let o={id:s.entityId??"",dominant_color:s.dominantColor??"",image_signature:s.imageSignature??"",visual_objects:(t=s.visualObjects,t?.map(e=>({detection:e.detection??!1,h:e.h??0,index:e.index??0,is_stela:e.isStela??!1,label:e.label??"",label_id:e.labelId??"",label_x:e.labelX??0,label_y:e.labelY??0,max_annotation_num_documents:e.maxAnnotationNumDocuments??0,score:e.score??0,show_on_closeup:e.showOnCloseup??!1,w:e.x??0,x:e.w??0,y:e.y??0}))??[]),images:eK([{image:s.imageOrig,spec:"orig"},{image:s.image736x,spec:"736x"},{image:s.image564x,spec:"564x"},{image:s.image474x,spec:"474x"},{image:s.image236x,spec:"236x"}])??{},rich_metadata:(a=s.richMetadata,{products:eO(a?.products)??[]}),rich_summary:(i=s.richSummary,{products:eO(i?.products)??[]}),carousel_data:(n=s.carouselData,{carousel_slots:(l=n?.carouselSlots,l?.map(e=>({image_signature:e.imageSignature??"",images:eK([{image:e.imageOrig,spec:"orig"},{image:e.image736x,spec:"736x"},{image:e.image564x,spec:"564x"},{image:e.image474x,spec:"474x"},{image:e.image236x,spec:"236x"}])??{}}))??[]),index:n?.index??0}),type:"pin"};return{pin:o}},useLegacyAdapter:function({pinId:e}){let{data:t}=(0,m.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),a=(0,eZ.S6)()(e),i=t??a;return i?{pin:i}:null}});function eN(){let{checkExperiment:e}=(0,r.F)(),t=(0,g.ZP)(),a=(0,l.$B)(),{pinId:i}=(0,_.Z)(a.params.id||"");return(0,O.jsx)(h.Z,{measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,O.jsx)(eM,{input:e("auth_mweb_graphql_flashlight_pinResource").anyEnabled||e("unauth_mweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:i},suspense:{fallback:(0,O.jsx)(c.$j,{accessibilityLabel:t._('Loading Pin data', 'mobileFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:{pinId:i}},children:({data:e})=>!!e&&(0,O.jsx)(eD,{pinKey:null!=e.pin?{type:"deprecated",data:e.pin}:null})})})}var ez=a(270766),eH=a(903054),eU=a(550627),eV=a(648145);let e$=function(){let e=(0,o.HG)(),t=(0,u.Z)(),a=(0,l.TH)(),{checkExperiment:i}=(0,r.F)(),{anyEnabled:n}=i("web_image_search_unification"),{surfaceType:d}=(0,s.mB)(a.search);return e?t.isAuth?["stela","stl"].includes(d)||n?(0,O.jsx)(eU.Z,{}):(0,O.jsx)(eH.ZP,{}):(0,O.jsx)(ez.Z,{}):a.pathname.includes("/products/")?(0,O.jsx)(eV.Z,{}):(0,O.jsx)(eN,{})}},585913:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_left-d4d98c77.svg"},913574:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_right-ccae4564.svg"},49808:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_left-68937c82.svg"},957435:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_right-4d7ae997.svg"}},e=>{var t=t=>e(e.s=t);e.O(0,[97270,83119,16550,24797,55169,27258,40432,7012,33,8575,40370,1643,87682,70633,33021,22987,8187,77068,37845,34851,71980,8342,19033,12127,15071,16094,2401,95442],()=>t(706737)),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-a7bb77053677b793.mjs.map